<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <title>Flexx UI</title>
</head>

<body id='body'>

<noscript> This Flexx application needs JavaScript to be turned on. </noscript>

<div id='flexx-spinner' class='flx-spinner' style='position:fixed; top:0; bottom:0;
left:0; right:0; background:#fff; color:#555; text-align:center; z-index:9999;
word-break: break-all; padding:0.5em;'>
<div>Starting Flexx app</div> <div style='font-size:50%; color:#66A;'></div>
</div>

<!-- Contents:

- reset.css
- flexx.ui._widget.css
- flexx.ui.layouts._layout.css
- flexx.ui.layouts._hv.css
- flexx.ui.widgets._button.css
- flexx-core.js
- flexx.ui._widget.js
- flexx.ui.layouts._layout.js
- flexx.ui.layouts._hv.js
- flexx.ui.widgets._button.js
- __main__.js
- flexx-export.js

-->


<style id='reset.css'>
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */
html
{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,
section,summary{display:block}
audio,canvas,progress,video{display:inline-block;vertical-align:baseline}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
a{background-color:transparent}
a:active,a:hover{outline:0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
h1{font-size:2em;margin:.67em 0}
mark{background:#ff0;color:#000}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-0.5em}
sub{bottom:-0.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:1em 40px}
hr{box-sizing:content-box;height:0}
pre{overflow:auto}
code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}
button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}
button{overflow:visible}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]
{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
input{line-height:normal}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button{height:auto}
input[type="search"]{-webkit-appearance:textfield;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
textarea{overflow:auto}
optgroup{font-weight:bold}
table{border-collapse:collapse;border-spacing:0}
td,th{padding:0}

</style>


<style id='flexx.ui._widget.css'>
/* ========================== flexx.ui._widget ==========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */





    .flx-Widget {
        box-sizing: border-box;
        overflow: hidden;
        position: relative;  /* helps with absolute positioning of content */
    }

    /* Main widget to fill the whole page */
    .flx-main-widget {
       position: absolute;
       left: 0;
       right: 0;
       width: 100%;
       top: 0;
       bottom: 0;
       height: 100%;
    }

    /* to position children absolute */
    .flx-abs-children > .flx-Widget {
        position: absolute;
    }

    /* Fix issue flexbox > Widget > layout on Chrome */
    .flx-Widget:not(.flx-Layout) > .flx-Layout {
        position: absolute;
    }
    
</style>


<style id='flexx.ui.layouts._layout.css'>
/* ====================== flexx.ui.layouts._layout ======================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */





    body {
        margin: 0;
        padding: 0;
    }

    .flx-Layout {
        /* sizing of widgets/layouts inside layout is defined per layout */
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        border-spacing: 0;
        border: 0;
    }

    
</style>


<style id='flexx.ui.layouts._hv.css'>
/* ======================== flexx.ui.layouts._hv ========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */





    /* === for box layout === */

    .flx-HVLayout > .flx-Widget {
        margin: 0; /* the layout handles the margin */
     }

    .flx-box {
        display: -webkit-flex;
        display: -ms-flexbox;  /* IE 10 */
        display: -ms-flex;     /* IE 11 */
        display: -moz-flex;
        display: flex;

        /* How space is divided when all flex-factors are 0:
           start, end, center, space-between, space-around */
        -webkit-justify-content: space-around;
        -ms-justify-content: space-around;
        -moz-justify-content: space-around;
        justify-content: space-around;

        /* How items are aligned in the other direction:
           center, stretch, baseline */
        -webkit-align-items: stretch;
        -ms-align-items: stretch;
        -moz-align-items: stretch;
        align-items: stretch;
    }

    .flx-box.flx-horizontal {
        -webkit-flex-flow: row;
        -ms-flex-flow: row;
        -moz-flex-flow: row;
        flex-flow: row;
        width: 100%;
    }
    .flx-box.flx-vertical {
        -webkit-flex-flow: column;
        -ms-flex-flow: column;
        -moz-flex-flow: column;
        flex-flow: column;
        height: 100%; width: 100%;
    }
    .flx-box.flx-horizontal.flx-reversed {
        -webkit-flex-flow: row-reverse;
        -ms-flex-flow: row-reverse;
        -moz-flex-flow: row-reverse;
        flex-flow: row-reverse;
    }
    .flx-box.flx-vertical.flx-reversed {
        -webkit-flex-flow: column-reverse;
        -ms-flex-flow: column-reverse;
        -moz-flex-flow: column-reverse;
        flex-flow: column-reverse;
    }

    /* Make child widgets (and layouts) size correctly */
    .flx-box.flx-horizontal > .flx-Widget {
        height: auto;
        width: auto;
    }
    .flx-box.flx-vertical > .flx-Widget {
        width: auto;
        height: auto;
    }

    /* If a boxLayout is in a compound widget, we need to make that widget
       a flex container (done with JS in Widget class), and scale here */
    .flx-Widget > .flx-box {
        flex-grow: 1;
        flex-shrink: 1;
    }

    /* === For split and fix layout === */

    .flx-split > .flx-Widget {
        /* Let child widgets position well, and help them become a layout
         * boundary. We cannot do "display: block;", as that would break stuff.
        /* overflow is set in Widget.CSS, setting here breaks scrollable widgets
         */
        position: absolute;
    }

    .flx-split.flx-dragging { /* Fix for odd drag behavior on Chrome */
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    .flx-split.flx-dragging iframe {  /* disable iframe during drag */
        pointer-events: none;
    }

    .flx-split.flx-horizontal > .flx-split-sep,
    .flx-split.flx-horizontal.flx-dragging {
        cursor: ew-resize;
    }
    .flx-split.flx-vertical > .flx-split-sep,
    .flx-split.flx-vertical.flx-dragging {
        cursor: ns-resize;
    }
    .flx-split-sep {
        z-index: 2;
        position: absolute;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        box-sizing: border-box;
        background: rgba(0, 0, 0, 0); /* transparent */
        /* background: #fff;  /* hide underlying widgets */
    }
    












</style>


<style id='flexx.ui.widgets._button.css'>
/* ====================== flexx.ui.widgets._button ======================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */





    .flx-BaseButton {
        white-space: nowrap;
        padding: 0.2em 0.4em;
        border-radius: 3px;
        color: #333;
    }
    .flx-BaseButton, .flx-BaseButton > input {
        margin: 2px; /* room for outline */
    }
    .flx-BaseButton:focus, .flx-BaseButton > input:focus  {
        outline: none;
        box-shadow: 0px 0px 3px 1px rgba(0, 100, 200, 0.7);
    }

    .flx-Button, .flx-ToggleButton{
        background: #e8e8e8;
        border: 1px solid #ccc;
        transition: background 0.3s;
    }
    .flx-Button:hover, .flx-ToggleButton:hover {
        background: #e8eaff;
    }

    .flx-ToggleButton {
        text-align: left;
    }
    .flx-ToggleButton.flx-checked {
        background: #e8eaff;
    }
    .flx-ToggleButton::before {
        content: '\2610\00a0 ';
    }
    .flx-ToggleButton.flx-checked::before {
        content: '\2611\00a0 ';
    }

    .flx-RadioButton > input, .flx-CheckBox > input{
        margin-left: 0.3em;
        margin-right: 0.3em;
    }

    .flx-RadioButton > input, .flx-CheckBox > input {
        color: #333;
    }
    .flx-RadioButton:hover > input, .flx-CheckBox:hover > input {
        color: #036;
    }
    








</style>





<script id='flexx-core.js'>
/* Bundle contents:
- asset flexx-loader.js
- asset bsdf.js
- asset bb64.js
- asset pscript-std.js
- asset flexx.event.js
- module flexx.app._clientcore
- module flexx.app._component2
*/


/* ========================== flexx-loader.js ===========================*/

/*Flexx module loader. Licensed by BSD-2-clause.*/

(function(){

if (typeof window === 'undefined' && typeof module == 'object') {
    throw Error('flexx.app does not run on NodeJS!');
}
if (typeof flexx == 'undefined') {
    window.flexx = {};
}

var modules = {};
function define (name, deps, factory) {
    if (arguments.length == 1) {
        factory = name;
        deps = [];
        name = null;
    }
    if (arguments.length == 2) {
        factory = deps;
        deps = name;
        name = null;
    }
    // Get dependencies - in current implementation, these must be loaded
    var dep_vals = [];
    for (var i=0; i<deps.length; i++) {
        if (modules[deps[i]] === undefined) {
            throw Error('Unknown dependency: ' + deps[i]);
        }
        dep_vals.push(modules[deps[i]]);
    }
    // Load the module and store it if is not anonymous
    var mod = factory.apply(null, dep_vals);
    if (name) {
        modules[name] = mod;
    }
}
define.amd = true;
define.flexx = true;

function require (name) {
    if (name.slice(0, 9) == 'phosphor/') {
        if (window.jupyter && window.jupyter.lab && window.jupyter.lab.loader) {
            var path = 'phosphor@*/' + name.slice(9);
            if (!path.slice(-3) == '.js') { path = path + '.js'; }
            return window.jupyter.lab.loader.require(path);
        } else {
            return window.require_phosphor(name);  // provided by our Phosphor-all
        }
    }
    if (modules[name] === undefined) {
        throw Error('Unknown module: ' + name);
    }
    return modules[name];
}

// Expose this
window.flexx.define = define;
window.flexx.require = require;
window.flexx._modules = modules;

})();


/* ============================== bsdf.js ===============================*/

flexx.define("bsdf", [], (function () {
"use strict";

var VERSION;
VERSION = [2, 1, 0];

// http://github.com/msgpack/msgpack-javascript/blob/master/msgpack.js#L181-L192
function utf8encode(mix) {
    // Mix is assumed to be a string. returns an Array of ints.
    var iz = mix.length;
    var rv = [];
    for (var i = 0; i < iz; ++i) {
        var c = mix.charCodeAt(i);
        if (c < 0x80) { // ASCII(0x00 ~ 0x7f)
            rv.push(c & 0x7f);
        } else if (c < 0x0800) {
            rv.push(((c >>>  6) & 0x1f) | 0xc0, (c & 0x3f) | 0x80);
        } else if (c < 0x10000) {
            rv.push(((c >>> 12) & 0x0f) | 0xe0,
                    ((c >>>  6) & 0x3f) | 0x80, (c & 0x3f) | 0x80);
        }
    }
    return rv;
}

// http://github.com/msgpack/msgpack-javascript/blob/master/msgpack.js#L365-L375
function utf8decode(buf) {
    // The buf is assumed to be an Array or Uint8Array. Returns a string.
    var iz = buf.length - 1;
    var ary = [];
    for (var i = -1; i < iz; ) {
        var c = buf[++i]; // lead byte
        ary.push(c < 0x80 ? c : // ASCII(0x00 ~ 0x7f)
                 c < 0xe0 ? ((c & 0x1f) <<  6 | (buf[++i] & 0x3f)) :
                            ((c & 0x0f) << 12 | (buf[++i] & 0x3f) << 6
                                              | (buf[++i] & 0x3f)));
    }
    return String.fromCharCode.apply(null, ary);
}


// ================== API

function bsdf_encode(d, extensions) {
    var s = new BsdfSerializer(extensions);
    return s.encode(d);
}

function bsdf_decode(buf, extensions) {
    var s = new BsdfSerializer(extensions);
    return s.decode(buf);
}

function BsdfSerializer(extensions) {
    /* A placeholder for a BSDF serializer with associated extensions.
     * Other formats also use it to associate options, but we don't have any.
     */
    this.extensions = [];
    if (extensions === undefined) { extensions = standard_extensions; }
    if (!Array.isArray(extensions)) { throw "Extensions must be an array."; }
    for (var i=0; i<extensions.length; i++) {
        this.add_extension(extensions[i]);
    }
}

BsdfSerializer.prototype.add_extension = function (e) {
    // We use an array also as a dict for quick lookup
    if (this.extensions[e.name] !== undefined) {
        // Overwrite existing
        for (var i=0; i<this.extensions.length; i++) {
            if (this.extensions[i].name == e.name) { this.extensions[i] = e; break; }
        }
    } else {
        // Append
        this.extensions.push(e);
        this.extensions[e.name] = e;
    }
};

BsdfSerializer.prototype.remove_extension = function (e) {
    delete this.extensions[e.name];
    for (var i=0; i<this.extensions.length; i++) {
        if (this.extensions[i].name == name) { this.extensions.splice(i, 1); break; }
    }
};

BsdfSerializer.prototype.encode = function (d) {
    // Write head and version
    var f = ByteBuilder();
    f.push_char('B'); f.push_char('S'); f.push_char('D'); f.push_char('F');
    f.push_uint8(VERSION[0]); f.push_uint8(VERSION[1]);
    // Encode and return result
    this.encode_object(f, d);
    return f.get_result();
};

BsdfSerializer.prototype.decode = function (buf, extensions) {
    // Read and check head
    var f = BytesReader(buf);
    var head = f.get_char() + f.get_char() + f.get_char() + f.get_char();
    if (head != 'BSDF') {
        throw "This does not look like BSDF encoded data: " + head;
    }
    // Read and check version
    var major_version = f.get_uint8();
    var minor_version = f.get_uint8();
    if (major_version != VERSION[0]) {
        throw ('Reading file with different major version ' + major_version + ' from the implementation ' + VERSION[0]);
    } else if (minor_version > VERSION[1]){
        console.warn('BSDF warning: reading file with higher minor version ' + minor_version + ' than the implementation ' + VERSION[1]);
    }
    // Decode
    return this.decode_object(f);
};


//---- encoder

function ByteBuilder() {
    // We use an arraybuffer for efficiency, but we don't know its final size.
    // Therefore we create a new one with increasing size when needed.
    var buffers = [];
    var min_buf_size = 1024;

    var buf8 = new Uint8Array(min_buf_size);
    var bufdv = new DataView(buf8.buffer);

    var pos = 0;
    var pos_offset = 0;
    var pos_max = buf8.byteLength;  // max valid value of pos

    // Create text encoder / decoder
    var text_encode, text_decode;
    if (typeof TextEncoder !== 'undefined') {
        var x = new TextEncoder('utf-8');
        text_encode = x.encode.bind(x);
    } else {
        // test this
        text_encode = utf8encode;
    }

    function get_result() {
        // Combine all sub buffers into one contiguous buffer
        var total = new Uint8Array(pos_offset + pos);
        var i = 0, j;
        for (var index=0; index<buffers.length; index+=2) {
            var sub = buffers[index];
            var n = buffers[index + 1];
            var offset = i;
            for(j=0; j<n; j++, i++){ total[i] = sub[j]; }
        }
        for(j=0; j<pos; j++, i++){ total[i] = buf8[j]; }  // also current buffer
        return total.buffer; // total is an exact fit on its buffer
    }
    function new_buffer(n) {
        // Establish size
        var new_size = Math.max(n + 64 , min_buf_size);
        // Store current buffer
        buffers.push(buf8);
        buffers.push(pos);
        // Create new
        buf8 = new Uint8Array(new_size);
        bufdv = new DataView(buf8.buffer);
        // Set positions
        pos_offset += pos;
        pos_max = buf8.byteLength;
        pos = 0;
    }
    function tell() {
        return pos_offset + pos;
    }
    function push_bytes(s) {  // we use Uint8Array internally for this
        var n = s.byteLength;
        if (pos + n > pos_max) { new_buffer(n); }
        for (var i=0; i<n; i++) { buf8[pos+i] = s[i]; }
        pos += n;
    }
    function push_char(s) {
        if (pos + 1 > pos_max) { new_buffer(1); }
        buf8[pos] = s.charCodeAt();
        pos += 1;
    }
    function push_str(s) {
        var bb = text_encode(s);
        push_size(bb.length);
        if (pos + bb.length > pos_max) { new_buffer(bb.length); }
        for (var i=0; i<bb.length; i++) { buf8[pos + i] = bb[i]; }
        pos += bb.length;
    }
    function push_size(s, big) {
        if (s <= 250 && typeof big == 'undefined') {
            if (pos + 1 > pos_max) { new_buffer(1); }
            buf8[pos] = s;
            pos += 1;
        } else {
            if (pos + 9 > pos_max) { new_buffer(9); }
            buf8[pos] = 253;
            bufdv.setUint32(pos+1, (s % 4294967296), true); // uint64
            bufdv.setUint32(pos+5, (s / 4294967296) & 4294967295, true);
            pos += 9;
        }
    }
    function push_uint8(s) {
        if (pos + 1 > pos_max) { new_buffer(1); }
        buf8[pos] = s;
        pos += 1;
    }
    function push_int16(s) {
        if (pos + 2 > pos_max) { new_buffer(2); }
        bufdv.setInt16(pos, s, true);
        pos += 2;
    }
    function push_int64(s) {
        if (pos + 8 > pos_max) { new_buffer(8); }
        var j, a;
        if (s < 0) { // perform two's complement encoding
            for (j=0, a=s+1; j<8; j++, a/=256) { buf8[pos+j] = ((-(a % 256 )) & 255) ^ 255; }
        } else {
            for (j=0, a=s; j<8; j++, a/=256) { buf8[pos+j] = ((a % 256 ) & 255); }
        }
        pos += 8;
    }
    function push_float64(s) {
        // todo: we could push 32bit floats via "f"
        if (pos + 8 > pos_max) { new_buffer(8); }
        bufdv.setFloat64(pos, s, true);
        pos += 8;
    }
    return {get_result: get_result, tell: tell, push_bytes: push_bytes,
            push_char: push_char, push_str: push_str, push_size: push_size,
            push_uint8: push_uint8, push_int16: push_int16, push_int64: push_int64,
            push_float64: push_float64};
}

function encode_type_id(f, c, extension_id) {
    if (typeof extension_id == 'undefined') {
        f.push_char(c);
    } else {
        f.push_char(c.toUpperCase());
        f.push_str(extension_id);
    }
}

BsdfSerializer.prototype.encode_object = function (f, value, extension_id) {
    var iext, ext;

    if (value === null) { encode_type_id(f, 'v', extension_id); }
    //else if (typeof value == 'undefined') { encode_type_id(f, 'v', extension_id); }
    else if (value === false) { encode_type_id(f, 'n', extension_id); }
    else if (value === true) { encode_type_id(f, 'y', extension_id); }
    else if (typeof value == 'number') {
        if ((value ^ 0) == value) { // no Number.isInteger on IE
            if (value >= -32768 && value <= 32767) {
                encode_type_id(f, 'h', extension_id);
                f.push_int16(value);
            } else {
                encode_type_id(f, 'i', extension_id);
                f.push_int64(value);
            }
        } else {
            encode_type_id(f, 'd', extension_id);
            f.push_float64(value);
        }
    } else if (typeof value == 'string') {
        encode_type_id(f, 's', extension_id);
        f.push_str(value);
    } else if (typeof value == 'object') {
        if (Array.isArray(value)) {  // heterogeneous list
            encode_type_id(f, 'l', extension_id);
            var n = value.length;
            f.push_size(n);
            for (var i=0; i<n; i++) {
                this.encode_object(f, value[i]);
            }
        } else if (value.constructor === Object) {  // mapping / dict
            encode_type_id(f, 'm', extension_id);
            var nm = Object.keys(value).length;
            f.push_size(nm);
            for (var key in value) {
                f.push_str(key);
                this.encode_object(f, value[key]);
            }
        } else if (value instanceof ArrayBuffer || value instanceof DataView) {  // bytes
            if (value instanceof ArrayBuffer) { value = new DataView(value); }
            encode_type_id(f, 'b', extension_id);
            var compression = 0;
            var compressed = new Uint8Array(value.buffer, value.byteOffset, value.byteLength);  // map to uint8
            var data_size = value.byteLength;
            var used_size = data_size;
            var extra_size = 0;
            var allocated_size = used_size + extra_size;
            // Write sizes - write at least in a size that allows resizing
            if (allocated_size > 250) {  // && compression == 0
                f.push_size(allocated_size, true);
                f.push_size(used_size, true);
                f.push_size(data_size, true);
            } else {
                f.push_size(allocated_size);
                f.push_size(used_size);
                f.push_size(data_size);
            }
            // Compression and checksum
            f.push_uint8(0);
            f.push_uint8(0);  // no checksum
            // Byte alignment
            if (compression == 0) {
                var alignment = 8 - (f.tell() + 1) % 8;  // +1 for the byte to write
                f.push_uint8(alignment);
                for (var j=0; j<alignment; j++) { f.push_uint8(0); }
            } else {
                f.push_uint8(0);  // zero alignment
            }
            // The actual data and extra space
            f.push_bytes(compressed);
            f.push_bytes(new Uint8Array(allocated_size - used_size));
        } else {
            // Try extensions (for objects)
            for (iext=0; iext<this.extensions.length; iext++) {
                ext = this.extensions[iext];
                if (ext.match(this, value)) {
                    this.encode_object(f, ext.encode(this, value), ext.name);
                    return;
                }
            }
            var cls = Object.getPrototypeOf(value);
            var cname = cls.__name__ || cls.constructor.name;  // __name__ is a PyScript thing
            throw "cannot encode object of type " + cname;
        }
    } else {
        if (typeof extension_id != 'undefined') {
            throw ('Extension ' + extension_id + ' wronfully encodes object to another ' +
                   'extension object (though it may encode to a list/dict ' +
                   'that contains other extension objects).');
        }
        // Try extensions (for other types)
        for (iext=0; iext<this.extensions.length; iext++) {
            ext = this.extensions[iext];
            if (ext.match(this, value)) {
                this.encode_object(f, ext.encode(this, value), ext.name);
                return;
            }
        }
        throw "cannot encode type " + typeof(value);
    }
};

//---- decoder

function BytesReader(buf) {

    // Buffer can be ArrayBuffer, DataView or Uint8Array, or Nodejs Buffer, we map to DataView
    var bufdv;

    if (typeof buf.byteLength == 'undefined') {
        throw "BSDF decorer needs something that looks like bytes";
    }
    if (typeof buf.byteOffset == 'undefined') {
        bufdv = new DataView(buf);  // buf was probably an ArrayBuffer
    } else {
        bufdv = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);  // remap to something we know
    }

    var startpos = bufdv.byteOffset;
    var pos = 0;
    var buf8 = new Uint8Array(bufdv.buffer, bufdv.byteOffset, bufdv.byteLength);

    // Create text encoder / decoder
    var text_encode, text_decode;
    if (typeof TextDecoder !== 'undefined') {
        var x = new TextDecoder('utf-8');
        text_decode = x.decode.bind(x);
    } else {
        // test this
        text_decode = utf8decode;
    }

    function tell() {
        return pos;
    }
    function get_char() {
        return String.fromCharCode(buf8[pos++]);
    }
    function get_size() {
        var s = buf8[pos++];
        if (s >= 253) {
            if (s == 253) {
                s = bufdv.getUint32(pos, true) + bufdv.getUint32(pos+4, true) * 4294967296;
            } else if (s == 254) { // closed stream
                s = bufdv.getUint32(pos, true) + bufdv.getUint32(pos+4, true) * 4294967296;
            } else if (s == 255) {  // unclosed stream
                s = -1;
            } else {
                throw "Invalid size";
            }
            pos += 8;
        }
        return s;
    }
    function get_bytes(n) {  // we use Uint8Array internally for this
        var s = new Uint8Array(buf8.buffer, buf8.byteOffset + pos, n);
        pos += n;
        return s;
    }
    function get_str() {
        var n = get_size();
        var bb = new Uint8Array(buf8.buffer, buf8.byteOffset + pos, n);
        pos += n;
        return text_decode(bb);
    }
    function get_uint8() {
        return buf8[pos++];
    }
    function get_int16() {
        var s = bufdv.getInt16(pos, true);
        pos += 2;
        return s;
    }
    function get_int64() {
        var isneg = (buf8[pos+7] & 0x80) > 0;
        var s, j, m;
        if (isneg) {
            s = -1;
            for (j=0, m=1; j<8; j++, m*=256) { s -= (buf8[pos+j] ^ 0xff) * m; }
        } else {
            s = 0;
            for (j=0, m=1; j<8; j++, m*=256) { s += buf8[pos+j] * m; }
        }
        pos += 8;
        return s;
    }
    function get_float32() {
        var s = bufdv.getFloat32(pos, true);
        pos += 4;
        return s;
    } function get_float64() {
        var s = bufdv.getFloat64(pos, true);
        pos += 8;
        return s;
    }

    return {tell: tell, get_size:get_size, get_bytes: get_bytes,
            get_uint8: get_uint8, get_int16: get_int16, get_int64: get_int64,
            get_float32: get_float32, get_float64: get_float64, get_char: get_char, get_str: get_str};

}

BsdfSerializer.prototype.decode_object = function (f) {

    var char = f.get_char();
    var c = char.toLowerCase();
    var value;
    var extension_id = null;

    if (char == '\x00') {  // because String.fromCharCode(undefined) produces ASCII 0.
        throw new EOFError('End of BSDF data reached.');
    }

    // Conversion (uppercase value identifiers signify converted values)
    if (char != c) {
        extension_id = f.get_str();
    }

    if (c == 'v') {
        value = null;
    } else if (c == 'n') {
        value = false;
    } else if (c == 'y') {
        value = true;
    } else if (c == 'h') {
        value = f.get_int16();
    } else if (c == 'i') {
        value = f.get_int64();
    } else if (c == 'f') {
        value = f.get_float32();
    } else if (c == 'd') {
        value = f.get_float64();
    } else if (c == 's') {
        value = f.get_str();
    } else if (c == 'l') {
        var n = f.get_size();
        if (n < 0) {
            // Streaming
            value = [];
            try {
                while (true) { value.push(this.decode_object(f)); }
            } catch(err) {
                if (err instanceof EOFError) { /* ok */ } else { throw err; }
            }
        } else {
            // Normal
            value = new Array(n);
            for (var i=0; i<n; i++) {
                value[i] = this.decode_object(f);
            }
        }
    } else if (c == 'm') {
        var nm = f.get_size();
        value = {};
        for (var j=0; j<nm; j++) {
            var key = f.get_str();
            value[key] = this.decode_object(f);
        }
    } else if (c == 'b') {
        // Get sizes
        var allocated_size = f.get_size();
        var used_size = f.get_size();
        var data_size = f.get_size();
        // Compression and checksum
        var compression = f.get_uint8();
        var has_checksum = f.get_uint8();
        if (has_checksum) {
            var checksum = f.get_bytes(16);
        }
        // Skip alignment
        var alignment = f.get_uint8();
        f.get_bytes(alignment);
        // Get data (as ArrayBuffer)
        var compressed = f.get_bytes(used_size);  // uint8
        f.get_bytes(allocated_size - used_size);  // skip extra space
        if (compression == 0) {
            value = new DataView(compressed.buffer, compressed.byteOffset, compressed.byteLength);
        } else {
            throw "JS implementation of BSDF does not support compression (" + compression + ')';
        }
    } else {
        throw "Invalid value specifier at pos " + f.tell() + ": " + JSON.stringify(char);
    }

    // Convert using an extension?
    if (extension_id !== null) {
        var ext = this.extensions[extension_id];
        if (ext) {
            value = ext.decode(this, value);
        } else {
            console.warn('BSDF warning: no known extension for "' + extension_id + '", value passes in raw form.');
        }
    }
    return value;
};


// To be able to support complex numbers
function Complex(real, imag) {
    this.real = real;
    this.imag = imag;
}

function EOFError(msg) {
    this.msg = msg;
}


// ================== Standard extensions

var rootns;
if (typeof window == 'undefined') { rootns = global; } else { rootns = window; }

var complex_extension = {
    name: 'c',
    match: function(s, v) { return v instanceof Complex; },
    encode: function(s, v) { return [v.real, v.imag]; },
    decode: function(s, v) { return new Complex(v[0], v[1]); }
};

var ndarray_extension = {
    name: 'ndarray',
    match: function(s, v) {
        return v.BYTES_PER_ELEMENT !== undefined && v.constructor.name.slice(-5) == 'Array';
    },
    encode: function(s, v) {
        return {shape: v.shape || [v.length],
                dtype: v.constructor.name.slice(0, -5).toLowerCase(),
                data: new DataView(v.buffer, v.byteOffset, v.byteLength)};
    },
    decode: function(s, v) {
        var cls = rootns[v.dtype[0].toUpperCase() + v.dtype.slice(1) + 'Array'];
        var value = new cls(v.data.buffer, v.data.byteOffset, v.data.byteLength / cls.BYTES_PER_ELEMENT);
        value.shape = v.shape;
        return value;
    }
};

var standard_extensions = [complex_extension, ndarray_extension];

// ================== the UMD module suffix
return {encode: bsdf_encode, decode: bsdf_decode, BsdfSerializer: BsdfSerializer, standard_extensions: standard_extensions};
}));


/* ============================== bb64.js ===============================*/

flexx.define("bb64", [], (function () {
"use strict";

function base64encode(b, last_two) {
    "use strict";
    console.assert(b.BYTES_PER_ELEMENT == 1);
    // Most Base64 encoders use +/ for the last two characters, but not all
    if (last_two === undefined) last_two = '+/';
    // Init charcodes array
    var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789" + last_two;
    var charcodes = new Uint8Array(64);
    for (var k=0; k<64; k++) charcodes[k] = chars.charCodeAt(k);
    // Init result string, as a typed array of ASCII values
    var s = new Uint8Array(Math.ceil(b.length / 3) * 4);
    // Init
    var b1, b2, b3;
    var i = 0;  // The byte index
    var j = 0;  // The string index
    // Iterate over bytes
    while (i < b.length) {
        // Sample bytes, out of bounds are mapped to zero
        b1 = b[i+0] || 0; b2 = b[i+1] || 0; b3 = b[i+2] || 0;
        i += 3;
        // Encode and assign
        s[j+0] = charcodes[( b1 >> 2 ) & 0x3F];
        s[j+1] = charcodes[( ( b1 & 0x3 ) << 4 ) | ( ( b2 >> 4 ) & 0xF )];
        s[j+2] = charcodes[( ( b2 & 0xF ) << 2 ) | ( ( b3 >> 6 ) & 0x3 )];
        s[j+3] = charcodes[b3 & 0x3F];
        j += 4;
    }
    // Replace stub bytes with the padding char
    for (var k=0; k<(i-b.length); k++) s[s.length-k-1] = '61';
    // Convert to string
    return String.fromCharCode.apply(null, s);
}

function base64decode(s, last_two) {
    "use strict";
    // Most Base64 encoders use +/ for the last two characters, but not all
    if (last_two === undefined) last_two = '+/';
    var charcode62 = last_two.charCodeAt(0), charcode63 = last_two.charCodeAt(1);
    // Allocate byte array, with a length as large as it can possibly become
    var b = new Uint8Array(Math.floor((s.length / 4) * 3));
    // Init
    var i = 0; // The number of bytes (and byte index)
    var j = 0; // The index into the string
    var c, cc = new Array(4);  // to store character codes (ints)
    // Iterate while there are chars left
    while (j < s.length) {
        // Collect 4 (or less) characters
        var charcount = 0;
        while (charcount < 4 && j < s.length) {
            c = s.charCodeAt(j++);
            if (c >= 65 && c <=90) c -= 65;  // A-Z: 0-25
            else if (c >=97 && c<=122) c -= 71;  // a-z: 26-51
            else if (c >=48 && c<=57) c += 4;  // 0-9: 52-61
            else if (c == charcode62) c = 62;
            else if (c == charcode63) c = 63;
            else continue;  // skip other chars, like newline, padding, or other
            cc[charcount] = c;
            charcount += 1;
        }
        // At the end, we may not have enough chars, zero these values
        if (charcount != 4) for (var k=charcount; k<4; k++) cc[k] = 0;
        // Calculate the 3 byte values
        b[i+0] = (cc[0] << 2) | (cc[1] >> 4);
        b[i+1] = ((cc[1] & 15) << 4) | (cc[2] >> 2);
        b[i+2] = ((cc[2] & 3) << 6) | cc[3];
        // Next i (4 chars -> 3 bytes, 3 chars -> 2 bytes, 2 chars -> 1 byte)
        i += charcount - 1;
    }
    // Return view that has the correct length, but on same data buffer.
    // The unused memory should be marginal, so making a copy not worth it.
    return new Uint8Array(b.buffer, 0, i);
}

return {encode: base64encode, decode: base64decode};
}));


/* =========================== pscript-std.js ===========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */

flexx.define("pscript-std.js", [], function () {

"use strict";

var _pyfunc_abs = Math.abs;
var _pyfunc_all = function (x) { // nargs: 1
    for (var i=0; i<x.length; i++) {
        if (!_pyfunc_truthy(x[i])){return false;}
    } return true;
};
var _pyfunc_any = function (x) { // nargs: 1
    for (var i=0; i<x.length; i++) {
        if (_pyfunc_truthy(x[i])){return true;}
    } return false;
};
var _pyfunc_bool = function (x) { // nargs: 1
    return Boolean(_pyfunc_truthy(x));
};
var _pyfunc_create_dict = function () {
    var d = {};
    for (var i=0; i<arguments.length; i+=2) { d[arguments[i]] = arguments[i+1]; }
    return d;
};
var _pyfunc_delattr = function (ob, name) {  // nargs: 2
    delete ob[name];
};
var _pyfunc_dict = function (x) {
    var t, i, keys, r={};
    if (Array.isArray(x)) {
        for (i=0; i<x.length; i++) {
            t=x[i]; r[t[0]] = t[1];
        }
    } else {
        keys = Object.keys(x);
        for (i=0; i<keys.length; i++) {
            t=keys[i]; r[t] = x[t];
        }
    }
    return r;
};
var _pyfunc_divmod = function (x, y) { // nargs: 2
    var m = x % y; return [(x-m)/y, m];
};
var _pyfunc_enumerate = function (iter) { // nargs: 1
    var i, res=[];
    if ((typeof iter==="object") && (!Array.isArray(iter))) {iter = Object.keys(iter);}
    for (i=0; i<iter.length; i++) {res.push([i, iter[i]]);}
    return res;
};
var _pyfunc_filter = function (func, iter) { // nargs: 2
    if (typeof func === "undefined" || func === null) {func = function(x) {return x;}}
    if ((typeof iter==="object") && (!Array.isArray(iter))) {iter = Object.keys(iter);}
    return iter.filter(func);
};
var _pyfunc_float = Number;
var _pyfunc_format = function (v, fmt) {  // nargs: 2
    fmt = fmt.toLowerCase();
    var s = String(v);
    if (fmt.indexOf('!r') >= 0) {
        try { s = JSON.stringify(v); } catch (e) { s = undefined; }
        if (typeof s === 'undefined') { s = v._IS_COMPONENT ? v.id : String(v); }
    }
    var fmt_type = '';
    if (fmt.slice(-1) == 'i' || fmt.slice(-1) == 'f' ||
        fmt.slice(-1) == 'e' || fmt.slice(-1) == 'g') {
            fmt_type = fmt[fmt.length-1]; fmt = fmt.slice(0, fmt.length-1);
    }
    var i0 = fmt.indexOf(':');
    var i1 = fmt.indexOf('.');
    var spec1 = '', spec2 = '';  // before and after dot
    if (i0 >= 0) {
        if (i1 > i0) { spec1 = fmt.slice(i0+1, i1); spec2 = fmt.slice(i1+1); }
        else { spec1 = fmt.slice(i0+1); }
    }
    // Format numbers
    if (fmt_type == '') {
    } else if (fmt_type == 'i') { // integer formatting, for %i
        s = parseInt(v).toFixed(0);
    } else if (fmt_type == 'f') {  // float formatting
        v = parseFloat(v);
        var decimals = spec2 ? Number(spec2) : 6;
        s = v.toFixed(decimals);
    } else if (fmt_type == 'e') {  // exp formatting
        v = parseFloat(v);
        var precision = (spec2 ? Number(spec2) : 6) || 1;
        s = v.toExponential(precision);
    } else if (fmt_type == 'g') {  // "general" formatting
        v = parseFloat(v);
        var precision = (spec2 ? Number(spec2) : 6) || 1;
        // Exp or decimal?
        s = v.toExponential(precision-1);
        var s1 = s.slice(0, s.indexOf('e')), s2 = s.slice(s.indexOf('e'));
        if (s2.length == 3) { s2 = 'e' + s2[1] + '0' + s2[2]; }
        var exp = Number(s2.slice(1));
        if (exp >= -4 && exp < precision) { s1=v.toPrecision(precision); s2=''; }
        // Skip trailing zeros and dot
        var j = s1.length-1;
        while (j>0 && s1[j] == '0') { j-=1; }
        s1 = s1.slice(0, j+1);
        if (s1.slice(-1) == '.') { s1 = s1.slice(0, s1.length-1); }
        s = s1 + s2;
    }
    // prefix/padding
    var prefix = '';
    if (spec1) {
        if (spec1[0] == '+' && v > 0) { prefix = '+'; spec1 = spec1.slice(1); }
        else if (spec1[0] == ' ' && v > 0) { prefix = ' '; spec1 = spec1.slice(1); }
    }
    if (spec1 && spec1[0] == '0') {
        var padding = Number(spec1.slice(1)) - (s.length + prefix.length);
        s = '0'.repeat(Math.max(0, padding)) + s;
    }
    return prefix + s;
};
var _pyfunc_getattr = function (ob, name, deflt) { // nargs: 2 3
    var has_attr = ob !== undefined && ob !== null && ob[name] !== undefined;
    if (has_attr) {return ob[name];}
    else if (arguments.length == 3) {return deflt;}
    else {var e = Error(name); e.name='AttributeError'; throw e;}
};
var _pyfunc_hasattr = function (ob, name) { // nargs: 2
    return (ob !== undefined) && (ob !== null) && (ob[name] !== undefined);
};
var _pyfunc_int = function (x) { // nargs: 1
    return x<0 ? Math.ceil(x): Math.floor(x);
};
var _pyfunc_list = function (x) {
    var r=[];
    if (typeof x==="object" && !Array.isArray(x)) {x = Object.keys(x)}
    for (var i=0; i<x.length; i++) {
        r.push(x[i]);
    }
    return r;
};
var _pyfunc_map = function (func, iter) { // nargs: 2
    if (typeof func === "undefined" || func === null) {func = function(x) {return x;}}
    if ((typeof iter==="object") && (!Array.isArray(iter))) {iter = Object.keys(iter);}
    return iter.map(func);
};
var _pyfunc_merge_dicts = function () {
    var res = {};
    for (var i=0; i<arguments.length; i++) {
        var d = arguments[i];
        var key, keys = Object.keys(d);
        for (var j=0; j<keys.length; j++) { key = keys[j]; res[key] = d[key]; }
    }
    return res;
};
var _pyfunc_op_add = function (a, b) { // nargs: 2
    if (Array.isArray(a) && Array.isArray(b)) {
        return a.concat(b);
    } return a + b;
};
var _pyfunc_op_contains = function op_contains (a, b) { // nargs: 2
    if (b == null) {
    } else if (Array.isArray(b)) {
        for (var i=0; i<b.length; i++) {if (_pyfunc_op_equals(a, b[i]))
                                           return true;}
        return false;
    } else if (b.constructor === Object) {
        for (var k in b) {if (a == k) return true;}
        return false;
    } else if (b.constructor == String) {
        return b.indexOf(a) >= 0;
    } var e = Error('Not a container: ' + b); e.name='TypeError'; throw e;
};
var _pyfunc_op_equals = function op_equals (a, b) { // nargs: 2
    if (a == null || b == null) {
    } else if (Array.isArray(a) && Array.isArray(b)) {
        var i = 0, iseq = a.length == b.length;
        while (iseq && i < a.length) {iseq = op_equals(a[i], b[i]); i+=1;}
        return iseq;
    } else if (a.constructor === Object && b.constructor === Object) {
        var akeys = Object.keys(a), bkeys = Object.keys(b);
        akeys.sort(); bkeys.sort();
        var i=0, k, iseq = op_equals(akeys, bkeys);
        while (iseq && i < akeys.length)
            {k=akeys[i]; iseq = op_equals(a[k], b[k]); i+=1;}
        return iseq;
    } return a == b;
};
var _pyfunc_op_error = function (etype, msg) { // nargs: 2
    var e = new Error(etype + ': ' + msg);
    e.name = etype
    return e;
};
var _pyfunc_op_instantiate = function (ob, args) { // nargs: 2
    if ((typeof ob === "undefined") ||
            (typeof window !== "undefined" && window === ob) ||
            (typeof global !== "undefined" && global === ob))
            {throw "Class constructor is called as a function.";}
    for (var name in ob) {
        if (Object[name] === undefined &&
            typeof ob[name] === 'function' && !ob[name].nobind) {
            ob[name] = ob[name].bind(ob);
            ob[name].__name__ = name;
        }
    }
    if (ob.__init__) {
        ob.__init__.apply(ob, args);
    }
};
var _pyfunc_op_mult = function (a, b) { // nargs: 2
    if ((typeof a === 'number') + (typeof b === 'number') === 1) {
        if (a.constructor === String) return _pymeth_repeat.call(a, b);
        if (b.constructor === String) return _pymeth_repeat.call(b, a);
        if (Array.isArray(b)) {var t=a; a=b; b=t;}
        if (Array.isArray(a)) {
            var res = []; for (var i=0; i<b; i++) res = res.concat(a);
            return res;
        }
    } return a * b;
};
var _pyfunc_op_parse_kwargs = function (arg_names, arg_values, kwargs, strict) { // nargs: 3
    for (var i=0; i<arg_values.length; i++) {
        var name = arg_names[i];
        if (kwargs[name] !== undefined) {
            arg_values[i] = kwargs[name];
            delete kwargs[name];
        }
    }
    if (strict && Object.keys(kwargs).length > 0) {
        throw _pyfunc_op_error('TypeError',
            'Function ' + strict + ' does not accept **kwargs.');
    }
    return kwargs;
};
var _pyfunc_perf_counter = function() { // nargs: 0
    if (typeof(process) === "undefined"){return performance.now()*1e-3;}
    else {var t = process.hrtime(); return t[0] + t[1]*1e-9;}
};
var _pyfunc_pow = Math.pow;
var _pyfunc_range = function (start, end, step) {
    var i, res = [];
    var val = start;
    var n = (end - start) / step;
    for (i=0; i<n; i++) {
        res.push(val);
        val += step;
    }
    return res;
};
var _pyfunc_repr = function (x) { // nargs: 1
    var res; try { res = JSON.stringify(x); } catch (e) { res = undefined; }
    if (typeof res === 'undefined') { res = x._IS_COMPONENT ? x.id : String(x); }
    return res;
};
var _pyfunc_reversed = function (iter) { // nargs: 1
    if ((typeof iter==="object") && (!Array.isArray(iter))) {iter = Object.keys(iter);}
    return iter.slice().reverse();
};
var _pyfunc_round = Math.round;
var _pyfunc_setattr = function (ob, name, value) {  // nargs: 3
    ob[name] = value;
};
var _pyfunc_sorted = function (iter, key, reverse) { // nargs: 1 2 3
    if ((typeof iter==="object") && (!Array.isArray(iter))) {iter = Object.keys(iter);}
    var comp = function (a, b) {a = key(a); b = key(b);
        if (a<b) {return -1;} if (a>b) {return 1;} return 0;};
    comp = Boolean(key) ? comp : undefined; 
    iter = iter.slice().sort(comp);
    if (reverse) iter.reverse();
    return iter;
};
var _pyfunc_str = String;
var _pyfunc_sum = function (x) {  // nargs: 1
    return x.reduce(function(a, b) {return a + b;});
};
var _pyfunc_time = function () {return Date.now() / 1000;};
var _pyfunc_truthy = function (v) {
    if (v === null || typeof v !== "object") {return v;}
    else if (v.length !== undefined) {return v.length ? v : false;}
    else if (v.byteLength !== undefined) {return v.byteLength ? v : false;}
    else if (v.constructor !== Object) {return true;}
    else {return Object.getOwnPropertyNames(v).length ? v : false;}
};
var _pyfunc_zip = function () { // nargs: 2 3 4 5 6 7 8 9
    var i, j, tup, arg, args = [], res = [], len = 1e20;
    for (i=0; i<arguments.length; i++) {
        arg = arguments[i];
        if ((typeof arg==="object") && (!Array.isArray(arg))) {arg = Object.keys(arg);}
        args.push(arg);
        len = Math.min(len, arg.length);
    }
    for (j=0; j<len; j++) {
        tup = []
        for (i=0; i<args.length; i++) {tup.push(args[i][j]);}
        res.push(tup);
    }
    return res;
};
var _pymeth_append = function (x) { // nargs: 1
    if (!Array.isArray(this)) return this.append.apply(this, arguments);
    this.push(x);
};
var _pymeth_capitalize = function () { // nargs: 0
    if (this.constructor !== String) return this.capitalize.apply(this, arguments);
    return this.slice(0, 1).toUpperCase() + this.slice(1).toLowerCase();
};
var _pymeth_casefold = function () { // nargs: 0
    if (this.constructor !== String) return this.casefold.apply(this, arguments);
    return this.toLowerCase();
};
var _pymeth_center = function (w, fill) { // nargs: 1 2
    if (this.constructor !== String) return this.center.apply(this, arguments);
    fill = (fill === undefined) ? ' ' : fill;
    var tofill = Math.max(0, w - this.length);
    var left = Math.ceil(tofill / 2);
    var right = tofill - left;
    return _pymeth_repeat.call(fill, left) + this + _pymeth_repeat.call(fill, right);
};
var _pymeth_clear = function () { // nargs: 0
    if (Array.isArray(this)) {
        this.splice(0, this.length);
    } else if (this.constructor === Object) {
        var keys = Object.keys(this);
        for (var i=0; i<keys.length; i++) delete this[keys[i]];
    } else return this.clear.apply(this, arguments);
};
var _pymeth_copy = function () { // nargs: 0
    if (Array.isArray(this)) {
        return this.slice(0);
    } else if (this.constructor === Object) {
        var key, keys = Object.keys(this), res = {};
        for (var i=0; i<keys.length; i++) {key = keys[i]; res[key] = this[key];}
        return res;
    } else return this.copy.apply(this, arguments);
};
var _pymeth_count = function (x, start, stop) { // nargs: 1 2 3
    start = (start === undefined) ? 0 : start;
    stop = (stop === undefined) ? this.length : stop;
    start = Math.max(0, ((start < 0) ? this.length + start : start));
    stop = Math.min(this.length, ((stop < 0) ? this.length + stop : stop));
    if (Array.isArray(this)) {
        var count = 0;
        for (var i=0; i<this.length; i++) { 
            if (_pyfunc_op_equals(this[i], x)) {count+=1;}
        } return count;
    } else if (this.constructor == String) {
        var count = 0, i = start;
        while (i >= 0 && i < stop) {
            i = this.indexOf(x, i);
            if (i < 0) break; 
            count += 1;
            i += Math.max(1, x.length);
        } return count;
    } else return this.count.apply(this, arguments);
};
var _pymeth_endswith = function (x) { // nargs: 1
    if (this.constructor !== String) return this.endswith.apply(this, arguments);
    return this.lastIndexOf(x) == this.length - x.length;
};
var _pymeth_expandtabs = function (tabsize) { // nargs: 0 1
    if (this.constructor !== String) return this.expandtabs.apply(this, arguments);
    tabsize = (tabsize === undefined) ? 8 : tabsize;
    return this.replace(/\t/g, _pymeth_repeat.call(' ', tabsize));
};
var _pymeth_extend = function (x) { // nargs: 1
    if (!Array.isArray(this)) return this.extend.apply(this, arguments);
    this.push.apply(this, x);   
};
var _pymeth_find = function (x, start, stop) { // nargs: 1 2 3
    if (this.constructor !== String) return this.find.apply(this, arguments);
    start = (start === undefined) ? 0 : start;
    stop = (stop === undefined) ? this.length : stop;
    start = Math.max(0, ((start < 0) ? this.length + start : start));
    stop = Math.min(this.length, ((stop < 0) ? this.length + stop : stop));
    var i = this.slice(start, stop).indexOf(x);
    if (i >= 0) return i + start;
    return -1;
};
var _pymeth_format = function () {
    if (this.constructor !== String) return this.format.apply(this, arguments);
    var parts = [], i = 0, i1, i2;
    var itemnr = -1;
    while (i < this.length) {
        // find opening
        i1 = this.indexOf('{', i);
        if (i1 < 0 || i1 == this.length-1) { break; }
        if (this[i1+1] == '{') {parts.push(this.slice(i, i1+1)); i = i1 + 2; continue;}
        // find closing
        i2 = this.indexOf('}', i1);
        if (i2 < 0) { break; }
        // parse
        itemnr += 1;
        var fmt = this.slice(i1+1, i2);
        var index = fmt.split(':')[0].split('!')[0];
        index = index? Number(index) : itemnr
        var s = _pyfunc_format(arguments[index], fmt);
        parts.push(this.slice(i, i1), s);
        i = i2 + 1;
    }
    parts.push(this.slice(i));
    return parts.join('');
};
var _pymeth_get = function (key, d) { // nargs: 1 2
    if (this.constructor !== Object) return this.get.apply(this, arguments);
    if (this[key] !== undefined) {return this[key];}
    else if (d !== undefined) {return d;}
    else {return null;}
};
var _pymeth_index = function (x, start, stop) { // nargs: 1 2 3
    start = (start === undefined) ? 0 : start;
    stop = (stop === undefined) ? this.length : stop;
    start = Math.max(0, ((start < 0) ? this.length + start : start));
    stop = Math.min(this.length, ((stop < 0) ? this.length + stop : stop));
    if (Array.isArray(this)) {
        for (var i=start; i<stop; i++) {
            if (_pyfunc_op_equals(this[i], x)) {return i;} // indexOf cant
        }
    } else if (this.constructor === String) {
        var i = this.slice(start, stop).indexOf(x);
        if (i >= 0) return i + start;
    } else return this.index.apply(this, arguments);
    var e = Error(x); e.name='ValueError'; throw e;
};
var _pymeth_insert = function (i, x) { // nargs: 2
    if (!Array.isArray(this)) return this.insert.apply(this, arguments);
    i = (i < 0) ? this.length + i : i;
    this.splice(i, 0, x);
};
var _pymeth_isalnum = function () { // nargs: 0
    if (this.constructor !== String) return this.isalnum.apply(this, arguments);
    return Boolean(/^[A-Za-z0-9]+$/.test(this));
};
var _pymeth_isalpha = function () { // nargs: 0
    if (this.constructor !== String) return this.isalpha.apply(this, arguments);
    return Boolean(/^[A-Za-z]+$/.test(this));
};
var _pymeth_isdecimal = function () { // nargs: 0
    if (this.constructor !== String) return this.isdecimal.apply(this, arguments);
    return Boolean(/^[0-9]+$/.test(this));
};
var _pymeth_isdigit = function () { // nargs: 0
    if (this.constructor !== String) return this.isdigit.apply(this, arguments);
    return Boolean(/^[0-9]+$/.test(this));
};
var _pymeth_isidentifier = function () { // nargs: 0
    if (this.constructor !== String) return this.isidentifier.apply(this, arguments);
    return Boolean(/^[A-Za-z_][A-Za-z0-9_]*$/.test(this));
};
var _pymeth_islower = function () { // nargs: 0
    if (this.constructor !== String) return this.islower.apply(this, arguments);
    var low = this.toLowerCase(), high = this.toUpperCase();
    return low != high && low == this;
};
var _pymeth_isnumeric = function () { // nargs: 0
    if (this.constructor !== String) return this.isnumeric.apply(this, arguments);
    return Boolean(/^[0-9]+$/.test(this));
};
var _pymeth_isspace = function () { // nargs: 0
    if (this.constructor !== String) return this.isspace.apply(this, arguments);
    return Boolean(/^\s+$/.test(this));
};
var _pymeth_istitle = function () { // nargs: 0
    if (this.constructor !== String) return this.istitle.apply(this, arguments);
    var low = this.toLowerCase(), title = _pymeth_title.call(this);
    return low != title && title == this;
};
var _pymeth_isupper = function () { // nargs: 0
    if (this.constructor !== String) return this.isupper.apply(this, arguments);
    var low = this.toLowerCase(), high = this.toUpperCase();
    return low != high && high == this;
};
var _pymeth_items = function () { // nargs: 0
    if (this.constructor !== Object) return this.items.apply(this, arguments);
    var key, keys = Object.keys(this), res = []
    for (var i=0; i<keys.length; i++) {key = keys[i]; res.push([key, this[key]]);}
    return res;
};
var _pymeth_join = function (x) { // nargs: 1
    if (this.constructor !== String) return this.join.apply(this, arguments);
    return x.join(this);  // call join on the list instead of the string.   
};
var _pymeth_keys = function () { // nargs: 0
    if (typeof this['keys'] === 'function') return this.keys.apply(this, arguments);
    return Object.keys(this);
};
var _pymeth_ljust = function (w, fill) { // nargs: 1 2
    if (this.constructor !== String) return this.ljust.apply(this, arguments);
    fill = (fill === undefined) ? ' ' : fill;
    var tofill = Math.max(0, w - this.length);
    return this + _pymeth_repeat.call(fill, tofill);
};
var _pymeth_lower = function () { // nargs: 0
    if (this.constructor !== String) return this.lower.apply(this, arguments);
    return this.toLowerCase();
};
var _pymeth_lstrip = function (chars) { // nargs: 0 1
    if (this.constructor !== String) return this.lstrip.apply(this, arguments);
    chars = (chars === undefined) ? ' \t\r\n' : chars;
    for (var i=0; i<this.length; i++) {
        if (chars.indexOf(this[i]) < 0) return this.slice(i);
    } return '';
};
var _pymeth_partition = function (sep) { // nargs: 1
    if (this.constructor !== String) return this.partition.apply(this, arguments);
    if (sep === '') {var e = Error('empty sep'); e.name='ValueError'; throw e;}
    var i1 = this.indexOf(sep);
    if (i1 < 0) return [this.slice(0), '', '']
    var i2 = i1 + sep.length;
    return [this.slice(0, i1), this.slice(i1, i2), this.slice(i2)]; 
};
var _pymeth_pop = function (i, d) { // nargs: 1 2
    if (Array.isArray(this)) {
        i = (i === undefined) ? -1 : i;
        i = (i < 0) ? (this.length + i) : i;
        var popped = this.splice(i, 1);
        if (popped.length)  return popped[0];
        var e = Error(i); e.name='IndexError'; throw e;
    } else if (this.constructor === Object) {
        var res = this[i]
        if (res !== undefined) {delete this[i]; return res;}
        else if (d !== undefined) return d;
        var e = Error(i); e.name='KeyError'; throw e;
    } else return this.pop.apply(this, arguments);
};
var _pymeth_popitem = function () { // nargs: 0
    if (this.constructor !== Object) return this.popitem.apply(this, arguments);
    var keys, key, val;
    keys = Object.keys(this);
    if (keys.length == 0) {var e = Error(); e.name='KeyError'; throw e;}
    key = keys[0]; val = this[key]; delete this[key];
    return [key, val];
};
var _pymeth_remove = function (x) { // nargs: 1
    if (!Array.isArray(this)) return this.remove.apply(this, arguments);
    for (var i=0; i<this.length; i++) {
        if (_pyfunc_op_equals(this[i], x)) {this.splice(i, 1); return;}
    }
    var e = Error(x); e.name='ValueError'; throw e;
};
var _pymeth_repeat = function(count) { // nargs: 0
    if (this.repeat) return this.repeat(count);
    if (count < 1) return '';
    var result = '', pattern = this.valueOf();
    while (count > 1) {
        if (count & 1) result += pattern;
        count >>= 1, pattern += pattern;
    }
    return result + pattern;
};
var _pymeth_replace = function (s1, s2, count) {  // nargs: 2 3
    if (this.constructor !== String) return this.replace.apply(this, arguments);
    var i = 0, i2, parts = [];
    count = (count === undefined) ? 1e20 : count;
    while (count > 0) {
        i2 = this.indexOf(s1, i);
        if (i2 >= 0) {
            parts.push(this.slice(i, i2));
            parts.push(s2);
            i = i2 + s1.length;
            count -= 1;
        } else break;
    }
    parts.push(this.slice(i));
    return parts.join('');
};
var _pymeth_reverse = function () { // nargs: 0
    this.reverse();
};
var _pymeth_rfind = function (x, start, stop) { // nargs: 1 2 3
    if (this.constructor !== String) return this.rfind.apply(this, arguments);
    start = (start === undefined) ? 0 : start;
    stop = (stop === undefined) ? this.length : stop;
    start = Math.max(0, ((start < 0) ? this.length + start : start));
    stop = Math.min(this.length, ((stop < 0) ? this.length + stop : stop));
    var i = this.slice(start, stop).lastIndexOf(x);
    if (i >= 0) return i + start;
    return -1;
};
var _pymeth_rindex = function (x, start, stop) {  // nargs: 1 2 3
    if (this.constructor !== String) return this.rindex.apply(this, arguments);
    var i = _pymeth_rfind.call(this, x, start, stop);
    if (i >= 0) return i;
    var e = Error(x); e.name='ValueError'; throw e;
};
var _pymeth_rjust = function (w, fill) { // nargs: 1 2
    if (this.constructor !== String) return this.rjust.apply(this, arguments);
    fill = (fill === undefined) ? ' ' : fill;
    var tofill = Math.max(0, w - this.length);
    return _pymeth_repeat.call(fill, tofill) + this;
};
var _pymeth_rpartition = function (sep) { // nargs: 1
    if (this.constructor !== String) return this.rpartition.apply(this, arguments);
    if (sep === '') {var e = Error('empty sep'); e.name='ValueError'; throw e;}
    var i1 = this.lastIndexOf(sep);
    if (i1 < 0) return ['', '', this.slice(0)]
    var i2 = i1 + sep.length;
    return [this.slice(0, i1), this.slice(i1, i2), this.slice(i2)]; 
};
var _pymeth_rsplit = function (sep, count) { // nargs: 1 2
    if (this.constructor !== String) return this.rsplit.apply(this, arguments);
    sep = (sep === undefined) ? /\s/ : sep;
    count = Math.max(0, (count === undefined) ? 1e20 : count);
    var parts = this.split(sep);
    var limit = Math.max(0, parts.length-count);
    var res = parts.slice(limit);
    if (count < parts.length) res.splice(0, 0, parts.slice(0, limit).join(sep));
    return res;
};
var _pymeth_rstrip = function (chars) { // nargs: 0 1
    if (this.constructor !== String) return this.rstrip.apply(this, arguments);
    chars = (chars === undefined) ? ' \t\r\n' : chars;
    for (var i=this.length-1; i>=0; i--) {
        if (chars.indexOf(this[i]) < 0) return this.slice(0, i+1);
    } return '';
};
var _pymeth_setdefault = function (key, d) { // nargs: 1 2
    if (this.constructor !== Object) return this.setdefault.apply(this, arguments);
    if (this[key] !== undefined) {return this[key];}
    else if (d !== undefined) { this[key] = d; return d;}
    else {return null;}
};
var _pymeth_sort = function (key, reverse) { // nargs: 0 1 2
    if (!Array.isArray(this)) return this.sort.apply(this, arguments);
    var comp = function (a, b) {a = key(a); b = key(b);
        if (a<b) {return -1;} if (a>b) {return 1;} return 0;};
    comp = Boolean(key) ? comp : undefined; 
    this.sort(comp);
    if (reverse) this.reverse();
};
var _pymeth_split = function (sep, count) { // nargs: 0, 1 2
    if (this.constructor !== String) return this.split.apply(this, arguments);
    if (sep === '') {var e = Error('empty sep'); e.name='ValueError'; throw e;}
    sep = (sep === undefined) ? /\s/ : sep;
    if (count === undefined) { return this.split(sep); }
    var res = [], i = 0, index1 = 0, index2 = 0;
    while (i < count && index1 < this.length) {
        index2 = this.indexOf(sep, index1);
        if (index2 < 0) { break; }
        res.push(this.slice(index1, index2));
        index1 = index2 + sep.length || 1;
        i += 1;
    }
    res.push(this.slice(index1));
    return res;
};
var _pymeth_splitlines = function (keepends) { // nargs: 0 1
    if (this.constructor !== String) return this.splitlines.apply(this, arguments);
    keepends = keepends ? 1 : 0
    var finder = /\r\n|\r|\n/g;
    var i = 0, i2, isrn, parts = [];
    while (finder.exec(this) !== null) {
        i2 = finder.lastIndex -1;
        isrn = i2 > 0 && this[i2-1] == '\r' && this[i2] == '\n';
        if (keepends) parts.push(this.slice(i, finder.lastIndex));
        else parts.push(this.slice(i, i2 - isrn));
        i = finder.lastIndex;
    }
    if (i < this.length) parts.push(this.slice(i));
    else if (!parts.length) parts.push('');
    return parts;
};
var _pymeth_startswith = function (x) { // nargs: 1
    if (this.constructor !== String) return this.startswith.apply(this, arguments);
    return this.indexOf(x) == 0;
};
var _pymeth_strip = function (chars) { // nargs: 0 1
    if (this.constructor !== String) return this.strip.apply(this, arguments);
    chars = (chars === undefined) ? ' \t\r\n' : chars;
    var i, s1 = this, s2 = '', s3 = '';
    for (i=0; i<s1.length; i++) {
        if (chars.indexOf(s1[i]) < 0) {s2 = s1.slice(i); break;}
    } for (i=s2.length-1; i>=0; i--) {
        if (chars.indexOf(s2[i]) < 0) {s3 = s2.slice(0, i+1); break;}
    } return s3;
};
var _pymeth_swapcase = function () { // nargs: 0
    if (this.constructor !== String) return this.swapcase.apply(this, arguments);
    var c, res = [];
    for (var i=0; i<this.length; i++) {
        c = this[i];
        if (c.toUpperCase() == c) res.push(c.toLowerCase());
        else res.push(c.toUpperCase());
    } return res.join('');
};
var _pymeth_title = function () { // nargs: 0
    if (this.constructor !== String) return this.title.apply(this, arguments);
    var i0, res = [], tester = /^[^A-Za-z]?[A-Za-z]$/;
    for (var i=0; i<this.length; i++) {
        i0 = Math.max(0, i-1);
        if (tester.test(this.slice(i0, i+1))) res.push(this[i].toUpperCase());
        else res.push(this[i].toLowerCase());
    } return res.join('');
};
var _pymeth_translate = function (table) { // nargs: 1
    if (this.constructor !== String) return this.translate.apply(this, arguments);
    var c, res = [];
    for (var i=0; i<this.length; i++) {
        c = table[this[i]];
        if (c === undefined) res.push(this[i]);
        else if (c !== null) res.push(c);
    } return res.join('');
};
var _pymeth_update = function (other) { // nargs: 1
    if (this.constructor !== Object) return this.update.apply(this, arguments);
    var key, keys = Object.keys(other);
    for (var i=0; i<keys.length; i++) {key = keys[i]; this[key] = other[key];}
    return null;
};
var _pymeth_upper = function () { // nargs: 0
    if (this.constructor !== String) return this.upper.apply(this, arguments);
    return this.toUpperCase();
};
var _pymeth_values = function () { // nargs: 0
    if (this.constructor !== Object) return this.values.apply(this, arguments);
    var key, keys = Object.keys(this), res = [];
    for (var i=0; i<keys.length; i++) {key = keys[i]; res.push(this[key]);}
    return res;
};
var _pymeth_zfill = function (width) { // nargs: 1
    if (this.constructor !== String) return this.zfill.apply(this, arguments);
    return _pymeth_rjust.call(this, width, '0');
};

return {_pyfunc_perf_counter: _pyfunc_perf_counter, _pyfunc_time: _pyfunc_time, _pyfunc_op_instantiate: _pyfunc_op_instantiate, _pyfunc_create_dict: _pyfunc_create_dict, _pyfunc_merge_dicts: _pyfunc_merge_dicts, _pyfunc_op_parse_kwargs: _pyfunc_op_parse_kwargs, _pyfunc_op_error: _pyfunc_op_error, _pyfunc_hasattr: _pyfunc_hasattr, _pyfunc_getattr: _pyfunc_getattr, _pyfunc_setattr: _pyfunc_setattr, _pyfunc_delattr: _pyfunc_delattr, _pyfunc_dict: _pyfunc_dict, _pyfunc_list: _pyfunc_list, _pyfunc_range: _pyfunc_range, _pyfunc_format: _pyfunc_format, _pyfunc_pow: _pyfunc_pow, _pyfunc_sum: _pyfunc_sum, _pyfunc_round: _pyfunc_round, _pyfunc_int: _pyfunc_int, _pyfunc_float: _pyfunc_float, _pyfunc_str: _pyfunc_str, _pyfunc_repr: _pyfunc_repr, _pyfunc_bool: _pyfunc_bool, _pyfunc_abs: _pyfunc_abs, _pyfunc_divmod: _pyfunc_divmod, _pyfunc_all: _pyfunc_all, _pyfunc_any: _pyfunc_any, _pyfunc_enumerate: _pyfunc_enumerate, _pyfunc_zip: _pyfunc_zip, _pyfunc_reversed: _pyfunc_reversed, _pyfunc_sorted: _pyfunc_sorted, _pyfunc_filter: _pyfunc_filter, _pyfunc_map: _pyfunc_map, _pyfunc_truthy: _pyfunc_truthy, _pyfunc_op_equals: _pyfunc_op_equals, _pyfunc_op_contains: _pyfunc_op_contains, _pyfunc_op_add: _pyfunc_op_add, _pyfunc_op_mult: _pyfunc_op_mult, _pymeth_append: _pymeth_append, _pymeth_extend: _pymeth_extend, _pymeth_insert: _pymeth_insert, _pymeth_remove: _pymeth_remove, _pymeth_reverse: _pymeth_reverse, _pymeth_sort: _pymeth_sort, _pymeth_clear: _pymeth_clear, _pymeth_copy: _pymeth_copy, _pymeth_pop: _pymeth_pop, _pymeth_count: _pymeth_count, _pymeth_index: _pymeth_index, _pymeth_get: _pymeth_get, _pymeth_items: _pymeth_items, _pymeth_keys: _pymeth_keys, _pymeth_popitem: _pymeth_popitem, _pymeth_setdefault: _pymeth_setdefault, _pymeth_update: _pymeth_update, _pymeth_values: _pymeth_values, _pymeth_repeat: _pymeth_repeat, _pymeth_capitalize: _pymeth_capitalize, _pymeth_casefold: _pymeth_casefold, _pymeth_center: _pymeth_center, _pymeth_endswith: _pymeth_endswith, _pymeth_expandtabs: _pymeth_expandtabs, _pymeth_find: _pymeth_find, _pymeth_format: _pymeth_format, _pymeth_isalnum: _pymeth_isalnum, _pymeth_isalpha: _pymeth_isalpha, _pymeth_isidentifier: _pymeth_isidentifier, _pymeth_islower: _pymeth_islower, _pymeth_isdecimal: _pymeth_isdecimal, _pymeth_isnumeric: _pymeth_isnumeric, _pymeth_isdigit: _pymeth_isdigit, _pymeth_isspace: _pymeth_isspace, _pymeth_istitle: _pymeth_istitle, _pymeth_isupper: _pymeth_isupper, _pymeth_join: _pymeth_join, _pymeth_ljust: _pymeth_ljust, _pymeth_lower: _pymeth_lower, _pymeth_lstrip: _pymeth_lstrip, _pymeth_partition: _pymeth_partition, _pymeth_replace: _pymeth_replace, _pymeth_rfind: _pymeth_rfind, _pymeth_rindex: _pymeth_rindex, _pymeth_rjust: _pymeth_rjust, _pymeth_rpartition: _pymeth_rpartition, _pymeth_rsplit: _pymeth_rsplit, _pymeth_rstrip: _pymeth_rstrip, _pymeth_split: _pymeth_split, _pymeth_splitlines: _pymeth_splitlines, _pymeth_startswith: _pymeth_startswith, _pymeth_strip: _pymeth_strip, _pymeth_swapcase: _pymeth_swapcase, _pymeth_title: _pymeth_title, _pymeth_translate: _pymeth_translate, _pymeth_upper: _pymeth_upper, _pymeth_zfill: _pymeth_zfill};
});


/* =========================== flexx.event.js ===========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */

flexx.define("flexx.event.js", ["pscript-std.js"], function (_py) {

"use strict";

var _pyfunc_bool = _py._pyfunc_bool, _pyfunc_format = _py._pyfunc_format, _pyfunc_range = _py._pyfunc_range, _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_list = _py._pyfunc_list, _pyfunc_setattr = _py._pyfunc_setattr, _pyfunc_int = _py._pyfunc_int, _pyfunc_create_dict = _py._pyfunc_create_dict, _pyfunc_str = _py._pyfunc_str, _pyfunc_op_mult = _py._pyfunc_op_mult, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_op_error = _py._pyfunc_op_error, _pyfunc_op_parse_kwargs = _py._pyfunc_op_parse_kwargs, _pyfunc_hasattr = _py._pyfunc_hasattr, _pyfunc_float = _py._pyfunc_float, _pyfunc_truthy = _py._pyfunc_truthy, _pyfunc_getattr = _py._pyfunc_getattr, _pyfunc_op_contains = _py._pyfunc_op_contains, _pyfunc_all = _py._pyfunc_all, _pyfunc_op_add = _py._pyfunc_op_add, _pyfunc_dict = _py._pyfunc_dict;
var _pymeth_pop = _py._pymeth_pop, _pymeth_insert = _py._pymeth_insert, _pymeth_format = _py._pymeth_format, _pymeth_copy = _py._pymeth_copy, _pymeth_append = _py._pymeth_append, _pymeth_partition = _py._pymeth_partition, _pymeth_clear = _py._pymeth_clear, _pymeth_rstrip = _py._pymeth_rstrip, _pymeth_upper = _py._pymeth_upper, _pymeth_endswith = _py._pymeth_endswith, _pymeth_sort = _py._pymeth_sort, _pymeth_join = _py._pymeth_join, _pymeth_repeat = _py._pymeth_repeat, _pymeth_lower = _py._pymeth_lower, _pymeth_get = _py._pymeth_get, _pymeth_strip = _py._pymeth_strip, _pymeth_split = _py._pymeth_split, _pymeth_startswith = _py._pymeth_startswith, _pymeth_lstrip = _py._pymeth_lstrip, _pymeth_replace = _py._pymeth_replace;
var _mutate_array_js;
_mutate_array_js = function flx__mutate_array_js (array, ev) {
	var err_3, index, is_nd, mutation, objects;
	is_nd = _pyfunc_hasattr(array, "shape") && _pyfunc_hasattr(array, "dtype");
	mutation = ev.mutation;
	index = ev.index;
	objects = ev.objects;
	if ((is_nd === true)) {
		if (_pyfunc_op_equals(mutation, "set")) {
			throw _pyfunc_op_error('NotImplementedError', "Cannot set nd array in-place");
		} else if (_pyfunc_op_contains(mutation, ["extend", "insert", "remove"])) {
			throw _pyfunc_op_error('NotImplementedError', "Cannot resize nd arrays");
		} else if (_pyfunc_op_equals(mutation, "replace")) {
			throw _pyfunc_op_error('NotImplementedError', "Cannot replace items in nd array");
		}
	} else {
		if (_pyfunc_op_equals(mutation, "remove")) {
			if (!(Object.prototype.toString.call(objects).slice(8,-1).toLowerCase() === 'number')) { throw _pyfunc_op_error('AssertionError', "Object.prototype.toString.call(objects).slice(8,-1).toLowerCase() === 'number'");}
		} else if ((!Array.isArray(objects))) {
			throw _pyfunc_op_error('TypeError', "Inplace list/array mutating requires a list of objects.");
		}
		if (_pyfunc_op_equals(mutation, "set")) {
			array.splice.apply(array, [].concat([0, array.length], objects));
		} else if (_pyfunc_op_equals(mutation, "insert")) {
			array.splice.apply(array, [].concat([index, 0], objects));
		} else if (_pyfunc_op_equals(mutation, "remove")) {
			array.splice(index, objects);
		} else if (_pyfunc_op_equals(mutation, "replace")) {
			array.splice.apply(array, [].concat([index, objects.length], objects));
		} else {
			throw _pyfunc_op_error('NotImplementedError', mutation);
		}
	}
	return null;
};

var mutate_array = _mutate_array_js;
var mutate_dict;
mutate_dict = function flx_mutate_dict (d, ev) {
	var err_2, key, mutation, objects, stub1_seq, stub2_seq, stub3_itr, val;
	mutation = ev["mutation"];
	objects = ev["objects"];
	if (_pyfunc_op_equals(mutation, "set")) {
		_pymeth_clear.call(d);
	} else if (_pyfunc_op_contains(mutation, ["set", "insert", "replace"])) {
		if (!(Object.prototype.toString.call(objects).slice(8,-1).toLowerCase() === 'object')) { throw _pyfunc_op_error('AssertionError', "Object.prototype.toString.call(objects).slice(8,-1).toLowerCase() === 'object'");}
		stub1_seq = objects;
		for (key in stub1_seq) {
			if (!stub1_seq.hasOwnProperty(key)){ continue; }
			val = stub1_seq[key];
			d[key] = val;
		}
	} else if (_pyfunc_op_equals(mutation, "remove")) {
		if (!(Array.isArray(objects))) { throw _pyfunc_op_error('AssertionError', "Array.isArray(objects)");}
		stub2_seq = objects;
		if ((typeof stub2_seq === "object") && (!Array.isArray(stub2_seq))) { stub2_seq = Object.keys(stub2_seq);}
		for (stub3_itr = 0; stub3_itr < stub2_seq.length; stub3_itr += 1) {
			key = stub2_seq[stub3_itr];
			_pymeth_pop.call(d, key);
		}
	} else {
		throw _pyfunc_op_error('NotImplementedError', mutation);
	}
	return null;
};

var Logger = function () {
	this.level = 25;
}
var $Logger = Logger.prototype;
$Logger.debug = function (msg) {
	if (this.level <= 10) { console.info(msg); }
};
$Logger.info = function (msg) {
	if (this.level <= 20) { console.info(msg); }
};
$Logger.warn = function (msg) {
	if (this.level <= 30) { console.warn(msg); }
};
$Logger.exception = function (msg) {
	console.error(msg);
};
$Logger.error = function (msg) {
	console.error(msg);
};
var logger = new Logger();
var Loop;
Loop = function () {
	_pyfunc_op_instantiate(this, arguments);
}
var $Loop = Loop.prototype;
$Loop.__init__ = function () {
	this._active_components = [];
	this.reset();
	return null;
};

$Loop._call_soon_func = function (func) {
	setTimeout(func, 0);
	return null;
};

$Loop._iter_callback = function () {
	this._scheduled_call_to_iter = false;
	return this.iter();
};


$Loop.__enter__ = function () {
	return this;
};

$Loop.__exit__ = function (type, value, traceback) {
	this.iter();
	return null;
};

$Loop._activate_component = function (component) {
	_pymeth_append.call(this._active_components, component);
	return null;
};

$Loop._deactivate_component = function (component) {
	var err_2, top;
	top = _pymeth_pop.call(this._active_components, (-1));
	if ((top !== component)) {
		throw _pyfunc_op_error('RuntimeError', (_pymeth_format.call("loop._deactivate_component: {} is not {}", component.id, (_pyfunc_truthy(top) && _pyfunc_truthy(top.id)))));
	}
	return null;
};

$Loop._process_actions = function (n) {
	var action, args, err, i, pending_actions, stub1_err, stub2_;
	n = (n === undefined) ? null: n;
	{/* with lock */
				if ((n === null)) {
			pending_actions = this._pending_actions;
			this._pending_actions = [];
		} else {
			pending_actions = this._pending_actions.slice(0,n);
			this._pending_actions = this._pending_actions.slice(n);
		}
	}
	for (i = 0; i < pending_actions.length; i += 1) {
		stub2_ = pending_actions[i];
		action = stub2_[0];args = stub2_[1];
		this._processing_action = action;
		try {
			action.apply(null, args);
		} catch(err_3) {
			{
				err = err_3;
				logger.exception(err);
			}
		} finally {
			this._processing_action = null;
		}
	}
	return null;
};

$Loop._process_calls = function () {
	var args, err, func, i, pending_calls, stub1_err, stub2_;
	{/* with lock */
				pending_calls = this._pending_calls;
		this._pending_calls = [];
	}
	for (i = 0; i < pending_calls.length; i += 1) {
		stub2_ = pending_calls[i];
		func = stub2_[0];args = stub2_[1];
		try {
			func.apply(null, args);
		} catch(err_3) {
			{
				err = err_3;
				logger.exception(err);
			}
		}
	}
	return null;
};

$Loop._process_reactions = function () {
	var _, component, component_names, connections, err, events, ir, name, pending_reactions, reaction, stub1_err, stub2_, stub3_seq, stub4_seq;
	{/* with lock */
				pending_reactions = this._pending_reactions;
		this._pending_reactions = [];
		this._pending_reaction_ids = ({});
	}
	for (ir = 0; ir < pending_reactions.length; ir += 1) {
		stub2_ = pending_reactions[ir];
		reaction = stub2_[0];_ = stub2_[1];events = stub2_[2];
		if (((events.length > 0) || (_pyfunc_op_equals(reaction.get_mode(), "auto")))) {
			this._prop_access = ({});
			this._processing_reaction = reaction;
			try {
				reaction.apply(null, events);
			} catch(err_4) {
				{
					err = err_4;
					logger.exception(err);
				}
			} finally {
				this._processing_reaction = null;
			}
		}
		try {
			if ((_pyfunc_op_equals(reaction.get_mode(), "auto"))) {
				connections = [];
				stub4_seq = this._prop_access;
				for (component_names in stub4_seq) {
					if (!stub4_seq.hasOwnProperty(component_names)){ continue; }
					component_names = stub4_seq[component_names];
					component = component_names[0];
					stub3_seq = component_names[1];
					for (name in stub3_seq) {
						if (!stub3_seq.hasOwnProperty(name)){ continue; }
						_pymeth_append.call(connections, [component, name]);
					}
				}
				reaction._update_implicit_connections(connections);
			}
		} catch(err_3) {
			{
				err = err_3;
				logger.exception(err);
			}
		} finally {
			this._prop_access = ({});
		}
	}
	return null;
};

$Loop._schedule_iter = function () {
	if ((this._scheduled_call_to_iter === false)) {
		this._scheduled_call_to_iter = true;
		this._call_soon_func(this._iter_callback);
	}
	return null;
};

$Loop.add_action_invokation = function (action, args) {
	var stub1_err;
	{/* with lock */
		_pymeth_append.call(this._pending_actions, [action, args]);
		this._schedule_iter();
	}
	return null;
};

$Loop.add_reaction_event = function (reaction, ev) {
	var ev2, i, mode, new_item, pending_reactions, stub1_err;
	pending_reactions = this._pending_reactions;
	mode = reaction.get_mode();
	{/* with lock */
				if (_pyfunc_op_equals(mode, "normal")) {
			i = pending_reactions.length;
			while (i > 0) {
				i -= 1;
				ev2 = pending_reactions[i][1];
				if (((pending_reactions[i][0]) === reaction)) {
					_pymeth_append.call((pending_reactions[i][2]), ev);
					if ((!((ev2["source"] === ev["source"]) && _pyfunc_op_equals(ev2["type"], ev["type"])))) {
						pending_reactions[i][1] = ({source: null});
					}
					return null;
				}
				if ((!((ev2 === null) || ((ev2["source"] === ev["source"]) && _pyfunc_op_equals(ev2.type, ev.type))))) {
					break;
				}
			}
		} else if (_pyfunc_op_contains(reaction._id, this._pending_reaction_ids)) {
			if ((reaction._connections.length > 0)) {
				_pymeth_append.call((this._pending_reaction_ids[reaction._id][2]), ev);
			}
			return null;
		}
		if ((reaction._connections.length > 0)) {
			new_item = [reaction, ev, [ev]];
		} else {
			new_item = [reaction, null, []];
		}
		_pymeth_append.call(pending_reactions, new_item);
		this._pending_reaction_ids[reaction._id] = new_item;
		this._schedule_iter();
	}
	return null;
};

$Loop.call_soon = function (func) {
	var args, stub1_err;
	args = Array.prototype.slice.call(arguments, 1);
	{/* with lock */
		_pymeth_append.call(this._pending_calls, [func, args]);
		this._schedule_iter();
	}
	return null;
};

$Loop.can_mutate = function (component) {
	var active;
	component = (component === undefined) ? null: component;
	active = this.get_active_component();
	if ((active !== null)) {
		return active === component;
	} else {
		return this._processing_action !== null;
	}
	return null;
};

$Loop.get_active_component = function () {
	if ((this._active_components.length > 0)) {
		return this._active_components[this._active_components.length -1];
	}
	return null;
};

$Loop.get_active_components = function () {
	return _pyfunc_list(this._active_components);
};

$Loop.has_pending = function () {
	return (this._pending_reactions.length > 0) || (this._pending_actions.length > 0) || (this._pending_calls.length > 0);
};

$Loop.iter = function () {
	var err_2, stub1_err;
	{/* with lock */
			}
	if ((this._in_iter === true)) {
		throw _pyfunc_op_error('RuntimeError', "Cannot call flexx.event.loop.iter() while it is processing.");
	}
	this._in_iter = true;
	try {
		this._process_calls();
		this._process_actions();
		this._process_reactions();
	} finally {
		this._in_iter = false;
	}
	return null;
};

$Loop.register_prop_access = function (component, prop_name) {
	var d;
	if ((this._processing_reaction !== null)) {
		if ((_pyfunc_op_equals(this._processing_reaction.get_mode(), "auto"))) {
			 {
				if ((!_pyfunc_op_contains(component._id, this._prop_access))) {
					d = ({});
					this._prop_access[component._id] = [component, d];
				} else {
					d = this._prop_access[component._id][1];
				}
				d[prop_name] = true;
			}
		}
	}
	return null;
};

$Loop.reset = function () {
	this._in_iter = false;
	this._scheduled_call_to_iter = false;
	this._processing_action = null;
	this._processing_reaction = null;
	this._prop_access = ({});
	this._pending_calls = [];
	this._pending_actions = [];
	this._pending_reactions = [];
	this._pending_reaction_ids = ({});
	return null;
};

var loop = new Loop();
var Component;
Component = function () {
	_pyfunc_op_instantiate(this, arguments);
}
var $Component = Component.prototype;
$Component._base_class = Object;
$Component.__name__ = "Component";

$Component._IS_COMPONENT = true;
$Component._COUNT = 0;
$Component._REACTION_COUNT = 0;
$Component.__init__ = function () {
	var i, init_args, name, property_values, stub1_err;
	property_values = {};
	if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
		property_values = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
		init_args = arguments[0].flx_args;
	} else {init_args = Array.prototype.slice.call(arguments);}
	$Component._COUNT += 1;
	this._id = this.__name__ + $Component._COUNT;
	this._disposed = false;
	this._Component__handlers = ({});
	this._Component__pending_events = [];
	this._Component__anonymous_reactions = [];
	this._Component__initial_mutation = false;
	for (i = 0; i < this.__actions__.length; i += 1) {
		name = this.__actions__[i];
		this._Component__create_action(this[name], name);
	}
	for (i = 0; i < this.__emitters__.length; i += 1) {
		name = this.__emitters__[i];
		this._Component__handlers[name] = [];
		this._Component__create_emitter(this[name], name);
	}
	for (i = 0; i < this.__properties__.length; i += 1) {
		name = this.__properties__[i];
		this._Component__handlers[name] = [];
		this._Component__create_property(name);
	}
	for (i = 0; i < this.__attributes__.length; i += 1) {
		name = this.__attributes__[i];
		this._Component__create_attribute(name);
	}
	this.__enter__();
	try {
		this._comp_init_property_values(property_values);
		this.init.apply(this, init_args);
	} catch(err_1)  { stub1_err=err_1; }
	if (stub1_err) { if (!this.__exit__(stub1_err.name || "error", stub1_err, null)) { throw stub1_err; }
	} else { this.__exit__(null, null, null); }
	this._comp_init_reactions();
	return null;
};

$Component._comp_init_property_values = function (property_values) {
	var err_4, i, name, stub2_seq, value, values;
	values = [];
	for (i = 0; i < this.__properties__.length; i += 1) {
		name = this.__properties__[i];
		if ((!_pyfunc_op_contains(name, property_values))) {
			_pymeth_append.call(values, ([name, this[("_" + name) + "_value"]]));
		}
	}
	stub2_seq = property_values;
	for (name in stub2_seq) {
		if (!stub2_seq.hasOwnProperty(name)){ continue; }
		value = stub2_seq[name];
		if ((!_pyfunc_op_contains(name, this.__properties__))) {
			if (_pyfunc_op_contains(name, this.__attributes__)) {
				throw _pyfunc_op_error('AttributeError', _pymeth_format.call("{}.{} is an attribute, not a property", this._id, name));
			} else {
				throw _pyfunc_op_error('AttributeError', _pymeth_format.call("{} does not have property {}.", this._id, name));
			}
		}
		if ((typeof value === "function")) {
			this._comp_make_implicit_setter(name, value);
			continue;
		}
		_pymeth_append.call(values, [name, value]);
	}
	this._comp_apply_property_values(values);
	return null;
};

$Component._comp_make_implicit_setter = function (prop_name, func) {
	var err_2, reaction, setter_func, setter_reaction, t;
	setter_func = _pyfunc_getattr(this, ("set_" + prop_name), null);
	if ((setter_func === null)) {
		t = "%s does not have a set_%s() action for property %s.";
		throw _pyfunc_op_error('TypeError', (t % [this._id, prop_name, prop_name]));
	}
	setter_reaction = (function () {return setter_func(func());}).bind(this);
	reaction = this._Component__create_reaction(setter_reaction, "auto-" + prop_name, "auto", []);
	_pymeth_append.call(this._Component__anonymous_reactions, reaction);
	return null;
};

$Component._comp_init_reactions = function () {
	var ev, func, i, name, r;
	if ((this._Component__pending_events !== null)) {
		_pymeth_append.call(this._Component__pending_events, null);
		loop.call_soon(this._comp_stop_capturing_events);
	}
	for (i = 0; i < this.__reactions__.length; i += 1) {
		name = this.__reactions__[i];
		func = this[name];
		r = this._Component__create_reaction(func, name, func._mode, _pyfunc_truthy(func._connection_strings) || []);
		if ((_pyfunc_op_equals(r.get_mode(), "auto"))) {
			ev = {source:this, type:"", label:""};
			loop.add_reaction_event(r, ev);
		}
	}
	for (i = 0; i < this._Component__anonymous_reactions.length; i += 1) {
		r = this._Component__anonymous_reactions[i];
		if ((_pyfunc_op_equals(r.get_mode(), "auto"))) {
			ev = {source:this, type:"", label:""};
			loop.add_reaction_event(r, ev);
		}
	}
	return null;
};

$Component.reaction = function () {
	var connection_strings, err_2, err_3, func, i, mode, name, nameparts, s;
	connection_strings = Array.prototype.slice.call(arguments);
	if ((connection_strings.length < 2)) {
		throw _pyfunc_op_error('RuntimeError', "Component.reaction() (js) needs a function and one or more connection strings.");
	}
	if ((typeof connection_strings[0] === "function")) {
		func = connection_strings[0];
		connection_strings = connection_strings.slice(1);
	} else if ((typeof connection_strings[connection_strings.length -1] === "function")) {
		func = connection_strings[connection_strings.length -1];
		connection_strings = connection_strings.slice(0,-1);
	} else {
		throw _pyfunc_op_error('TypeError', "Component.reaction() requires a callable.");
	}
	for (i = 0; i < connection_strings.length; i += 1) {
		s = connection_strings[i];
		if ((!(((Object.prototype.toString.call(s).slice(8,-1).toLowerCase() === 'string')) && s.length))) {
			throw _pyfunc_op_error('ValueError', "Connection string must be nonempty strings.");
		}
	}
	name = func.__name__ || func.name || 'anonymous';
	nameparts = name.split(' ');
	nameparts = nameparts[nameparts.length-1].split('flx_');
	name = nameparts[nameparts.length -1];
	mode = "normal";
	return this._Component__create_reaction_ob(func, name, mode, connection_strings);
};

$Component._Component__create_action = function (action_func, name) {
	var action, getter, opts, setter;
	action = (function flx_action () {
		var res;
		if ((loop.can_mutate(this) === true)) {
			res = action_func.apply(this, arguments);
			if ((res !== null)) {
				logger.warn(_pymeth_format.call("Action ({}) is not supposed to return a value", name));
			}
		} else {
			loop.add_action_invokation(action, arguments);
		}
		return this;
	}).bind(this);

	action.is_autogenerated = _pyfunc_op_equals(action_func.name, "flx_setter");
	getter = (function flx_getter () {
		return action;
	}).bind(this);

	setter = (function flx_setter (x) {
		var err_2;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Action {} is not settable", name));
		return null;
	}).bind(this);

	opts = ({enumerable: true, configurable: true, get: getter, set: setter});
	Object.defineProperty(this, name, opts);
	return null;
};

$Component._Component__create_attribute = function (name) {
	var getter, opts, setter;
	getter = (function flx_getter () {
		return this["_" + name];
	}).bind(this);

	setter = (function flx_setter (x) {
		var err_2;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Cannot set attribute {!r}", name));
		return null;
	}).bind(this);

	opts = ({enumerable: false, configurable: false, get: getter, set: setter});
	Object.defineProperty(this, name, opts);
	return null;
};

$Component._Component__create_property = function (name) {
	var getter, opts, private_name, setter;
	private_name = ("_" + name) + "_value";
	getter = (function flx_getter () {
		loop.register_prop_access(this, name);
		return this[private_name];
	}).bind(this);

	setter = (function flx_setter (x) {
		var err_2;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Cannot set property {!r}; properties can only be mutated by actions.", name));
		return null;
	}).bind(this);

	opts = ({enumerable: true, configurable: true, get: getter, set: setter});
	Object.defineProperty(this, name, opts);
	return null;
};

$Component._Component__create_emitter = function (emitter_func, name) {
	var func, getter, opts, setter;
	func = (function flx_func () {
		var ev;
		ev = emitter_func.apply(this, arguments);
		if ((ev !== null)) {
			this.emit(name, ev);
		}
		return null;
	}).bind(this);

	getter = (function flx_getter () {
		return func;
	}).bind(this);

	setter = (function flx_setter (x) {
		var err_2;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Emitter {} is not settable", name));
		return null;
	}).bind(this);

	opts = ({enumerable: true, configurable: true, get: getter, set: setter});
	Object.defineProperty(this, name, opts);
	return null;
};

$Component._Component__create_reaction = function (reaction_func, name, mode, c_strings) {
	var getter, opts, reaction, setter;
	reaction = this._Component__create_reaction_ob(reaction_func, name, mode, c_strings);
	getter = (function flx_getter () {
		return reaction;
	}).bind(this);

	setter = (function flx_setter (x) {
		var err_2;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Reaction {} is not settable", name));
		return null;
	}).bind(this);

	opts = ({enumerable: true, configurable: true, get: getter, set: setter});
	Object.defineProperty(this, name, opts);
	return reaction;
};

$Component._Component__create_reaction_ob = function (reaction_func, name, mode, connection_strings) {
	var reaction, that;
	reaction = (function flx_reaction () {
		return reaction_func.apply(this, arguments);
	}).bind(this);

	
	reaction._clear_component_refs = function (ob) {
		var connection, i, ic;
		for (i = this._implicit_connections.length - 1; i > -1; i += -1) {
			if (((this._implicit_connections[i][0]) === ob)) {
				_pymeth_pop.call(this._implicit_connections, i);
			}
		}
		for (ic = 0; ic < this._connections.length; ic += 1) {
			connection = this._connections[ic];
			for (i = connection.objects.length - 1; i > -1; i += -1) {
				if (((connection.objects[i][0]) === ob)) {
					_pymeth_pop.call(connection.objects, i);
				}
			}
		}
		return null;
	};

	reaction._connect_and_disconnect = function (old_objects, new_objects, force) {
		var i, i1, i2, i3, ob, should_stay, stub1_, stub2_, stub3_, type;
		force = (force === undefined) ? false: force;
		should_stay = ({});
		i1 = 0;
		while ((i1 < new_objects.length) && (i1 < old_objects.length) && (((new_objects[i1][0]) === (old_objects[i1][0]))) && ((_pyfunc_op_equals((new_objects[i1][1]), (old_objects[i1][1]))))) {
			should_stay[_pyfunc_op_add((((new_objects[i1][0]).id) + "-"), (new_objects[i1][1]))] = true;
			i1 = _pyfunc_op_add(i1, 1);
		}
		stub1_ = [new_objects.length - 1, old_objects.length - 1];
		i2 = stub1_[0];i3 = stub1_[1];
		while ((i2 >= i1) && (i3 >= i1) && (((new_objects[i2][0]) === (old_objects[i3][0]))) && ((_pyfunc_op_equals((new_objects[i2][1]), (old_objects[i3][1]))))) {
			should_stay[_pyfunc_op_add((((new_objects[i2][0]).id) + "-"), (new_objects[i2][1]))] = true;
			i2 -= 1;
			i3 -= 1;
		}
		for (i = i1; i < i3 + 1; i += 1) {
			stub2_ = old_objects[i];
			ob = stub2_[0];type = stub2_[1];
			if (((_pymeth_get.call(should_stay, (_pyfunc_op_add((ob.id + "-"), type)), false)) === false)) {
				ob.disconnect(type, this);
			}
		}
		for (i = i1; i < i2 + 1; i += 1) {
			stub3_ = new_objects[i];
			ob = stub3_[0];type = stub3_[1];
			ob._register_reaction(type, this, force);
		}
		return null;
	};

	reaction._init = function (connection_strings) {
		var _, d, err_5, force, fullname, i, ic, ichars, ipart, is_identifier, label, part, parts, s, s0, stub1_;
		ichars = "0123456789_abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
		this._connections = [];
		this._implicit_connections = [];
		for (ic = 0; ic < connection_strings.length; ic += 1) {
			fullname = connection_strings[ic];
			force = _pymeth_startswith.call(fullname, "!");
			stub1_ = _pymeth_partition.call(_pymeth_lstrip.call(fullname, "!"), ":");
			s = stub1_[0];_ = stub1_[1];label = stub1_[2];
			s0 = s;
			if ((_pyfunc_op_contains(".*.", (s + ".")))) {
				s = _pymeth_replace.call(s, ".*", "*");
				console.warn(_pymeth_format.call("Connection string syntax \"foo.*.bar\" is deprecated, use \"{}\" instead of \"{}\":.", s, s0));
			}
			if (_pyfunc_op_contains("!", s)) {
				s = _pymeth_replace.call(s, "!", "");
				force = true;
				console.warn(_pymeth_format.call("Exclamation marks in connection strings must come at the very start, use \"!{}\" instead of \"{}\".", s, s0));
			}
			parts = _pymeth_split.call(s, ".");
			for (ipart = 0; ipart < parts.length; ipart += 1) {
				part = _pymeth_rstrip.call(parts[ipart], "*");
				is_identifier = part.length > 0;
				for (i = 0; i < part.length; i += 1) {
					is_identifier = _pyfunc_truthy(is_identifier) && _pyfunc_op_contains(part[i], ichars);
				}
				if ((is_identifier === false)) {
					throw _pyfunc_op_error('ValueError', _pymeth_format.call("Connection string {!r} contains non-identifier part {!r}", s, part));
				}
			}
			d = {};
			_pymeth_append.call(this._connections, d);
			d.fullname = fullname;
			d.parts = parts;
			d.type = _pyfunc_op_add((_pymeth_rstrip.call(parts[parts.length -1], "*") + ":"), (_pyfunc_truthy(label) || this._name));
			d.force = force;
			d.objects = [];
		}
		for (ic = 0; ic < this._connections.length; ic += 1) {
			this.reconnect(ic);
		}
		return null;
	};

	reaction._seek_event_object = function (index, path, ob) {
		var connection, err_3, isub, name_label, new_ob, obname, obname_full, selector, stub1_, t;
		connection = this._connections[index];
		if (((ob === null) || (path.length == 0))) {
			return null;
		}
		if ((path.length == 1)) {
			if (_pyfunc_hasattr(ob, "_IS_COMPONENT")) {
				_pymeth_append.call(connection.objects, [ob, connection.type]);
			}
			if ((!_pyfunc_truthy(_pymeth_endswith.call(path[0], "**")))) {
				return null;
			}
		}
		stub1_ = [path[0], path.slice(1)];
		obname_full = stub1_[0];path = stub1_[1];
		obname = _pymeth_rstrip.call(obname_full, "*");
		selector = obname_full.slice(obname.length);
		if (_pyfunc_op_equals(selector, "***")) {
			this._seek_event_object(index, path, ob);
		}
		if ((_pyfunc_hasattr(ob, "_IS_COMPONENT") && _pyfunc_op_contains(obname, ob.__properties__))) {
			name_label = _pyfunc_op_add((obname + ":reconnect_"), _pyfunc_str(index));
			_pymeth_append.call(connection.objects, [ob, name_label]);
			new_ob = _pyfunc_getattr(ob, obname, null);
		} else {
			new_ob = _pyfunc_getattr(ob, obname, null);
		}
		if (_pyfunc_truthy(selector.length && _pyfunc_op_contains(selector, "***") && Array.isArray(new_ob))) {
			if ((selector.length > 1)) {
				path = _pyfunc_op_add([obname + "***"], path);
			}
			for (isub = 0; isub < new_ob.length; isub += 1) {
				this._seek_event_object(index, path, new_ob[isub]);
			}
			return null;
		} else if (_pyfunc_op_equals(selector, "*")) {
			t = "Invalid connection {name_full} because {name} is not a tuple/list.";
			throw _pyfunc_op_error('RuntimeError', (_pymeth_replace.call(_pymeth_replace.call(t, "{name_full}", obname_full), "{name}", obname)));
		} else {
			return this._seek_event_object(index, path, new_ob);
		}
		return null;
	};

	reaction._update_implicit_connections = function (connections) {
		var new_conns, old_conns;
		old_conns = this._implicit_connections;
		new_conns = connections;
		this._implicit_connections = new_conns;
		this._connect_and_disconnect(old_conns, new_conns);
		return null;
	};

	reaction._use_once = function (func) {
		this._func_once = func;
		return null;
	};

	reaction.dispose = function () {
		var connection, ic, ob, stub1_, stub2_, type;
		if (((this._connections.length == 0) && (this._implicit_connections.length == 0))) {
			return null;
		}
		if ((!"this_is_js()")) {
		}
		while (this._implicit_connections.length) {
			stub1_ = _pymeth_pop.call(this._implicit_connections, 0);
			ob = stub1_[0];type = stub1_[1];
			ob.disconnect(type, this);
		}
		for (ic = 0; ic < this._connections.length; ic += 1) {
			connection = this._connections[ic];
			while (connection.objects.length > 0) {
				stub2_ = _pymeth_pop.call(connection.objects, 0);
				ob = stub2_[0];type = stub2_[1];
				ob.disconnect(type, this);
			}
		}
		this._connections = [];
		return null;
	};

	reaction.get_connection_info = function () {
		return (function list_comprehension (iter0) {var res = [];var c, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {c = iter0[i0];{res.push([c.fullname, (function list_comprehension (iter0) {var res = [];var u, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {u = iter0[i0];{res.push(u[1]);}}return res;}).call(this, c.objects)]);}}return res;}).call(this, this._connections);
	};

	reaction.get_mode = function () {
		return this._mode;
	};

	reaction.get_name = function () {
		return this._name;
	};

	reaction.reconnect = function (index) {
		var connection, err_3, new_objects, ob, old_objects;
		connection = this._connections[index];
		old_objects = connection.objects;
		connection.objects = [];
		ob = this._ob1();
		if ((ob !== null)) {
			this._seek_event_object(index, connection.parts, ob);
		}
		new_objects = connection.objects;
		if ((new_objects.length == 0)) {
			throw _pyfunc_op_error('RuntimeError', _pymeth_format.call("Could not connect to {!r}", connection.fullname));
		}
		this._connect_and_disconnect(old_objects, new_objects, connection.force);
		return null;
	};

;
	that = this;
	$Component._REACTION_COUNT += 1;
	reaction._id = 'r' + $Component._REACTION_COUNT;
	reaction._name = name;
	reaction._mode = mode;
	reaction._ob1 = (function () {return that;}).bind(this);
	reaction._init(connection_strings, this);
	return reaction;
};


$Component._Component__check_not_active = function () {
	var active_components, err_2;
	active_components = loop.get_active_components();
	if (_pyfunc_op_contains(this, active_components)) {
		throw _pyfunc_op_error('RuntimeError', "It seems that the event loop is processing events while a Component is active. This has a high risk on race conditions.");
	}
	return null;
};

$Component.__actions__ = []
$Component.__attributes__ = ["id"]
$Component.__emitters__ = []
$Component.__enter__ = function () {
	loop._activate_component(this);
	loop.call_soon(this._Component__check_not_active);
	return this;
};

$Component.__exit__ = function (type, value, traceback) {
	loop._deactivate_component(this);
	return null;
};

$Component.__properties__ = []
$Component.__reactions__ = []
$Component._comp_apply_property_values = function (values) {
	var name, setter, setter_name, stub1_seq, stub2_itr, stub3_tgt, stub4_seq, stub5_itr, stub6_tgt, value;
	this._Component__initial_mutation = true;
	stub1_seq = values;
	if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
	for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
		stub3_tgt = stub1_seq[stub2_itr];
		name = stub3_tgt[0]; value = stub3_tgt[1];
		this._mutate(name, value);
	}
	stub4_seq = values;
	if ((typeof stub4_seq === "object") && (!Array.isArray(stub4_seq))) { stub4_seq = Object.keys(stub4_seq);}
	for (stub5_itr = 0; stub5_itr < stub4_seq.length; stub5_itr += 1) {
		stub6_tgt = stub4_seq[stub5_itr];
		name = stub6_tgt[0]; value = stub6_tgt[1];
		setter_name = _pyfunc_op_add(((_pymeth_startswith.call(name, "_"))? ("_set") : ("set_")), name);
		setter = _pyfunc_getattr(this, setter_name, null);
		if ((setter !== null)) {
			if ((_pyfunc_getattr(setter, "is_autogenerated", null) === false)) {
				setter(value);
			}
		}
	}
	this._Component__initial_mutation = false;
	return null;
};

$Component._comp_stop_capturing_events = function () {
	var allow_reconnect, ev, events, stub1_seq, stub2_itr;
	events = this._Component__pending_events;
	this._Component__pending_events = null;
	allow_reconnect = false;
	stub1_seq = events;
	if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
	for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
		ev = stub1_seq[stub2_itr];
		if ((ev === null)) {
			allow_reconnect = true;
			continue;
		}
		ev.allow_reconnect = allow_reconnect;
		this.emit(ev.type, ev);
	}
	return null;
};

$Component._dispose = function () {
	var i, name, reactions, stub1_seq;
	this._disposed = true;
	if ((!"this_is_js()")) {
	}
	stub1_seq = this._Component__handlers;
	for (name in stub1_seq) {
		if (!stub1_seq.hasOwnProperty(name)){ continue; }
		reactions = stub1_seq[name];
		for (i = 0; i < reactions.length; i += 1) {
			((reactions[i][1])._clear_component_refs)(this);
		}
		while (reactions.length) {
			reactions.pop();
		}
	}
	for (i = 0; i < this.__reactions__.length; i += 1) {
		(_pyfunc_getattr(this, this.__reactions__[i]).dispose)();
	}
	return null;
};

$Component._mutate = function (prop_name, value, mutation, index) {
	var cname, err_2, err_4, ev, is_equal, old, private_name, validator_name, value2;
	mutation = (mutation === undefined) ? "set": mutation;
	index = (index === undefined) ? -1: index;
	if ((!(Object.prototype.toString.call(prop_name).slice(8,-1).toLowerCase() === 'string'))) {
		throw _pyfunc_op_error('TypeError', (_pymeth_format.call("_mutate's first arg must be str, not {}", Object.getPrototypeOf(prop_name))));
	}
	if ((!_pyfunc_op_contains(prop_name, this.__properties__))) {
		cname = Object.getPrototypeOf(this).__name__;
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("{} object has no property {!r}", cname, prop_name));
	}
	if ((loop.can_mutate(this) === false)) {
		throw _pyfunc_op_error('AttributeError', _pymeth_format.call("Trying to mutate property {} outside of an action or context.", prop_name));
	}
	private_name = ("_" + prop_name) + "_value";
	validator_name = ("_" + prop_name) + "_validate";
	old = _pyfunc_getattr(this, private_name);
	if (_pyfunc_op_equals(mutation, "set")) {
		value2 = _pyfunc_getattr(this, validator_name)(value);
		_pyfunc_setattr(this, private_name, value2);
		if (true) { /* if this_is_js() */
			is_equal = _pyfunc_op_equals(old, value2);
		}
		if ((this._Component__initial_mutation === true)) {
			old = value2;
			is_equal = false;
		}
		if ((!_pyfunc_truthy(is_equal))) {
			this.emit(prop_name, {new_value:value2, old_value:old, mutation:mutation});
			return true;
		}
	} else {
		ev = {};
		ev.objects = value;
		ev.mutation = mutation;
		ev.index = index;
		if ((Object.prototype.toString.call(old).slice(8,-1).toLowerCase() === 'object')) {
			if ((!_pyfunc_op_equals(index, (-1)))) {
				throw _pyfunc_op_error('IndexError', "For in-place dict mutations, the index is not used, and must be -1.");
			}
			mutate_dict(old, ev);
		} else {
			if ((index < 0)) {
				throw _pyfunc_op_error('IndexError', "For insert, remove, and replace mutations, the index must be >= 0.");
			}
			mutate_array(old, ev);
		}
		this.emit(prop_name, ev);
		return true;
	}
	return null;
};

$Component._register_reaction = function (event_type, reaction, force) {
	var _, comp1, comp2, i, label, msg, reactions, stub1_, stub2_els, t, type;
	force = (force === undefined) ? false: force;
	stub1_ = _pymeth_partition.call(event_type, ":");
	type = stub1_[0];_ = stub1_[1];label = stub1_[2];
	label = _pyfunc_truthy(label) || reaction._name;
	reactions = _pymeth_get.call(this._Component__handlers, type, null);
	if ((reactions === null)) {
		reactions = [];
		this._Component__handlers[type] = reactions;
		if (_pyfunc_truthy(force)) {
		} else if (_pymeth_startswith.call(type, "mouse_")) {
			t = "The event \"{}\" has been renamed to \"pointer{}\".";
			logger.warn(_pymeth_format.call(t, type, type.slice(5)));
		} else {
			msg = ("Event type \"{type}\" does not exist on component {id}. ") + ("Use \"!{type}\" or \"!xx.yy.{type}\" to suppress this warning.");
			msg = _pymeth_replace.call(_pymeth_replace.call(msg, "{type}", type), "{id}", this._id);
			logger.warn(msg);
		}
	}
	comp1 = _pyfunc_op_add((label + "-"), reaction._id);
	stub2_els = true;
	for (i = 0; i < reactions.length; i += 1) {
		comp2 = _pyfunc_op_add(((reactions[i][0]) + "-"), ((reactions[i][1])._id));
		if ((comp1 < comp2)) {
			_pymeth_insert.call(reactions, i, [label, reaction]);
			stub2_els = false; break;
		} else if (_pyfunc_op_equals(comp1, comp2)) {
			stub2_els = false; break;
		}
	} if (stub2_els) {
		_pymeth_append.call(reactions, [label, reaction]);
	}
	this._registered_reactions_hook();
	return null;
};

$Component._registered_reactions_hook = function () {
	var key, reactions, stub1_seq, used_event_types;
	used_event_types = [];
	stub1_seq = this._Component__handlers;
	for (key in stub1_seq) {
		if (!stub1_seq.hasOwnProperty(key)){ continue; }
		reactions = stub1_seq[key];
		if ((reactions.length > 0)) {
			_pymeth_append.call(used_event_types, key);
		}
	}
	return used_event_types;
};

$Component.disconnect = function (type, reaction) {
	var _, entry, i, label, reactions, stub1_;
	reaction = (reaction === undefined) ? null: reaction;
	stub1_ = _pymeth_partition.call(type, ":");
	type = stub1_[0];_ = stub1_[1];label = stub1_[2];
	reactions = _pymeth_get.call(this._Component__handlers, type, []);
	for (i = reactions.length - 1; i > -1; i += -1) {
		entry = reactions[i];
		if ((!(((_pyfunc_truthy(label) && ((!_pyfunc_op_equals(label, entry[0]))))) || (_pyfunc_truthy(reaction) && (reaction !== entry[1]))))) {
			_pymeth_pop.call(reactions, i);
		}
	}
	this._registered_reactions_hook();
	return null;
};

$Component.dispose = function () {
	this._dispose();
	return null;
};

$Component.emit = function (type, info) {
	var _, err_2, ev, i, index, label, reaction, reactions, stub1_, stub2_;
	info = (info === undefined) ? null: info;
	info = ((info === null))? (({})) : (info);
	stub1_ = _pymeth_partition.call(type, ":");
	type = stub1_[0];_ = stub1_[1];label = stub1_[2];
	if (label.length) {
		throw _pyfunc_op_error('ValueError', "The type given to emit() should not include a label.");
	}
	if ((!(Object.prototype.toString.call(info).slice(8,-1).toLowerCase() === 'object'))) {
		throw _pyfunc_op_error('TypeError', (_pymeth_format.call("Info object (for {!r}) must be a dict, not {!r}", type, info)));
	}
	ev = _pyfunc_dict(info);
	ev.type = type;
	ev.source = this;
	if ((this._Component__pending_events !== null)) {
		_pymeth_append.call(this._Component__pending_events, ev);
	} else {
		reactions = _pymeth_get.call(this._Component__handlers, ev.type, []);
		for (i = 0; i < reactions.length; i += 1) {
			stub2_ = reactions[i];
			label = stub2_[0];reaction = stub2_[1];
			if (_pymeth_startswith.call(label, "reconnect_")) {
				if ((_pyfunc_getattr(ev, "allow_reconnect", true) === true)) {
					index = _pyfunc_int((_pymeth_split.call(label, "_")[_pymeth_split.call(label, "_").length -1]));
					reaction.reconnect(index);
				}
			} else {
				loop.add_reaction_event(reaction, ev);
			}
		}
	}
	return ev;
};

$Component.get_event_handlers = function (type) {
	var _, err_2, label, reactions, stub1_;
	if ((!_pyfunc_truthy(type))) {
		throw _pyfunc_op_error('TypeError', ("get_event_handlers() missing \"type\" argument."));
	}
	stub1_ = _pymeth_partition.call(type, ":");
	type = stub1_[0];_ = stub1_[1];label = stub1_[2];
	if (label.length) {
		throw _pyfunc_op_error('ValueError', "The type given to get_event_handlers() should not include a label.");
	}
	reactions = _pymeth_get.call(this._Component__handlers, type, []);
	return (function list_comprehension (iter0) {var res = [];var h, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {h = iter0[i0];{res.push(h[1]);}}return res;}).call(this, reactions);
};

$Component.get_event_types = function () {
	var types;
	types = _pyfunc_list(this._Component__handlers);
	_pymeth_sort.call(types, undefined, false);
	return types;
};

$Component.init = function () {
	return null;
};
var Property = function () {};
Property.prototype._validate = function(value, name, data) {return value;};
var AnyProp;
AnyProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
AnyProp.prototype = Object.create(Property.prototype);
AnyProp.prototype._base_class = Property.prototype;
AnyProp.prototype.__name__ = "AnyProp";


var BoolProp;
BoolProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
BoolProp.prototype = Object.create(Property.prototype);
BoolProp.prototype._base_class = Property.prototype;
BoolProp.prototype.__name__ = "BoolProp";

BoolProp.prototype._default = false;
BoolProp.prototype._validate = function (value, name, data) {
	return _pyfunc_bool(value);
};


var ColorProp;
ColorProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
ColorProp.prototype = Object.create(Property.prototype);
ColorProp.prototype._base_class = Property.prototype;
ColorProp.prototype.__name__ = "ColorProp";

ColorProp.prototype._default = "#000";
ColorProp.prototype._validate = function (value, name, data) {
	var M, Mi, blackfactor, common_colors, d, err_2, err_3, hex, i, stub10_, stub10_c, stub10_i0, stub10_iter0, stub1_, stub2_, stub3_, stub4_, stub5_, stub5_i, stub5_i0, stub5_iter0, stub6_, stub6_i, stub6_i0, stub6_iter0, stub7_, stub7_i0, stub7_iter0, stub7_x, stub8_, stub8_i0, stub8_iter0, stub8_v, stub9_, stub9_i0, stub9_iter0, stub9_v, val, whitefactor;
	val = value;
	common_colors = ({k: "#000000", black: "#000000", w: "#ffffff", white: "#ffffff", r: "#ff0000", red: "#ff0000", g: "#00ff00", green: "#00ff00", lime: "#00ff00", b: "#0000ff", blue: "#0000ff", y: "#ffff00", yellow: "#ffff00", m: "#ff00ff", magenta: "#ff00ff", fuchsia: "#ff00ff", c: "#00ffff", cyan: "#00ffff", aqua: "#00ffff", gray: "#808080", grey: "#808080"});
	common_colors[""] = "#0000";
	M = _pyfunc_create_dict("0", 0, "1", 1, "2", 2, "3", 3, "4", 4, "5", 5, "6", 6, "7", 7, "8", 8, "9", 9, "a", 10, "b", 11, "c", 12, "d", 13, "e", 14, "f", 15);
	Mi = "0123456789abcdef";
	if ((Object.prototype.toString.call(val).slice(8,-1).toLowerCase() === 'string')) {
		val = _pymeth_lower.call(val);
		whitefactor = 0.0;
		blackfactor = 0.0;
		if (_pymeth_startswith.call(val, "darker")) {
			stub1_ = [0.66, val.slice(6)];
			blackfactor = stub1_[0];val = stub1_[1];
		} else if (_pymeth_startswith.call(val, "dark")) {
			stub2_ = [0.33, val.slice(4)];
			blackfactor = stub2_[0];val = stub2_[1];
		} else if (_pymeth_startswith.call(val, "lighter")) {
			stub3_ = [0.66, val.slice(7)];
			whitefactor = stub3_[0];val = stub3_[1];
		} else if (_pymeth_startswith.call(val, "light")) {
			stub4_ = [0.33, val.slice(5)];
			whitefactor = stub4_[0];val = stub4_[1];
		}
		val = _pymeth_get.call(common_colors, val, val);
		if ((((_pymeth_startswith.call(val, "#") && (val.length == 4))) || (val.length == 5))) {
			stub5_ = [];stub5_iter0 = _pyfunc_range(1, val.length, 1);if ((typeof stub5_iter0 === "object") && (!Array.isArray(stub5_iter0))) {stub5_iter0 = Object.keys(stub5_iter0);}for (stub5_i0=0; stub5_i0<stub5_iter0.length; stub5_i0++) {stub5_i = stub5_iter0[stub5_i0];{stub5_.push(_pyfunc_op_mult(_pymeth_get.call(M, val[stub5_i], 0), 17));}}
			val = stub5_;
		} else if ((((_pymeth_startswith.call(val, "#") && (val.length == 7))) || (val.length == 9))) {
			stub6_ = [];stub6_iter0 = _pyfunc_range(1, val.length, 2);if ((typeof stub6_iter0 === "object") && (!Array.isArray(stub6_iter0))) {stub6_iter0 = Object.keys(stub6_iter0);}for (stub6_i0=0; stub6_i0<stub6_iter0.length; stub6_i0++) {stub6_i = stub6_iter0[stub6_i0];{stub6_.push(_pyfunc_op_add((_pyfunc_op_mult(_pymeth_get.call(M, val[stub6_i], 0), 16)), _pymeth_get.call(M, val[stub6_i + 1], 0)));}}
			val = stub6_;
		} else if (_pyfunc_truthy(_pymeth_startswith.call(val, "rgb(") || _pymeth_startswith.call(val, "rgba("))) {
			stub7_ = [];stub7_iter0 = _pymeth_split.call(val.slice(4,-1), ",");if ((typeof stub7_iter0 === "object") && (!Array.isArray(stub7_iter0))) {stub7_iter0 = Object.keys(stub7_iter0);}for (stub7_i0=0; stub7_i0<stub7_iter0.length; stub7_i0++) {stub7_x = stub7_iter0[stub7_i0];{stub7_.push(_pyfunc_float((_pymeth_strip.call(stub7_x, " ,();"))));}}
			val = stub7_;
			if ((val.length == 4)) {
				val[val.length -1] = _pyfunc_op_mult(val[val.length -1], 255);
			}
		} else {
			throw _pyfunc_op_error('ValueError', _pymeth_format.call("ColorProp {!r} got invalid color: {!r}", name, value));
		}
		stub8_ = [];stub8_iter0 = val;if ((typeof stub8_iter0 === "object") && (!Array.isArray(stub8_iter0))) {stub8_iter0 = Object.keys(stub8_iter0);}for (stub8_i0=0; stub8_i0<stub8_iter0.length; stub8_i0++) {stub8_v = stub8_iter0[stub8_i0];{stub8_.push(stub8_v / 255);}}
		val = stub8_;
		for (i = 0; i < 3; i += 1) {
			val[i] = _pyfunc_op_add((_pyfunc_op_mult((1.0 - whitefactor), val[i])), whitefactor);
			val[i] = (_pyfunc_op_mult((1.0 - blackfactor), val[i])) + 0;
		}
	}
	if ((val === null)) {
		val = [0, 0, 0, 0];
	} else if ((((Object.prototype.toString.call(val).slice(8,-1).toLowerCase() === 'object')) && _pyfunc_op_contains("t", val))) {
		val = val["t"];
	}
	if ((!Array.isArray(val))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("ColorProp {!r} value must be str or tuple.", name));
	}
	stub9_ = [];stub9_iter0 = val;if ((typeof stub9_iter0 === "object") && (!Array.isArray(stub9_iter0))) {stub9_iter0 = Object.keys(stub9_iter0);}for (stub9_i0=0; stub9_i0<stub9_iter0.length; stub9_i0++) {stub9_v = stub9_iter0[stub9_i0];{stub9_.push(Math.max((Math.min(_pyfunc_float(stub9_v), 1.0)), 0.0));}}
	val = stub9_;
	if ((val.length == 3)) {
		val = _pyfunc_op_add(val, [1.0]);
	} else if (_pyfunc_truthy(val.length != 4)) {
		throw _pyfunc_op_error('ValueError', _pymeth_format.call("ColorProp {!r} value must have 3 or 4 elements, not {:i}", name, val.length));
	}
	val = _pyfunc_list(val);
	if (true) { /* if this_is_js() */
		val.push = undefined;
		val.splice = undefined;
		val.push = undefined;
		val.reverse = undefined;
		val.sort = undefined;
	}
	if (true) { /* if this_is_js() */
		d = ({});
	}
	d.t = val;
	d.alpha = val[3];
	stub10_ = [];stub10_iter0 = val.slice(0,3);if ((typeof stub10_iter0 === "object") && (!Array.isArray(stub10_iter0))) {stub10_iter0 = Object.keys(stub10_iter0);}for (stub10_i0=0; stub10_i0<stub10_iter0.length; stub10_i0++) {stub10_c = stub10_iter0[stub10_i0];{stub10_.push(_pyfunc_int(_pyfunc_op_mult(stub10_c, 255)));}}
	hex = stub10_;
	d.hex = "#" + (_pymeth_join.call("", ((function list_comprehension (iter0) {var res = [];var c, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {c = iter0[i0];{res.push(_pyfunc_op_add(Mi[_pyfunc_int((c / 16))], Mi[c % 16]));}}return res;}).call(this, hex))));
	d.css = _pymeth_format.call("rgba({:.0f},{:.0f},{:.0f},{:g})", _pyfunc_op_mult(val[0], 255), _pyfunc_op_mult(val[1], 255), _pyfunc_op_mult(val[2], 255), val[3]);
	return d;
};


var ComponentProp;
ComponentProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
ComponentProp.prototype = Object.create(Property.prototype);
ComponentProp.prototype._base_class = Property.prototype;
ComponentProp.prototype.__name__ = "ComponentProp";

ComponentProp.prototype._default = null;
ComponentProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!((value === null) || _pyfunc_hasattr(value, "_IS_COMPONENT")))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("Component property {!r} cannot accept {!r}.", name, value));
	}
	return value;
};


var DictProp;
DictProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
DictProp.prototype = Object.create(Property.prototype);
DictProp.prototype._base_class = Property.prototype;
DictProp.prototype.__name__ = "DictProp";

DictProp.prototype._default = ({});
DictProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!(Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'object'))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("Dict property {!r} cannot accept {!r}.", name, value));
	}
	return _pymeth_copy.call(value);
};


var EnumProp;
EnumProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
EnumProp.prototype = Object.create(Property.prototype);
EnumProp.prototype._base_class = Property.prototype;
EnumProp.prototype.__name__ = "EnumProp";

EnumProp.prototype._default = "";
EnumProp.prototype._consume_args = function (options) {
	var args, err_2;
	args = Array.prototype.slice.call(arguments, 1);
	if ((!Array.isArray(options))) {
		throw _pyfunc_op_error('TypeError', "EnumProp needs list of options");
	}
	if ((!(_pyfunc_all(((function list_comprehension (iter0) {var res = [];var i, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {i = iter0[i0];{res.push(Object.prototype.toString.call(i).slice(8,-1).toLowerCase() === 'string');}}return res;}).call(this, options)))))) {
		throw _pyfunc_op_error('TypeError', "EnumProp options must be str");
	}
	if ((!_pyfunc_truthy(args))) {
		args = [options[0]];
	}
	this._set_data((function list_comprehension (iter0) {var res = [];var option, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {option = iter0[i0];{res.push(_pymeth_upper.call(option));}}return res;}).call(this, options));
	EnumProp.prototype._base_class._consume_args.apply(this, args);
	return null;
};

EnumProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!(Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'string'))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("EnumProp {!r} value must be str.", name));
	}
	value = _pymeth_upper.call(value);
	if ((!_pyfunc_op_contains(_pymeth_upper.call(value), data))) {
		throw _pyfunc_op_error('ValueError', _pymeth_format.call("Invalid value for enum {!r}: {}", name, value));
	}
	return value;
};


var FloatPairProp;
FloatPairProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
FloatPairProp.prototype = Object.create(Property.prototype);
FloatPairProp.prototype._base_class = Property.prototype;
FloatPairProp.prototype.__name__ = "FloatPairProp";

FloatPairProp.prototype._default = [0.0, 0.0];
FloatPairProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!Array.isArray(value))) {
		value = [value, value];
	}
	if (_pyfunc_truthy(value.length != 2)) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("FloatPair property {!r} needs a scalar or two values, not {:i}", name, value.length));
	}
	if ((!(Object.prototype.toString.call(value[0]).slice(8,-1).toLowerCase() === 'number'))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("FloatPair {!r} 1st value cannot be {!r}.", name, value[0]));
	}
	if ((!(Object.prototype.toString.call(value[1]).slice(8,-1).toLowerCase() === 'number'))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("FloatPair {!r} 2nd value cannot be {!r}.", name, value[1]));
	}
	value = [_pyfunc_float(value[0]), _pyfunc_float(value[1])];
	if (true) { /* if this_is_js() */
		value.push = undefined;
		value.splice = undefined;
		value.push = undefined;
		value.reverse = undefined;
		value.sort = undefined;
	}
	return value;
};


var FloatProp;
FloatProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
FloatProp.prototype = Object.create(Property.prototype);
FloatProp.prototype._base_class = Property.prototype;
FloatProp.prototype.__name__ = "FloatProp";

FloatProp.prototype._default = 0.0;
FloatProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((((Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'number')) || (Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'string'))) {
		return _pyfunc_float(value);
	} else {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("Float property {!r} cannot accept {!r}.", name, value));
	}
	return null;
};


var IntProp;
IntProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
IntProp.prototype = Object.create(Property.prototype);
IntProp.prototype._base_class = Property.prototype;
IntProp.prototype.__name__ = "IntProp";

IntProp.prototype._default = 0;
IntProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((((Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'number')) || ((Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'boolean')) || (Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'string'))) {
		return _pyfunc_int(value);
	} else {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("Int property {!r} cannot accept {!r}.", name, value));
	}
	return null;
};


var ListProp;
ListProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
ListProp.prototype = Object.create(Property.prototype);
ListProp.prototype._base_class = Property.prototype;
ListProp.prototype.__name__ = "ListProp";

ListProp.prototype._default = [];
ListProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!Array.isArray(value))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("List property {!r} cannot accept {!r}.", name, value));
	}
	return _pyfunc_list(value);
};


var StringProp;
StringProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
StringProp.prototype = Object.create(Property.prototype);
StringProp.prototype._base_class = Property.prototype;
StringProp.prototype.__name__ = "StringProp";

StringProp.prototype._default = "";
StringProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!(Object.prototype.toString.call(value).slice(8,-1).toLowerCase() === 'string'))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("String property {!r} cannot accept {!r}.", name, value));
	}
	return value;
};


var TriStateProp;
TriStateProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
TriStateProp.prototype = Object.create(Property.prototype);
TriStateProp.prototype._base_class = Property.prototype;
TriStateProp.prototype.__name__ = "TriStateProp";

TriStateProp.prototype._default = null;
TriStateProp.prototype._validate = function (value, name, data) {
	if ((value === null)) {
		return null;
	}
	return _pyfunc_bool(value);
};


var TupleProp;
TupleProp = function () {
	_pyfunc_op_instantiate(this, arguments);
}
TupleProp.prototype = Object.create(Property.prototype);
TupleProp.prototype._base_class = Property.prototype;
TupleProp.prototype.__name__ = "TupleProp";

TupleProp.prototype._default = [];
TupleProp.prototype._validate = function (value, name, data) {
	var err_2;
	if ((!Array.isArray(value))) {
		throw _pyfunc_op_error('TypeError', _pymeth_format.call("Tuple property {!r} cannot accept {!r}.", name, value));
	}
	value = _pyfunc_list(value);
	if (true) { /* if this_is_js() */
		value.push = undefined;
		value.splice = undefined;
		value.push = undefined;
		value.reverse = undefined;
		value.sort = undefined;
	}
	return value;
};


var event = {}; // convenience "module emulator"
event.Property = Property;
event.AnyProp = AnyProp;
event.BoolProp = BoolProp;
event.ColorProp = ColorProp;
event.ComponentProp = ComponentProp;
event.DictProp = DictProp;
event.EnumProp = EnumProp;
event.FloatPairProp = FloatPairProp;
event.FloatProp = FloatProp;
event.IntProp = IntProp;
event.ListProp = ListProp;
event.StringProp = StringProp;
event.TriStateProp = TriStateProp;
event.TupleProp = TupleProp;

return {Component: Component, loop: loop, logger: logger, Property: Property, AnyProp: AnyProp, BoolProp: BoolProp, TriStateProp: TriStateProp, IntProp: IntProp, FloatProp: FloatProp, StringProp: StringProp, TupleProp: TupleProp, ListProp: ListProp, DictProp: DictProp, ComponentProp: ComponentProp, FloatPairProp: FloatPairProp, EnumProp: EnumProp, ColorProp: ColorProp};
});


/* ======================= flexx.app._clientcore ========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.app._clientcore", ["pscript-std.js"], function (_py) {

"use strict";

var _pyfunc_format = _py._pyfunc_format, _pyfunc_op_add = _py._pyfunc_op_add, _pyfunc_op_contains = _py._pyfunc_op_contains, _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_op_error = _py._pyfunc_op_error, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_range = _py._pyfunc_range, _pyfunc_reversed = _py._pyfunc_reversed, _pyfunc_str = _py._pyfunc_str, _pyfunc_time = _py._pyfunc_time, _pyfunc_truthy = _py._pyfunc_truthy;

var _pymeth_count = _py._pymeth_count, _pymeth_format = _py._pymeth_format, _pymeth_get = _py._pymeth_get, _pymeth_join = _py._pymeth_join, _pymeth_pop = _py._pymeth_pop, _pymeth_replace = _py._pymeth_replace, _pymeth_split = _py._pymeth_split, _pymeth_splitlines = _py._pymeth_splitlines;





var Flexx, JsSession, __pscript__, bsdf, serializer;
"\nThe client's core Flexx engine, implemented in PScript.\n";
__pscript__ = true;
Flexx = function () {
    _pyfunc_op_instantiate(this, arguments);
}
Flexx.prototype._base_class = Object;
Flexx.prototype.__name__ = "Flexx";

Flexx.prototype.__init__ = function () {
    var err_2, key, stub1_seq;
    if (_pyfunc_truthy(window.flexx.init)) {
        throw _pyfunc_op_error('RuntimeError', "Should not create global Flexx object more than once.");
    }
    this.is_notebook = false;
    this.is_exported = false;
    stub1_seq = window.flexx;
    for (key in stub1_seq) {
        if (!stub1_seq.hasOwnProperty(key)){ continue; }
        this[key] = window.flexx[key];
    }
    this.need_main_widget = true;
    this._session_count = 0;
    this.sessions = ({});
    window.addEventListener("load", this.init, false);
    window.addEventListener("unload", this.exit, false);
    return null;
};

Flexx.prototype.init = function () {
    this.asset_node = window.document.createElement("div");
    this.asset_node.id = "Flexx asset container";
    window.document.body.appendChild(this.asset_node);
    if (_pyfunc_truthy(this.is_exported)) {
        if (_pyfunc_truthy(this.is_notebook)) {
            console.log("Flexx: I am in an exported notebook!");
        } else {
            console.log("Flexx: I am in an exported app!");
            this.run_exported_app();
        }
    } else {
        console.log("Flexx: Initializing");
        if ((!_pyfunc_truthy(this.is_notebook))) {
            this._remove_querystring();
        }
        this.init_logging();
    }
    return null;
};

Flexx.prototype._remove_querystring = function () {
    try {
        window.history.replaceState(window.history.state, "", window.location.pathname);
    } catch(err_2) {
        {
        }
    }
    return null;
};

Flexx.prototype.exit = function () {
    var session, stub2_seq;
    stub2_seq = this.sessions;
    for (session in stub2_seq) {
        if (!stub2_seq.hasOwnProperty(session)){ continue; }
        session = stub2_seq[session];
        session.exit();
    }
    return null;
};

Flexx.prototype.spin = function (n) {
    n = (n === undefined) ? 1: n;
    var el = window.document.getElementById('flexx-spinner');
    if (el) {
        if (n === null) {  // Hide the spinner overlay, now or in a bit
            if (el.children[0].innerHTML.indexOf('limited') > 0) {
                setTimeout(function() { el.style.display = 'none'; }, 2000);
            } else {
                el.style.display = 'none';
            }
        } else {
            for (var i=0; i<n; i++) { el.children[1].innerHTML += '&#9632'; }
        }
    };
    return null;
};

Flexx.prototype.init_logging = function () {
    var error, info, log, on_error, warn;
    if (_pyfunc_truthy(window.console.ori_log)) {
        return null;
    }
    window.console.ori_log = window.console.log;
    window.console.ori_info = _pyfunc_truthy(window.console.info) || window.console.log;
    window.console.ori_warn = _pyfunc_truthy(window.console.warn) || window.console.log;
    window.console.ori_error = _pyfunc_truthy(window.console.error) || window.console.log;
    log = (function flx_log (msg) {
        var session, stub3_seq;
        window.console.ori_log(msg);
        stub3_seq = this.sessions;
        for (session in stub3_seq) {
            if (!stub3_seq.hasOwnProperty(session)){ continue; }
            session = stub3_seq[session];
            session.send_command("PRINT", _pyfunc_str(msg));
        }
        return null;
    }).bind(this);

    info = (function flx_info (msg) {
        var session, stub4_seq;
        window.console.ori_info(msg);
        stub4_seq = this.sessions;
        for (session in stub4_seq) {
            if (!stub4_seq.hasOwnProperty(session)){ continue; }
            session = stub4_seq[session];
            session.send_command("INFO", _pyfunc_str(msg));
        }
        return null;
    }).bind(this);

    warn = (function flx_warn (msg) {
        var session, stub5_seq;
        window.console.ori_warn(msg);
        stub5_seq = this.sessions;
        for (session in stub5_seq) {
            if (!stub5_seq.hasOwnProperty(session)){ continue; }
            session = stub5_seq[session];
            session.send_command("WARN", _pyfunc_str(msg));
        }
        return null;
    }).bind(this);

    error = (function flx_error (msg) {
        var evt;
        evt = {message:_pyfunc_str(msg), error:msg, preventDefault:((function () {return null;}).bind(this))};
        on_error(evt);
        return null;
    }).bind(this);

    on_error = (function flx_on_error (evt) {
        this._handle_error(evt);
        return null;
    }).bind(this);

    on_error = on_error.bind(this);
    window.console.log = log;
    window.console.info = info;
    window.console.warn = warn;
    window.console.error = error;
    window.addEventListener("error", on_error, false);
    return null;
};

Flexx.prototype.create_session = function (app_name, session_id, ws_url) {
    var s;
    if (_pyfunc_truthy(this._validate_browser_capabilities())) {
        s = new JsSession(app_name, session_id, ws_url);
        this._session_count = _pyfunc_op_add(this._session_count, 1);
        this["s" + this._session_count] = s;
        this.sessions[session_id] = s;
    }
    return null;
};

Flexx.prototype._validate_browser_capabilities = function () {
    var el = window.document.getElementById('flexx-spinner');
    if (    window.WebSocket === undefined || // IE10+
            Object.keys === undefined || // IE9+
            false
       ) {
        var msg = ('Flexx does not support this browser.<br>' +
                   'Try Firefox, Chrome, ' +
                   'or a more recent version of the current browser.');
        if (el) { el.children[0].innerHTML = msg; }
        else { window.alert(msg); }
        return false;
    } else if (''.startsWith === undefined) { // probably IE
        var msg = ('Flexx support for this browser is limited.<br>' +
                   'Consider using Firefox, Chrome, or maybe Edge.');
        if (el) { el.children[0].innerHTML = msg; }
        return true;
    } else {
        return true;
    };
    return null;
};

Flexx.prototype._handle_error = function (evt) {
    var i, msg, session, session_needle, short_msg, stack, stub10_seq, stub11_itr, stub12_seq, stub13_itr, stub14_seq, stub6_seq, stub7_itr, stub8_seq, stub9_itr, x;
    msg = short_msg = evt.message;
    if ((!_pyfunc_truthy(window.evt))) {
        window.evt = evt;
    }
    if ((_pyfunc_truthy(evt.error) && _pyfunc_truthy(evt.error.stack))) {
        stack = _pymeth_splitlines.call(evt.error.stack);
        session_needle = "?session_id=" + this.id;
        for (i = 0; i < stack.length; i += 1) {
            stack[i] = _pymeth_replace.call(_pymeth_replace.call(stack[i], "@", " @ "), session_needle, "");
        }
        stub6_seq = [evt.message, "_pyfunc_op_error"];
        if ((typeof stub6_seq === "object") && (!Array.isArray(stub6_seq))) { stub6_seq = Object.keys(stub6_seq);}
        for (stub7_itr = 0; stub7_itr < stub6_seq.length; stub7_itr += 1) {
            x = stub6_seq[stub7_itr];
            if (_pyfunc_op_contains(x, stack[0])) {
                _pymeth_pop.call(stack, 0);
            }
        }
        for (i = 0; i < stack.length; i += 1) {
            stub8_seq = ["_process_actions", "_process_reactions", "_process_calls"];
            if ((typeof stub8_seq === "object") && (!Array.isArray(stub8_seq))) { stub8_seq = Object.keys(stub8_seq);}
            for (stub9_itr = 0; stub9_itr < stub8_seq.length; stub9_itr += 1) {
                x = stub8_seq[stub9_itr];
                if ((_pyfunc_op_contains(("Loop." + x), stack[i]))) {
                    stack = stack.slice(0,i);
                    break;
                }
            }
        }
        stub12_seq = _pyfunc_reversed(_pyfunc_range(0, stack.length, 1));
        if ((typeof stub12_seq === "object") && (!Array.isArray(stub12_seq))) { stub12_seq = Object.keys(stub12_seq);}
        for (stub13_itr = 0; stub13_itr < stub12_seq.length; stub13_itr += 1) {
            i = stub12_seq[stub13_itr];
            stub10_seq = ["flx_action "];
            if ((typeof stub10_seq === "object") && (!Array.isArray(stub10_seq))) { stub10_seq = Object.keys(stub10_seq);}
            for (stub11_itr = 0; stub11_itr < stub10_seq.length; stub11_itr += 1) {
                x = stub10_seq[stub11_itr];
                if ((_pyfunc_truthy(stack[i]) && _pymeth_count.call(stack[i], x))) {
                    _pymeth_pop.call(stack, i);
                }
            }
        }
        msg = _pyfunc_op_add(msg, "\n" + _pymeth_join.call("\n", stack));
    } else if ((_pyfunc_truthy(evt.message) && _pyfunc_truthy(evt.lineno))) {
        msg = _pyfunc_op_add(msg, _pymeth_format.call("\nIn {}:{:i}", evt.filename, evt.lineno));
    }
    evt.preventDefault();
    window.console.ori_error(msg);
    stub14_seq = this.sessions;
    for (session in stub14_seq) {
        if (!stub14_seq.hasOwnProperty(session)){ continue; }
        session = stub14_seq[session];
        session.send_command("ERROR", short_msg);
    }
    return null;
};


JsSession = function () {
    _pyfunc_op_instantiate(this, arguments);
}
JsSession.prototype._base_class = Object;
JsSession.prototype.__name__ = "JsSession";

JsSession.prototype.__init__ = function (app_name, id, ws_url) {
    var config, err, jconfig;
    ws_url = (ws_url === undefined) ? null: ws_url;
    this.app = null;
    this.app_name = app_name;
    this.id = id;
    this.status = 1;
    this.ws_url = ws_url;
    this._component_counter = 0;
    this._disposed_ob = ({_disposed: true});
    if ((!_pyfunc_truthy(this.id))) {
        jconfig = window.document.getElementById("jupyter-config-data");
        if (_pyfunc_truthy(jconfig)) {
            try {
                config = JSON.parse(jconfig.innerText);
                this.id = config.flexx_session_id;
                this.app_name = config.flexx_app_name;
            } catch(err_4) {
                {
                    err = err_4;
                    console.log(err);
                }
            }
        }
    }
    this._init_time = _pyfunc_time();
    this._pending_commands = [];
    this._asset_count = 0;
    this._ws = null;
    this.last_msg = null;
    this.instances = ({});
    this.instances_to_check_size = ({});
    if ((!_pyfunc_truthy(window.flexx.is_exported))) {
        this.init_socket();
    }
    window.addEventListener("resize", this._check_size_of_objects, false);
    window.setInterval(this._check_size_of_objects, 1000);
    return null;
};

JsSession.prototype.exit = function () {
    if (_pyfunc_truthy(this._ws)) {
        this._ws.close();
        this._ws = null;
        this.status = 0;
    }
    return null;
};

JsSession.prototype.send_command = function () {
    var bb, command, err;
    command = Array.prototype.slice.call(arguments);
    if ((this._ws !== null)) {
        try {
            bb = serializer.encode(command);
        } catch(err_3) {
            {
                err = err_3;
                console.log("Command that failed to encode:");
                console.log(command);
                throw err;
            }
        }
        this._ws.send(bb);
    }
    return null;
};

JsSession.prototype.instantiate_component = function (module, cname, id, args, kwargs, active_components) {
    var Cls, ac, c, m, stub15_seq, stub16_itr, stub17_seq, stub18_itr;
    c = _pymeth_get.call(this.instances, id, null);
    if (((c !== null) && (c._disposed === false))) {
        return c;
    }
    m = window.flexx.require(module);
    Cls = m[cname];
    kwargs["flx_session"] = this;
    kwargs["flx_id"] = id;
    active_components = _pyfunc_truthy(active_components) || [];
    stub15_seq = active_components;
    if ((typeof stub15_seq === "object") && (!Array.isArray(stub15_seq))) { stub15_seq = Object.keys(stub15_seq);}
    for (stub16_itr = 0; stub16_itr < stub15_seq.length; stub16_itr += 1) {
        ac = stub15_seq[stub16_itr];
        ac.__enter__();
    }
    try {
        c = new Cls({flx_args: args, flx_kwargs: kwargs});
    } finally {
        stub17_seq = _pyfunc_reversed(active_components);
        if ((typeof stub17_seq === "object") && (!Array.isArray(stub17_seq))) { stub17_seq = Object.keys(stub17_seq);}
        for (stub18_itr = 0; stub18_itr < stub17_seq.length; stub18_itr += 1) {
            ac = stub17_seq[stub18_itr];
            ac.__exit__();
        }
    }
    return c;
};

JsSession.prototype._register_component = function (c, id) {
    id = (id === undefined) ? null: id;
    if ((this.app === null)) {
        this.app = c;
    }
    if ((id === null)) {
        this._component_counter = _pyfunc_op_add(this._component_counter, 1);
        id = (_pyfunc_op_add((c.__name__ + "_"), _pyfunc_str(this._component_counter))) + "js";
    }
    c._id = id;
    c._uid = _pyfunc_op_add((this.id + "_"), id);
    this.instances[c._id] = c;
    return null;
};

JsSession.prototype._unregister_component = function (c) {
    _pymeth_pop.call(this.instances_to_check_size, c.id, null);
    return null;
};

JsSession.prototype.get_component_instance = function (id) {
    if (_pyfunc_op_equals(id, "body")) {
        return window.document.body;
    } else {
        return _pymeth_get.call(this.instances, id, null);
    }
    return null;
};

JsSession.prototype.init_socket = function () {
    var WebSocket, address, err_2, on_ws_close, on_ws_error, on_ws_message, on_ws_open, proto, ws;
    WebSocket = window.WebSocket;
    if ((WebSocket === undefined)) {
        window.document.body.textContent = "Browser does not support WebSockets";
        throw "FAIL: need websocket";
    }
    if ((!_pyfunc_truthy(this.ws_url))) {
        proto = "ws";
        if (_pyfunc_op_equals(window.location.protocol, "https:")) {
            proto = "wss";
        }
        address = window.location.hostname;
        if (_pyfunc_truthy(window.location.port)) {
            address = _pyfunc_op_add(address, ":" + window.location.port);
        }
        this.ws_url = _pymeth_format.call("{}://{}/flexx/ws/{}", proto, address, this.app_name);
    }
    this.ws_url = _pymeth_replace.call(this.ws_url, "0.0.0.0", window.location.hostname);
    this._ws = ws = new WebSocket(this.ws_url);
    ws.binaryType = "arraybuffer";
    this.status = 2;
    on_ws_open = (function flx_on_ws_open (evt) {
        window.console.info("Socket opened with session id " + this.id);
        this.send_command("HI_FLEXX", this.id);
        return null;
    }).bind(this);

    on_ws_message = (function flx_on_ws_message (evt) {
        var msg;
        msg = _pyfunc_truthy(evt.data) || evt;
        if ((this._pending_commands === null)) {
            this._receive_raw_command(msg);
        } else {
            if ((this._pending_commands.length == 0)) {
                window.setTimeout(this._process_commands, 0);
            }
            this._pending_commands.push(msg);
        }
        return null;
    }).bind(this);

    on_ws_close = (function flx_on_ws_close (evt) {
        var msg;
        this._ws = null;
        this.status = 0;
        msg = "Lost connection with server";
        if ((_pyfunc_truthy(evt) && _pyfunc_truthy(evt.reason))) {
            msg = _pyfunc_op_add(msg, _pymeth_format.call(": {} ({:i})", evt.reason, evt.code));
        }
        if ((!_pyfunc_truthy(window.flexx.is_notebook))) {
            window.document.body.textContent = msg;
        } else {
            window.console.info(msg);
        }
        return null;
    }).bind(this);

    on_ws_error = function (evt) {
        this._ws = null;
        this.status = 0;
        window.console.error("Socket error");
        return null;
    };

    ws.onopen = on_ws_open;
    ws.onmessage = on_ws_message;
    ws.onclose = on_ws_close;
    ws.onerror = on_ws_error;
    return null;
};

JsSession.prototype._process_commands = function () {
    var command, err, msg;
    while ((this._pending_commands !== null) && (this._pending_commands.length > 0)) {
        msg = _pymeth_pop.call(this._pending_commands, 0);
        try {
            command = this._receive_raw_command(msg);
        } catch(err_3) {
            {
                err = err_3;
                window.setTimeout(this._process_commands, 0);
                throw err;
            }
        }
        if (_pyfunc_op_equals(command[0], "DEFINE")) {
            this._asset_count = _pyfunc_op_add(this._asset_count, 1);
            if ((_pyfunc_op_equals((this._asset_count % 3), 0))) {
                if (this._pending_commands.length) {
                    window.setTimeout(this._process_commands, 0);
                }
                break;
            }
        }
    }
    return null;
};

JsSession.prototype._receive_raw_command = function (msg) {
    return this._receive_command(serializer.decode(msg));
};

JsSession.prototype._receive_command = function (command) {
    var address, args, c, cmd, code, el, err, eval_id, id, kind, name, ob, stub19_, stub20_, x;
    cmd = command[0];
    if (_pyfunc_op_equals(cmd, "PING")) {
        window.setTimeout(this.send_command, 10, "PONG", command[1]);
    } else if (_pyfunc_op_equals(cmd, "INIT_DONE")) {
        window.flexx.spin(null);
        while (this._pending_commands.length) {
            this._receive_raw_command(_pymeth_pop.call(this._pending_commands, 0));
        }
        this._pending_commands = null;
    } else if (_pyfunc_op_equals(cmd, "PRINT")) {
        (_pyfunc_truthy(window.console.ori_log) || window.console.log)(command[1]);
    } else if (_pyfunc_op_equals(cmd, "EXEC")) {
        eval(command[1]);
    } else if (_pyfunc_op_equals(cmd, "EVAL")) {
        x = null;
        if ((command.length == 2)) {
            x = eval(command[1]);
        } else if ((command.length == 3)) {
            x = eval(_pyfunc_op_add((("this.instances." + command[1]) + "."), command[2]));
        }
        console.log(_pyfunc_str(x));
    } else if (_pyfunc_op_equals(cmd, "EVALANDRETURN")) {
        try {
            x = eval(command[1]);
        } catch(err_3) {
            {
                err = err_3;
                x = _pyfunc_str(err);
            }
        }
        eval_id = command[2];
        this.send_command("EVALRESULT", x, eval_id);
    } else if (_pyfunc_op_equals(cmd, "INVOKE")) {
        stub19_ = command.slice(1);
        id = stub19_[0];name = stub19_[1];args = stub19_[2];
        ob = _pymeth_get.call(this.instances, id, null);
        if ((ob === null)) {
            console.warn(_pymeth_format.call("Cannot invoke {}.{}; session does not know it (anymore).", id, name));
        } else if ((ob._disposed === true)) {
        } else {
            ob[name].apply(ob, args);
        }
    } else if (_pyfunc_op_equals(cmd, "INSTANTIATE")) {
        this.instantiate_component.apply(this, command.slice(1));
    } else if (_pyfunc_op_equals(cmd, "DISPOSE")) {
        id = command[1];
        c = _pymeth_get.call(this.instances, id, null);
        if (((c !== null) && (c._disposed === false))) {
            c._dispose();
        }
        this.send_command("DISPOSE_ACK", command[1]);
        _pymeth_pop.call(this.instances, id, null);
    } else if (_pyfunc_op_equals(cmd, "DISPOSE_ACK")) {
        _pymeth_pop.call(this.instances, command[1], null);
    } else if (_pyfunc_op_equals(cmd, "DEFINE")) {
        stub20_ = command.slice(1);
        kind = stub20_[0];name = stub20_[1];code = stub20_[2];
        window.flexx.spin();
        address = _pyfunc_op_add((window.location.protocol + "//"), (_pymeth_split.call(this.ws_url, "/")[2]));
        code = _pyfunc_op_add(code, _pymeth_format.call("\n//# sourceURL={}/flexx/assets/shared/{}\n", address, name));
        if (_pyfunc_op_equals(kind, "JS-EVAL")) {
            eval(code);
        } else if (_pyfunc_op_equals(kind, "JS")) {
            el = window.document.createElement("script");
            el.id = name;
            el.innerHTML = code;
            window.flexx.asset_node.appendChild(el);
        } else if (_pyfunc_op_equals(kind, "CSS")) {
            el = window.document.createElement("style");
            el.type = "text/css";
            el.id = name;
            el.innerHTML = code;
            window.flexx.asset_node.appendChild(el);
        } else {
            window.console.error((_pyfunc_op_add((("Dont know how to DEFINE " + name) + (" with \"")), kind)) + ("\"."));
        }
    } else if (_pyfunc_op_equals(cmd, "OPEN")) {
        window.win1 = window.open(command[1], "new", "chrome");
    } else {
        window.console.error((("Invalid command: \"") + cmd) + ("\""));
    }
    return command;
};

JsSession.prototype.call_after_roundtrip = function (callback) {
    var args, ping_to_schedule_at;
    args = Array.prototype.slice.call(arguments, 1);
    ping_to_schedule_at = this._ping_counter + 1;
    if (((this._ping_calls.length == 0) || ((this._ping_calls[this._ping_calls.length -1][0]) < ping_to_schedule_at))) {
        window.setTimeout(this._send_ping, 0);
    }
    this._ping_calls.push([ping_to_schedule_at, callback, args]);
    return null;
};

JsSession.prototype._send_ping = function () {
    this._ping_counter = _pyfunc_op_add(this._ping_counter, 1);
    this.send_command("PING", this._ping_counter);
    return null;
};

JsSession.prototype._receive_pong = function (count) {
    var _, args, callback, stub21_;
    while ((this._ping_calls.length > 0) && (((this._ping_calls[0][0]) <= count))) {
        stub21_ = _pymeth_pop.call(this._ping_calls, 0);
        _ = stub21_[0];callback = stub21_[1];args = stub21_[2];
        window.setTimeout.apply(window, [].concat([callback, 0], args));
    }
    return null;
};

JsSession.prototype.keep_checking_size_of = function (ob, check) {
    check = (check === undefined) ? true: check;
    if (_pyfunc_truthy(check)) {
        this.instances_to_check_size[ob.id] = ob;
    } else {
        _pymeth_pop.call(this.instances_to_check_size, ob.id, null);
    }
    return null;
};

JsSession.prototype._check_size_of_objects = function () {
    var ob, stub22_seq;
    stub22_seq = this.instances_to_check_size;
    for (ob in stub22_seq) {
        if (!stub22_seq.hasOwnProperty(ob)){ continue; }
        ob = stub22_seq[ob];
        if ((ob._disposed === false)) {
            ob.check_real_size();
        }
    }
    return null;
};


if (true) { /* if this_is_js() */
    window.flexx = new Flexx();
    bsdf = flexx.require('bsdf');
    serializer = new bsdf.BsdfSerializer();
    window.flexx.serializer = serializer;
}

return {Flexx: Flexx, JsSession: JsSession, bsdf: bsdf, serializer: serializer};
});


/* ======================= flexx.app._component2 ========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.app._component2", ["pscript-std.js", "flexx.event.js", "flexx.app._clientcore"], function (_py, event, flexx$app$_clientcore) {

"use strict";

var _pyfunc_format = _py._pyfunc_format, _pyfunc_getattr = _py._pyfunc_getattr, _pyfunc_hasattr = _py._pyfunc_hasattr, _pyfunc_op_add = _py._pyfunc_op_add, _pyfunc_op_contains = _py._pyfunc_op_contains, _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_op_error = _py._pyfunc_op_error, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_op_parse_kwargs = _py._pyfunc_op_parse_kwargs, _pyfunc_setattr = _py._pyfunc_setattr, _pyfunc_truthy = _py._pyfunc_truthy;

var _pymeth_append = _py._pymeth_append, _pymeth_format = _py._pymeth_format, _pymeth_get = _py._pymeth_get, _pymeth_keys = _py._pymeth_keys, _pymeth_pop = _py._pymeth_pop;

var serializer = flexx$app$_clientcore.serializer;

var serializer = flexx$app$_clientcore.serializer;

var logger = event.logger;

var loop = event.loop;

var Component = event.Component;

var LocalProperty = event.LocalProperty;

var Property = event.Property;





var LocalProperty;
LocalProperty = function () {
    _pyfunc_op_instantiate(this, arguments);
}
LocalProperty.prototype = Object.create(Property.prototype);
LocalProperty.prototype._base_class = Property.prototype;
LocalProperty.prototype.__name__ = "LocalProperty";



var BaseAppComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
BaseAppComponent.prototype = Object.create(Component.prototype);
BaseAppComponent.prototype._base_class = Component.prototype;
BaseAppComponent.prototype.__name__ = "BaseAppComponent";
var $BaseAppComponent = BaseAppComponent.prototype;

$BaseAppComponent.__attributes__ = ["id", "root", "session", "uid"]
$BaseAppComponent.__properties__ = []
$BaseAppComponent.__actions__ = []
$BaseAppComponent.__emitters__ = []
$BaseAppComponent.__reactions__ = []

$BaseAppComponent._comp_init_app_component = function (property_values) {
    var active, custom_id, err_2, session;
    _pymeth_pop.call(property_values, "flx_is_app", null);
    custom_id = _pymeth_pop.call(property_values, "flx_id", null);
    this._session = null;
    session = _pymeth_pop.call(property_values, "flx_session", null);
    if ((session !== null)) {
        this._session = session;
    } else {
        active = loop.get_active_components();
        active = ((active.length > 1))? (active[active.length -2]) : (null);
        if ((active !== null)) {
            this._session = active._session;
        } else if ((!"this_is_js()")) {
        }
    }
    if ((this._session === null)) {
        throw _pyfunc_op_error('RuntimeError', (_pymeth_format.call("{} needs a session!", (_pyfunc_truthy(custom_id) || this._id))));
    }
    this._session._register_component(this, custom_id);
    this._root = this._session.app;
    return custom_id === null;
};


var LocalComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
LocalComponent.prototype = Object.create(BaseAppComponent.prototype);
LocalComponent.prototype._base_class = BaseAppComponent.prototype;
LocalComponent.prototype.__name__ = "LocalComponent";
var $LocalComponent = LocalComponent.prototype;

$LocalComponent.__attributes__ = ["id", "root", "session", "uid"]
$LocalComponent.__properties__ = []
$LocalComponent.__actions__ = []
$LocalComponent.__emitters__ = []
$LocalComponent.__reactions__ = []
$LocalComponent.__jsmodule__ = "flexx.app._component2"

$LocalComponent._comp_init_property_values = function (property_values) {
    this._LocalComponent__event_types_at_proxy = [];
    this._comp_init_app_component(property_values);
    this._has_proxy = _pymeth_pop.call(property_values, "flx_has_proxy", false);
    (BaseAppComponent.prototype._comp_init_property_values).call(this, property_values);
    if (true) { /* if this_is_js() */
        this._event_listeners = [];
    }
    return null;
};

$LocalComponent._ensure_proxy_instance = function (include_props) {
    var name, props, stub1_seq, stub2_itr;
    include_props = (include_props === undefined) ? true: include_props;
    if (((this._has_proxy === false) && (this._disposed === false))) {
        if ((this._session.status > 0)) {
            props = ({});
            if (_pyfunc_truthy(include_props)) {
                stub1_seq = this.__proxy_properties__;
                if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
                for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
                    name = stub1_seq[stub2_itr];
                    props[name] = _pyfunc_getattr(this, name);
                }
            }
            this._session.send_command("INSTANTIATE", this.__jsmodule__, Object.getPrototypeOf(this).__name__, this._id, [], props);
            this._has_proxy = true;
        }
    }
    return null;
};

$LocalComponent.emit = function (type, info) {
    var ev, isprop;
    info = (info === undefined) ? null: info;
    ev = (BaseAppComponent.prototype.emit).call(this, type, info);
    isprop = _pyfunc_op_contains(type, this.__proxy_properties__);
    if (((this._has_proxy === true) && (this._session.status > 0))) {
        if (_pyfunc_truthy(_pyfunc_truthy(isprop) || _pyfunc_op_contains(type, this._LocalComponent__event_types_at_proxy))) {
            this._session.send_command("INVOKE", this._id, "_emit_at_proxy", [ev]);
        }
    }
    return null;
};

$LocalComponent._dispose = function () {
    var was_disposed;
    was_disposed = this._disposed;
    (BaseAppComponent.prototype._dispose).call(this);
    this._has_proxy = false;
    if (((was_disposed === false) && (this._session !== null))) {
        this._session._unregister_component(this);
        if ((this._session.status > 0)) {
            this._session.send_command("DISPOSE", this._id);
        }
    }
    return null;
};

$LocalComponent._flx_set_has_proxy = function (has_proxy) {
    this._has_proxy = has_proxy;
    return null;
};

$LocalComponent._flx_set_event_types_at_proxy = function (event_types) {
    this._LocalComponent__event_types_at_proxy = event_types;
    return null;
};


var ProxyComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
ProxyComponent.prototype = Object.create(BaseAppComponent.prototype);
ProxyComponent.prototype._base_class = BaseAppComponent.prototype;
ProxyComponent.prototype.__name__ = "ProxyComponent";
var $ProxyComponent = ProxyComponent.prototype;

$ProxyComponent.__attributes__ = ["id", "root", "session", "uid"]
$ProxyComponent.__properties__ = []
$ProxyComponent.__actions__ = ["_emit_at_proxy"]
$ProxyComponent.__emitters__ = []
$ProxyComponent.__reactions__ = []
$ProxyComponent.__jsmodule__ = "flexx.app._component2"

$ProxyComponent.__init__ = function () {
    var err_3, init_args, kwargs;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        init_args = arguments[0].flx_args;
    } else {init_args = Array.prototype.slice.call(arguments);}
    if (true) { /* if this_is_js() */
        if (!(init_args.length == 0)) { throw _pyfunc_op_error('AssertionError', "init_args.length == 0");}
        if ((!_pyfunc_op_contains("flx_id", kwargs))) {
            throw _pyfunc_op_error('RuntimeError', "Cannot instantiate a PyComponent from JS.");
        }
        (BaseAppComponent.prototype.__init__).call(this, {flx_args: [], flx_kwargs: kwargs});
    }
    return null;
};

$ProxyComponent._comp_init_property_values = function (property_values) {
    var local_inst, props2set;
    local_inst = this._comp_init_app_component(property_values);
    props2set = (_pyfunc_truthy(local_inst))? (({})) : (property_values);
    (BaseAppComponent.prototype._comp_init_property_values).call(this, props2set);
    if (true) { /* if this_is_js() */
        if (!(_pyfunc_op_equals((_pymeth_keys.call(property_values).length), 0))) { throw _pyfunc_op_error('AssertionError', "_pyfunc_op_equals((_pymeth_keys.call(property_values).length), 0)");}
    }
    return null;
};

$ProxyComponent._comp_apply_property_values = function (values) {
    var name, stub1_seq, stub2_itr, stub3_tgt, value;
    stub1_seq = values;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        stub3_tgt = stub1_seq[stub2_itr];
        name = stub3_tgt[0]; value = stub3_tgt[1];
        _pyfunc_setattr(this, (("_" + name) + "_value"), value);
    }
    return null;
};

$ProxyComponent._proxy_action = function (name) {
    var args, kwargs;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        name = arguments[0].flx_args[0];
        args = arguments[0].flx_args.slice(1);
    } else {args = Array.prototype.slice.call(arguments, 1);}
    if (!(!_pyfunc_truthy(kwargs))) { throw _pyfunc_op_error('AssertionError', "!_pyfunc_truthy(kwargs)");}
    this._session.send_command("INVOKE", this._id, name, args);
    return null;
};

$ProxyComponent._proxy_emitter = function (name) {
    var args, kwargs;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        name = arguments[0].flx_args[0];
        args = arguments[0].flx_args.slice(1);
    } else {args = Array.prototype.slice.call(arguments, 1);}
    if (true) { /* if this_is_js() */
        logger.error("Cannot use emitters of a PyComponent in JS.");
    }
    return null;
};

$ProxyComponent._mutate = function () {
    var args, err_1, kwargs;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        args = arguments[0].flx_args;
    } else {args = Array.prototype.slice.call(arguments);}
    throw _pyfunc_op_error('RuntimeError', "Cannot mutate properties from a proxy class.");
    serializer;
    BsdfComponentExtension;
    return null;
};

$ProxyComponent._registered_reactions_hook = function () {
    var event_types;
    event_types = (BaseAppComponent.prototype._registered_reactions_hook).call(this);
    try {
        if (((this._disposed === false) && (this._session.status > 0))) {
            this._session.send_command("INVOKE", this._id, "_flx_set_event_types_at_proxy", [event_types]);
        }
    } finally {
        return event_types;
    }
    return null;
};

$ProxyComponent._emit_at_proxy = function _emit_at_proxy (ev) {
    if ((!"this_is_js()")) {
    }
    if ((_pyfunc_op_contains(ev.type, this.__properties__) && _pyfunc_hasattr(ev, "mutation"))) {
        if (_pyfunc_op_equals(ev.mutation, "set")) {
            (BaseAppComponent.prototype._mutate).call(this, ev.type, ev.new_value);
        } else {
            (BaseAppComponent.prototype._mutate).call(this, ev.type, ev.objects, ev.mutation, ev.index);
        }
    } else {
        this.emit(ev.type, ev);
    }
    return null;
};
$ProxyComponent._emit_at_proxy.nobind = true;

$ProxyComponent.dispose = function () {
    var err_2;
    if (true) { /* if this_is_js() */
        throw _pyfunc_op_error('RuntimeError', "Cannot dispose a PyComponent from JS.");
    }
    return null;
};

$ProxyComponent._dispose = function () {
    var was_disposed;
    was_disposed = this._disposed;
    (BaseAppComponent.prototype._dispose).call(this);
    if (((was_disposed === false) && (this._session !== null))) {
        this._session._unregister_component(this);
        if ((this._session.status > 0)) {
            this._session.send_command("INVOKE", this._id, "_flx_set_has_proxy", [false]);
        }
    }
    return null;
};


var StubComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
StubComponent.prototype = Object.create(BaseAppComponent.prototype);
StubComponent.prototype._base_class = BaseAppComponent.prototype;
StubComponent.prototype.__name__ = "StubComponent";
var $StubComponent = StubComponent.prototype;

$StubComponent.__attributes__ = ["id", "root", "session", "uid"]
$StubComponent.__properties__ = []
$StubComponent.__actions__ = []
$StubComponent.__emitters__ = []
$StubComponent.__reactions__ = []
$StubComponent.__jsmodule__ = "flexx.app._component2"

$StubComponent.__init__ = function (session, id) {
    (BaseAppComponent.prototype.__init__).call(this);
    this._session = session;
    this._id = id;
    this._uid = _pyfunc_op_add((session.id + "_"), id);
    return null;
};


var JsComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
JsComponent.prototype = Object.create(LocalComponent.prototype);
JsComponent.prototype._base_class = LocalComponent.prototype;
JsComponent.prototype.__name__ = "JsComponent";
var $JsComponent = JsComponent.prototype;

$JsComponent.__attributes__ = ["id", "root", "session", "uid"]
$JsComponent.__properties__ = []
$JsComponent.__actions__ = []
$JsComponent.__emitters__ = []
$JsComponent.__reactions__ = []
$JsComponent.__jsmodule__ = "flexx.app._component2"
$JsComponent.__proxy_properties__ = []

$JsComponent._addEventListener = function (node, type, callback, capture) {
    capture = (capture === undefined) ? false: capture;
    node.addEventListener(type, callback, capture);
    _pymeth_append.call(this._event_listeners, [node, type, callback, capture]);
    return null;
};

$JsComponent._dispose = function () {
    var callback, capture, err, node, stub1_, type;
    (LocalComponent.prototype._dispose).call(this);
    while (this._event_listeners.length > 0) {
        try {
            stub1_ = this._event_listeners.pop();
            node = stub1_[0];type = stub1_[1];callback = stub1_[2];capture = stub1_[3];
            node.removeEventListener(type, callback, capture);
        } catch(err_3) {
            {
                err = err_3;
                console.log(err);
            }
        }
    }
    return null;
};



var PyComponent = function () {
    _pyfunc_op_instantiate(this, arguments);
}
PyComponent.prototype = Object.create(ProxyComponent.prototype);
PyComponent.prototype._base_class = ProxyComponent.prototype;
PyComponent.prototype.__name__ = "PyComponent";
var $PyComponent = PyComponent.prototype;

$PyComponent.__attributes__ = ["id", "root", "session", "uid"]
$PyComponent.__properties__ = []
$PyComponent.__actions__ = ["_emit_at_proxy"]
$PyComponent.__emitters__ = []
$PyComponent.__reactions__ = []
$PyComponent.__jsmodule__ = "flexx.app._component2"


var BsdfComponentExtension = {name: "flexx.app.component",
    match: function (s, c) {
        return c instanceof BaseAppComponent;
    },
    encode: function (s, c) {
        if (_pyfunc_truthy(c instanceof JsComponent)) {
            c._ensure_proxy_instance();
        }
        return {session_id:c._session.id, id:c._id};
    },
    decode: function (s, d) {
        var c, session;
        c = null;
        session = _pymeth_get.call(window.flexx.sessions, d["session_id"], null);
        if ((session === null)) {
            session = {id:d["session_id"]};
            c = new StubComponent(session, d["id"]);
        } else {
            c = session.get_component_instance(d["id"]);
            if ((c === null)) {
                logger.warn(_pymeth_format.call("Using stub component for {}.", d["id"]));
                c = new StubComponent(session, d["id"]);
            }
        }
        return c;
    }};
serializer.add_extension(BsdfComponentExtension);


return {JsComponent: JsComponent, LocalProperty: LocalProperty, PyComponent: PyComponent};
});

</script>


<script>window.flexx.spin();</script>


<script id='flexx.ui._widget.js'>
/* ========================== flexx.ui._widget ==========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.ui._widget", ["pscript-std.js", "flexx.event.js", "flexx.app._component2"], function (_py, event, flexx$app$_component2) {

"use strict";

var _pyfunc_bool = _py._pyfunc_bool, _pyfunc_create_dict = _py._pyfunc_create_dict, _pyfunc_float = _py._pyfunc_float, _pyfunc_format = _py._pyfunc_format, _pyfunc_list = _py._pyfunc_list, _pyfunc_op_add = _py._pyfunc_op_add, _pyfunc_op_contains = _py._pyfunc_op_contains, _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_op_error = _py._pyfunc_op_error, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_op_mult = _py._pyfunc_op_mult, _pyfunc_op_parse_kwargs = _py._pyfunc_op_parse_kwargs, _pyfunc_range = _py._pyfunc_range, _pyfunc_reversed = _py._pyfunc_reversed, _pyfunc_truthy = _py._pyfunc_truthy;

var _pymeth_append = _py._pymeth_append, _pymeth_endswith = _py._pymeth_endswith, _pymeth_format = _py._pymeth_format, _pymeth_get = _py._pymeth_get, _pymeth_insert = _py._pymeth_insert, _pymeth_items = _py._pymeth_items, _pymeth_join = _py._pymeth_join, _pymeth_lower = _py._pymeth_lower, _pymeth_pop = _py._pymeth_pop, _pymeth_remove = _py._pymeth_remove, _pymeth_repeat = _py._pymeth_repeat, _pymeth_replace = _py._pymeth_replace, _pymeth_split = _py._pymeth_split, _pymeth_startswith = _py._pymeth_startswith;

var app$LocalProperty = flexx$app$_component2.LocalProperty;

var JsComponent = flexx$app$_component2.JsComponent;

var loop = event.loop;





var create_element;
create_element = function flx_create_element (type, props) {
    var children;
    children = Array.prototype.slice.call(arguments, 2);
    props = (props === undefined) ? null: props;
    if ((children.length == 0)) {
        children = null;
    } else if (((children.length == 1) && Array.isArray(children[0]))) {
        children = children[0];
    }
    return {type:type, props:(_pyfunc_truthy(props) || ({})), children:children};
};


var Widget = function () {
    _pyfunc_op_instantiate(this, arguments);
}
Widget.prototype = Object.create(JsComponent.prototype);
Widget.prototype._base_class = JsComponent.prototype;
Widget.prototype.__name__ = "Widget";
var $Widget = Widget.prototype;

$Widget.DEFAULT_MIN_SIZE = [0, 0]
$Widget._container_value = "";
$Widget._parent_value = null;
$Widget._children_value = [];
$Widget._title_value = "";
$Widget._icon_value = "";
$Widget._css_class_value = "";
$Widget._flex_value = [0, 0];
$Widget._size_value = [0, 0];
$Widget._minsize_value = [0, 0];
$Widget._maxsize_value = [1000000000.0, 1000000000.0];
$Widget.__size_limits_value = [0, 1000000000.0, 0, 1000000000.0];
$Widget._tabindex_value = -2;
$Widget._capture_mouse_value = 1;
$Widget.__attributes__ = ["id", "root", "session", "uid"]
$Widget.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "title"]
$Widget.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_title"]
$Widget.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel"]
$Widget.__reactions__ = ["_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$Widget.__jsmodule__ = "flexx.ui._widget"
$Widget.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "title"]

$Widget.set_icon = function set_icon (val) {
    var err_2;
    if ((!(Object.prototype.toString.call(val).slice(8,-1).toLowerCase() === 'string'))) {
        throw _pyfunc_op_error('TypeError', "Icon must be a string");
    }
    this._mutate_icon(val);
    return null;
};
$Widget.set_icon.nobind = true;

$Widget.__init__ = function () {
    var active_component, active_components, init_args, is_app, kwargs, parent, stub1_seq, stub2_itr, style;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        init_args = arguments[0].flx_args;
    } else {init_args = Array.prototype.slice.call(arguments);}
    parent = _pymeth_pop.call(kwargs, "parent", null);
    if ((parent === null)) {
        active_components = loop.get_active_components();
        stub1_seq = _pyfunc_reversed(active_components);
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            active_component = stub1_seq[stub2_itr];
            if (_pyfunc_truthy(active_component instanceof Widget)) {
                parent = active_component;
                break;
            }
        }
    }
    if (((parent !== null) && ((!_pyfunc_truthy(_pymeth_get.call(kwargs, "flx_session", null)))))) {
        kwargs["flx_session"] = parent.session;
    }
    style = _pymeth_pop.call(kwargs, "style", "");
    is_app = _pymeth_get.call(kwargs, "flx_is_app", false);
    (JsComponent.prototype.__init__).call(this, {flx_args: init_args, flx_kwargs: kwargs});
    if ((parent !== null)) {
        this.set_parent(parent);
    } else if (_pyfunc_op_equals(this.container, "")) {
        if (_pyfunc_truthy(window.flexx.need_main_widget)) {
            window.flexx.need_main_widget = false;
            this.set_container("body");
        }
    }
    if ((_pymeth_get.call(kwargs, "minsize", null) === null)) {
        this.set_minsize(this.DEFAULT_MIN_SIZE);
    }
    if (_pyfunc_truthy(style)) {
        this.apply_style(style);
    }
    return null;
};

$Widget._comp_init_property_values = function (property_values) {
    var cls, err_2, i, nodes, stub1_els;
    (JsComponent.prototype._comp_init_property_values).call(this, property_values);
    nodes = this._create_dom();
    if (!(nodes !== null)) { throw _pyfunc_op_error('AssertionError', "nodes !== null");}
    if ((!Array.isArray(nodes))) {
        nodes = [nodes];
    }
    if (!((nodes.length == 1) || (nodes.length == 2))) { throw _pyfunc_op_error('AssertionError', "(nodes.length == 1) || (nodes.length == 2)");}
    if ((nodes.length == 1)) {
        this.outernode = this.node = this._Widget__render_resolve(nodes[0]);
    } else {
        this.outernode = this._Widget__render_resolve(nodes[0]);
        this.node = this._Widget__render_resolve(nodes[1]);
    }
    cls = Object.getPrototypeOf(this);
    stub1_els = true;
    for (i = 0; i < 32; i += 1) {
        this.outernode.classList.add("flx-" + cls.__name__);
        if ((cls === Widget.prototype)) {
            stub1_els = false; break;
        }
        cls = cls._base_class;
    } if (stub1_els) {
        throw _pyfunc_op_error('RuntimeError', _pymeth_format.call("Error determining class names for {}", this.id));
    }
    this._init_events();
    return null;
};

$Widget.init = function () {
    return null;
};

$Widget._create_dom = function () {
    return create_element("div");
};

$Widget._render_dom = function () {
    var i, node, nodes, stub1_seq, stub2_itr, widget;
    nodes = [];
    for (i = 0; i < this.outernode.childNodes.length; i += 1) {
        node = this.outernode.childNodes[i];
        if ((!(_pyfunc_truthy(node.classList) && (_pyfunc_truthy(node.classList.contains("flx-Widget")))))) {
            _pymeth_append.call(nodes, node);
        }
    }
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        widget = stub1_seq[stub2_itr];
        _pymeth_append.call(nodes, widget.outernode);
    }
    return nodes;
};

$Widget._Widget__render = function () {
    var err_2, err_3, node, vnode;
    vnode = this._render_dom();
    if (((vnode === null) || (vnode === this.outernode))) {
        return null;
    } else if (Array.isArray(vnode)) {
        vnode = {type:this.outernode.nodeName, props:({}), children:vnode};
    } else if ((Object.prototype.toString.call(vnode).slice(8,-1).toLowerCase() === 'object')) {
        if ((!_pyfunc_op_equals(_pymeth_lower.call(vnode.type), _pymeth_lower.call(this.outernode.nodeName)))) {
            throw _pyfunc_op_error('ValueError', "Widget._render_dom() must return root node with same element type as outernode.");
        }
    } else {
        throw _pyfunc_op_error('TypeError', "Widget._render_dom() must return None, list or dict.");
    }
    node = this._Widget__render_resolve(vnode, this.outernode);
    if (!(node === this.outernode)) { throw _pyfunc_op_error('AssertionError', "node === this.outernode");}
    return null;
};
$Widget._Widget__render.nobind = true;
$Widget._Widget__render._mode = "auto"

$Widget._Widget__render_resolve = function (vnode, node) {
    var err_2, i, i1, i2, key, map, new_subnode, ob, parts, stub1_seq, subnode, val, vsubnode;
    node = (node === undefined) ? null: node;
    if ((_pyfunc_truthy(vnode) && _pyfunc_truthy(vnode.nodeName))) {
        return vnode;
    } else if ((Object.prototype.toString.call(vnode).slice(8,-1).toLowerCase() === 'string')) {
        return window.document.createTextNode(vnode);
    } else if ((!(Object.prototype.toString.call(vnode).slice(8,-1).toLowerCase() === 'object'))) {
        throw _pyfunc_op_error('TypeError', ("Widget._render_dom() needs virtual nodes to be dicts, not " + vnode));
    }
    if ((!(Object.prototype.toString.call(vnode.type).slice(8,-1).toLowerCase() === 'string'))) {
        throw _pyfunc_op_error('TypeError', ("Widget._render_dom() needs virtual node type to be str, not " + vnode.type));
    }
    if ((!(Object.prototype.toString.call(vnode.props).slice(8,-1).toLowerCase() === 'object'))) {
        throw _pyfunc_op_error('TypeError', ("Widget._render_dom() needs virtual node props as dict, not " + vnode.props));
    }
    if (((node === null) || (!_pyfunc_op_equals(_pymeth_lower.call(node.nodeName), _pymeth_lower.call(vnode.type))))) {
        node = window.document.createElement(vnode.type);
    }
    map = ({css_class: "className", class: "className"});
    stub1_seq = vnode.props;
    for (key in stub1_seq) {
        if (!stub1_seq.hasOwnProperty(key)){ continue; }
        val = stub1_seq[key];
        ob = node;
        parts = _pymeth_split.call(_pymeth_replace.call(key, "__", "."), ".");
        for (i = 0; i < parts.length - 1; i += 1) {
            ob = ob[parts[i]];
        }
        key = parts[parts.length - 1];
        ob[_pymeth_get.call(map, key, key)] = val;
    }
    if ((vnode.children === null)) {
    } else if (Array.isArray(vnode.children)) {
        while (node.childNodes.length > vnode.children.length) {
            node.removeChild(node.childNodes[node.childNodes.length - 1]);
        }
        i1 = -1;
        for (i2 = 0; i2 < vnode.children.length; i2 += 1) {
            i1 = _pyfunc_op_add(i1, 1);
            vsubnode = vnode.children[i2];
            subnode = null;
            if ((i1 < node.childNodes.length)) {
                subnode = node.childNodes[i1];
                if ((_pyfunc_op_equals(subnode.nodeName, "#text") && ((Object.prototype.toString.call(vsubnode).slice(8,-1).toLowerCase() === 'string')))) {
                    if ((!_pyfunc_op_equals(subnode.data, vsubnode))) {
                        subnode.data = vsubnode;
                    }
                    continue;
                }
            }
            new_subnode = this._Widget__render_resolve(vsubnode, subnode);
            if ((subnode === null)) {
                node.appendChild(new_subnode);
            } else if ((subnode !== new_subnode)) {
                node.insertBefore(new_subnode, subnode);
                node.removeChild(subnode);
            }
        }
    } else {
        window.flexx_vnode = vnode;
        throw _pyfunc_op_error('TypeError', (_pymeth_format.call("Widget._render_dom() needs virtual node children to be None or list, not {}", vnode.children)));
    }
    return node;
};

$Widget.dispose = function () {
    var child, children, stub1_seq, stub2_itr;
    children = this.children;
    stub1_seq = children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        child = stub1_seq[stub2_itr];
        child.dispose();
    }
    (JsComponent.prototype.dispose).call(this);
    this.set_parent(null);
    this._children_value = [];
    return null;
};

$Widget.apply_style = function apply_style (style) {
    var d, h1, h2, i, key, mima, part, size_limits_changed, size_limits_keys, stub1_, stub1_i0, stub1_iter0, stub1_k, stub1_v, stub2_, stub3_, stub4_seq, stub5_itr, stub6_, stub7_, val, w1, w2;
    if ((Object.prototype.toString.call(style).slice(8,-1).toLowerCase() === 'object')) {
        stub1_ = [];stub1_iter0 = _pymeth_items.call(style);if ((typeof stub1_iter0 === "object") && (!Array.isArray(stub1_iter0))) {stub1_iter0 = Object.keys(stub1_iter0);}for (stub1_i0=0; stub1_i0<stub1_iter0.length; stub1_i0++) {stub1_k = stub1_iter0[stub1_i0][0]; stub1_v = stub1_iter0[stub1_i0][1];{stub1_.push(_pymeth_format.call("{}: {}", stub1_k, stub1_v));}}
        style = stub1_;
        style = _pymeth_join.call("; ", style);
    }
    d = ({});
    if (_pyfunc_truthy(style)) {
        stub4_seq = _pymeth_split.call(style, ";");
        if ((typeof stub4_seq === "object") && (!Array.isArray(stub4_seq))) { stub4_seq = Object.keys(stub4_seq);}
        for (stub5_itr = 0; stub5_itr < stub4_seq.length; stub5_itr += 1) {
            part = stub4_seq[stub5_itr];
            if (_pyfunc_op_contains(":", part)) {
                stub2_ = _pymeth_split.call(part, ":");
                key = stub2_[0];val = stub2_[1];
                stub3_ = [key.trim(), val.trim()];
                key = stub3_[0];val = stub3_[1];
                this.outernode.style[key] = val;
                d[key] = val;
            }
        }
    }
    stub6_ = this.minsize;
    w1 = stub6_[0];h1 = stub6_[1];
    stub7_ = this.maxsize;
    w2 = stub7_[0];h2 = stub7_[1];
    mima = [w1, w2, h1, h2];
    size_limits_keys = ["min-width", "max-width", "min-height", "max-height"];
    size_limits_changed = false;
    for (i = 0; i < 4; i += 1) {
        key = size_limits_keys[i];
        if (_pyfunc_op_contains(key, d)) {
            val = d[key];
            if (_pyfunc_op_equals(val, "0")) {
                mima[i] = 0;
                size_limits_changed = true;
            } else if (_pyfunc_truthy(_pymeth_endswith.call(val, "px"))) {
                mima[i] = _pyfunc_float(val.slice(0,-2));
                size_limits_changed = true;
            }
        }
    }
    if (_pyfunc_truthy(size_limits_changed)) {
        this.set_minsize([mima[0], mima[2]]);
        this.set_maxsize([mima[1], mima[3]]);
    }
    return null;
};
$Widget.apply_style.nobind = true;

$Widget._Widget__css_class_changed = function () {
    var cn, events, stub1_seq, stub2_itr, stub3_seq, stub4_itr;
    events = Array.prototype.slice.call(arguments);
    if (events.length) {
        stub1_seq = _pymeth_split.call((events[0].old_value), " ");
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            cn = stub1_seq[stub2_itr];
            if (_pyfunc_truthy(cn)) {
                _pymeth_remove.call(this.outernode.classList, cn);
            }
        }
        stub3_seq = _pymeth_split.call((events[events.length -1].new_value), " ");
        if ((typeof stub3_seq === "object") && (!Array.isArray(stub3_seq))) { stub3_seq = Object.keys(stub3_seq);}
        for (stub4_itr = 0; stub4_itr < stub3_seq.length; stub4_itr += 1) {
            cn = stub3_seq[stub4_itr];
            if (_pyfunc_truthy(cn)) {
                this.outernode.classList.add(cn);
            }
        }
    }
    return null;
};
$Widget._Widget__css_class_changed.nobind = true;
$Widget._Widget__css_class_changed._mode = "normal"
$Widget._Widget__css_class_changed._connection_strings = ["css_class"]

$Widget._Widget__title_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    if (((this.parent === null) && _pyfunc_op_equals(this.container, "body"))) {
        window.document.title = _pyfunc_truthy(this.title) || "Flexx app";
    }
    return null;
};
$Widget._Widget__title_changed.nobind = true;
$Widget._Widget__title_changed._mode = "normal"
$Widget._Widget__title_changed._connection_strings = ["title"]

$Widget._Widget__icon_changed = function () {
    var events, link, oldLink;
    events = Array.prototype.slice.call(arguments);
    if (((this.parent === null) && _pyfunc_op_equals(this.container, "body"))) {
        window.document.title = _pyfunc_truthy(this.title) || "Flexx app";
        link = window.document.createElement("link");
        oldLink = window.document.getElementById("flexx-favicon");
        link.id = "flexx-favicon";
        link.rel = "shortcut icon";
        link.href = events[events.length -1].new_value;
        if (_pyfunc_truthy(oldLink)) {
            window.document.head.removeChild(oldLink);
        }
        window.document.head.appendChild(link);
    }
    return null;
};
$Widget._Widget__icon_changed.nobind = true;
$Widget._Widget__icon_changed._mode = "normal"
$Widget._Widget__icon_changed._connection_strings = ["icon"]

$Widget._Widget__update_tabindex = function () {
    var events, ti;
    events = Array.prototype.slice.call(arguments);
    ti = this.tabindex;
    if ((ti < (-1))) {
        this.node.removeAttribute("tabIndex");
    } else {
        this.node.tabIndex = ti;
    }
    return null;
};
$Widget._Widget__update_tabindex.nobind = true;
$Widget._Widget__update_tabindex._mode = "auto"

$Widget._update_minmaxsize = function () {
    var h1, h2, s, stub1_, w1, w2;
    stub1_ = this._query_min_max_size();
    w1 = stub1_[0];w2 = stub1_[1];h1 = stub1_[2];h2 = stub1_[3];
    this._set_size_limits([w1, w2, h1, h2]);
    s = this.outernode.style;
    s["min-width"] = w1 + "px";
    s["max-width"] = w2 + "px";
    s["min-height"] = h1 + "px";
    s["max-height"] = h2 + "px";
    return null;
};
$Widget._update_minmaxsize.nobind = true;
$Widget._update_minmaxsize._mode = "auto"

$Widget._query_min_max_size = function () {
    var child, h1, h2, h3, h4, stub1_, stub2_, stub3_, stub4_, stub5_, w1, w2, w3, w4;
    stub1_ = this.minsize;
    w1 = stub1_[0];h1 = stub1_[1];
    stub2_ = this.maxsize;
    w2 = stub2_[0];h2 = stub2_[1];
    if ((this.outernode.classList.contains("flx-Layout") === false)) {
        if ((this.children.length == 1)) {
            child = this.children[0];
            if ((child.outernode.classList.contains("flx-Layout") === true)) {
                stub3_ = child._query_min_max_size();
                w3 = stub3_[0];w4 = stub3_[1];h3 = stub3_[2];h4 = stub3_[3];
                stub4_ = [Math.max(w1, w3), Math.min(w2, w4)];
                w1 = stub4_[0];w2 = stub4_[1];
                stub5_ = [Math.max(h1, h3), Math.min(h2, h4)];
                h1 = stub5_[0];h2 = stub5_[1];
            }
        }
    }
    return [w1, w2, h1, h2];
};

$Widget.check_real_size = function check_real_size () {
    var cursize, n;
    n = this.outernode;
    cursize = this.size;
    if ((((!_pyfunc_op_equals(cursize[0], n.clientWidth))) || (!_pyfunc_op_equals(cursize[1], n.clientHeight)))) {
        this._mutate_size([n.clientWidth, n.clientHeight]);
    }
    return null;
};
$Widget.check_real_size.nobind = true;

$Widget._Widget__size_may_have_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this.check_real_size();
    return null;
};
$Widget._Widget__size_may_have_changed.nobind = true;
$Widget._Widget__size_may_have_changed._mode = "normal"
$Widget._Widget__size_may_have_changed._connection_strings = ["container", "parent.size", "children"]

$Widget._set_size = function (prefix, w, h) {
    var i, size;
    size = [w, h];
    for (i = 0; i < 2; i += 1) {
        if (((size[i] <= 0) || (size === null) || (size === undefined))) {
            size[i] = "";
        } else if ((size[i] > 1)) {
            size[i] = size[i] + "px";
        } else {
            size[i] = _pyfunc_op_mult(size[i], 100) + "%";
        }
    }
    this.outernode.style[prefix + "width"] = size[0];
    this.outernode.style[prefix + "height"] = size[1];
    return null;
};

$Widget.set_parent = function set_parent (parent, pos) {
    var children, err_2, new_parent, old_parent;
    pos = (pos === undefined) ? null: pos;
    old_parent = this.parent;
    new_parent = parent;
    if (((new_parent === old_parent) && (pos === null))) {
        return null;
    }
    if ((!((new_parent === null) || (new_parent instanceof Widget)))) {
        throw _pyfunc_op_error('ValueError', _pymeth_format.call("{}.parent must be a Widget or None", this.id));
    }
    this._mutate_parent(new_parent);
    if ((old_parent !== null)) {
        children = _pyfunc_list(old_parent.children);
        while (_pyfunc_op_contains(this, children)) {
            _pymeth_remove.call(children, this);
        }
        if ((old_parent !== new_parent)) {
            old_parent._mutate_children(children);
        }
    }
    if ((new_parent !== null)) {
        if ((old_parent !== new_parent)) {
            children = _pyfunc_list(new_parent.children);
        }
        while (_pyfunc_op_contains(this, children)) {
            _pymeth_remove.call(children, this);
        }
        if ((pos === null)) {
            _pymeth_append.call(children, this);
        } else if ((pos >= 0)) {
            _pymeth_insert.call(children, pos, this);
        } else if ((pos < 0)) {
            _pymeth_append.call(children, null);
            _pymeth_insert.call(children, pos, this);
            _pymeth_pop.call(children, (-1));
        } else {
            _pymeth_append.call(children, null);
        }
        new_parent._mutate_children(children);
    }
    return null;
};
$Widget.set_parent.nobind = true;

$Widget._Widget__container_changed = function () {
    var el, events, id;
    events = Array.prototype.slice.call(arguments);
    id = this.container;
    _pymeth_remove.call(this.outernode.classList, "flx-main-widget");
    if (_pyfunc_truthy(this.parent)) {
        return null;
    }
    this._session.keep_checking_size_of(this, _pyfunc_bool(id));
    if (_pyfunc_truthy(id)) {
        if (_pyfunc_op_equals(id, "body")) {
            el = window.document.body;
            this.outernode.classList.add("flx-main-widget");
            window.document.title = _pyfunc_truthy(this.title) || "Flexx app";
        } else {
            el = window.document.getElementById(id);
            if ((el === null)) {
                window.setTimeout(this._Widget__container_changed, 100);
                return null;
            }
        }
        el.appendChild(this.outernode);
    }
    return null;
};
$Widget._Widget__container_changed.nobind = true;
$Widget._Widget__container_changed._mode = "normal"
$Widget._Widget__container_changed._connection_strings = ["container"]

$Widget._release_child = function (widget) {
    return null;
};

$Widget._registered_reactions_hook = function () {
    var event_type, event_types, stub1_seq, stub2_itr;
    event_types = (JsComponent.prototype._registered_reactions_hook).call(this);
    if ((this.tabindex < (-1))) {
        stub1_seq = event_types;
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            event_type = stub1_seq[stub2_itr];
            if (_pyfunc_op_contains(event_type, ["key_down", "key_up", "key_press"])) {
                this.set_tabindex(-1);
            }
        }
    }
    return event_types;
};

$Widget._init_events = function () {
    var losecapture, mdown, mmove_inside, mmove_outside, mup_inside, mup_outside, stopcapture;
    this._addEventListener(this.node, "wheel", this.pointer_wheel, 0);
    this._addEventListener(this.node, "keydown", this.key_down, 0);
    this._addEventListener(this.node, "keyup", this.key_up, 0);
    this._addEventListener(this.node, "keypress", this.key_press, 0);
    this._addEventListener(this.node, "mousedown", this.pointer_down, 0);
    this._addEventListener(this.node, "click", this.pointer_click, 0);
    this._addEventListener(this.node, "dblclick", this.pointer_double_click, 0);
    this._addEventListener(this.node, "touchstart", this.pointer_down, 0);
    this._addEventListener(this.node, "touchmove", this.pointer_move, 0);
    this._addEventListener(this.node, "touchend", this.pointer_up, 0);
    this._addEventListener(this.node, "touchcancel", this.pointer_cancel, 0);
    this._capture_flag = 0;
    mdown = (function flx_mdown (e) {
        if (_pyfunc_op_equals(this.capture_mouse, 0)) {
            this._capture_flag = 1;
        } else {
            this._capture_flag = 2;
            window.document.addEventListener("mousemove", mmove_outside, true);
            window.document.addEventListener("mouseup", mup_outside, true);
        }
        return null;
    }).bind(this);

    mmove_inside = (function flx_mmove_inside (e) {
        if ((_pyfunc_op_equals(this._capture_flag, (-1)))) {
            this._capture_flag = 0;
        } else if (_pyfunc_op_equals(this._capture_flag, 1)) {
            this.pointer_move(e);
        } else if ((_pyfunc_op_equals(this._capture_flag, 0) && (this.capture_mouse > 1))) {
            this.pointer_move(e);
        }
        return null;
    }).bind(this);

    mup_inside = (function flx_mup_inside (e) {
        if (_pyfunc_op_equals(this._capture_flag, 1)) {
            this.pointer_up(e);
        }
        this._capture_flag = 0;
        return null;
    }).bind(this);

    mmove_outside = (function flx_mmove_outside (e) {
        if (_pyfunc_op_equals(this._capture_flag, 2)) {
            e = (_pyfunc_truthy(window.event))? (window.event) : (e);
            this.pointer_move(e);
        }
        return null;
    }).bind(this);

    mup_outside = (function flx_mup_outside (e) {
        if (_pyfunc_op_equals(this._capture_flag, 2)) {
            e = (_pyfunc_truthy(window.event))? (window.event) : (e);
            stopcapture();
            this.pointer_up(e);
        }
        return null;
    }).bind(this);

    stopcapture = (function flx_stopcapture () {
        if (_pyfunc_op_equals(this._capture_flag, 2)) {
            this._capture_flag = -1;
            window.document.removeEventListener("mousemove", mmove_outside, true);
            window.document.removeEventListener("mouseup", mup_outside, true);
        }
        return null;
    }).bind(this);

    losecapture = (function flx_losecapture (e) {
        stopcapture();
        this.pointer_cancel(e);
        return null;
    }).bind(this);

    this._addEventListener(this.node, "mousedown", mdown, true);
    this._addEventListener(this.node, "losecapture", losecapture);
    this._addEventListener(this.node, "mousemove", mmove_inside, false);
    this._addEventListener(this.node, "mouseup", mup_inside, false);
    return null;
};

$Widget.pointer_down = function (e) {
    return this._create_pointer_event(e);
};
$Widget.pointer_down.nobind = true;

$Widget.pointer_up = function (e) {
    return this._create_pointer_event(e);
};
$Widget.pointer_up.nobind = true;

$Widget.pointer_cancel = function (e) {
    return this._create_pointer_event(e);
};
$Widget.pointer_cancel.nobind = true;

$Widget.pointer_click = function (e) {
    return this._create_pointer_event(e);
};
$Widget.pointer_click.nobind = true;

$Widget.pointer_double_click = function (e) {
    return this._create_pointer_event(e);
};
$Widget.pointer_double_click.nobind = true;

$Widget.pointer_move = function (e) {
    var ev;
    ev = this._create_pointer_event(e);
    ev.button = 0;
    return ev;
};
$Widget.pointer_move.nobind = true;

$Widget.pointer_wheel = function (e) {
    var ev;
    ev = this._create_pointer_event(e);
    ev.button = 0;
    ev.hscroll = _pyfunc_op_mult(e.deltaX, ([1, 16, 600][e.deltaMode]));
    ev.vscroll = _pyfunc_op_mult(e.deltaY, ([1, 16, 600][e.deltaMode]));
    return ev;
};
$Widget.pointer_wheel.nobind = true;

$Widget._create_pointer_event = function (e) {
    var button, buttons, buttons_mask, i, modifiers, offset, page_pos, pos, rect, stub1_, stub1_i0, stub1_iter0, stub2_, stub2_i0, stub2_iter0, stub2_n, t, touches;
    rect = this.node.getBoundingClientRect();
    offset = [rect.left, rect.top];
    if (_pymeth_startswith.call(e.type, "touch")) {
        t = e.changedTouches[0];
        pos = [_pyfunc_float((t.clientX - offset[0])), _pyfunc_float((t.clientY - offset[1]))];
        page_pos = [t.pageX, t.pageY];
        button = 0;
        buttons = [];
        touches = ({});
        for (i = 0; i < e.changedTouches.length; i += 1) {
            t = e.changedTouches[i];
            if ((t.target !== e.target)) {
                continue;
            }
            touches[t.identifier] = [_pyfunc_float((t.clientX - offset[0])), _pyfunc_float((t.clientY - offset[1])), t.force];
        }
    } else {
        pos = [_pyfunc_float((e.clientX - offset[0])), _pyfunc_float((e.clientY - offset[1]))];
        page_pos = [e.pageX, e.pageY];
        if (_pyfunc_truthy(e.buttons)) {
            buttons_mask = _pymeth_join.call(((_pyfunc_reversed(((function list_comprehension (iter0) {var res = [];var c, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {c = iter0[i0];{res.push(c);}}return res;}).call(this, e.buttons.toString(2)))))), "");
        } else {
            buttons_mask = [e.button.toString(2)];
        }
        stub1_ = [];stub1_iter0 = _pyfunc_range(0, 5, 1);if ((typeof stub1_iter0 === "object") && (!Array.isArray(stub1_iter0))) {stub1_iter0 = Object.keys(stub1_iter0);}for (stub1_i0=0; stub1_i0<stub1_iter0.length; stub1_i0++) {i = stub1_iter0[stub1_i0];if (!(_pyfunc_op_equals(buttons_mask[i], "1"))) {continue;}{stub1_.push(i + 1);}}
        buttons = stub1_;
        button = ({0: 1, 1: 3, 2: 2, 3: 4, 4: 5})[e.button];
        touches = _pyfunc_create_dict((-1), ([pos[0], pos[1], 1]));
    }
    stub2_ = [];stub2_iter0 = ["Alt", "Shift", "Ctrl", "Meta"];if ((typeof stub2_iter0 === "object") && (!Array.isArray(stub2_iter0))) {stub2_iter0 = Object.keys(stub2_iter0);}for (stub2_i0=0; stub2_i0<stub2_iter0.length; stub2_i0++) {stub2_n = stub2_iter0[stub2_i0];if (!(e[_pymeth_lower.call(stub2_n) + "Key"])) {continue;}{stub2_.push(stub2_n);}}
    modifiers = stub2_;
    return {pos:pos, page_pos:page_pos, touches:touches, button:button, buttons:buttons, modifiers:modifiers};
};

$Widget.key_down = function (e) {
    return this._create_key_event(e);
};
$Widget.key_down.nobind = true;

$Widget.key_up = function (e) {
    return this._create_key_event(e);
};
$Widget.key_up.nobind = true;

$Widget.key_press = function (e) {
    return this._create_key_event(e);
};
$Widget.key_press.nobind = true;

$Widget._create_key_event = function (e) {
    var key, modifiers, stub1_, stub1_i0, stub1_iter0, stub1_n;
    stub1_ = [];stub1_iter0 = ["Alt", "Shift", "Ctrl", "Meta"];if ((typeof stub1_iter0 === "object") && (!Array.isArray(stub1_iter0))) {stub1_iter0 = Object.keys(stub1_iter0);}for (stub1_i0=0; stub1_i0<stub1_iter0.length; stub1_i0++) {stub1_n = stub1_iter0[stub1_i0];if (!(e[_pymeth_lower.call(stub1_n) + "Key"])) {continue;}{stub1_.push(stub1_n);}}
    modifiers = stub1_;
    key = e.key;
    if (_pyfunc_truthy(((!_pyfunc_truthy(key))) && _pyfunc_truthy(e.code))) {
        key = e.code;
        if (_pymeth_startswith.call(key, "Key")) {
            key = key.slice(3);
            if ((!_pyfunc_op_contains("Shift", modifiers))) {
                key = _pymeth_lower.call(key);
            }
        } else if (_pymeth_startswith.call(key, "Digit")) {
            key = key.slice(5);
        }
    }
    key = _pymeth_get.call(({Esc: "Escape", Del: "Delete"}), key, key);
    return {key:key, modifiers:modifiers};
};

$Widget._container_validate = function (value) { return event.StringProp.prototype._validate(value, "container", null); }

$Widget._mutate_container = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['container'], args));
};

$Widget.set_container = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('container', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_container.nobind = true;

$Widget._parent_validate = function (value) { return event.ComponentProp.prototype._validate(value, "parent", null); }

$Widget._mutate_parent = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['parent'], args));
};

$Widget._children_validate = function (value) { return app$LocalProperty.prototype._validate(value, "children", null); }

$Widget._mutate_children = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['children'], args));
};

$Widget._title_validate = function (value) { return event.StringProp.prototype._validate(value, "title", null); }

$Widget._mutate_title = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['title'], args));
};

$Widget.set_title = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('title', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_title.nobind = true;

$Widget._icon_validate = function (value) { return app$LocalProperty.prototype._validate(value, "icon", null); }

$Widget._mutate_icon = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['icon'], args));
};

$Widget._css_class_validate = function (value) { return event.StringProp.prototype._validate(value, "css_class", null); }

$Widget._mutate_css_class = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['css_class'], args));
};

$Widget.set_css_class = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('css_class', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_css_class.nobind = true;

$Widget._flex_validate = function (value) { return event.FloatPairProp.prototype._validate(value, "flex", null); }

$Widget._mutate_flex = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['flex'], args));
};

$Widget.set_flex = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('flex', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_flex.nobind = true;

$Widget._size_validate = function (value) { return event.FloatPairProp.prototype._validate(value, "size", null); }

$Widget._mutate_size = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['size'], args));
};

$Widget._minsize_validate = function (value) { return event.FloatPairProp.prototype._validate(value, "minsize", null); }

$Widget._mutate_minsize = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['minsize'], args));
};

$Widget.set_minsize = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('minsize', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_minsize.nobind = true;

$Widget._maxsize_validate = function (value) { return event.FloatPairProp.prototype._validate(value, "maxsize", null); }

$Widget._mutate_maxsize = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['maxsize'], args));
};

$Widget.set_maxsize = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('maxsize', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_maxsize.nobind = true;

$Widget.__size_limits_validate = function (value) { return event.TupleProp.prototype._validate(value, "_size_limits", null); }

$Widget._mutate__size_limits = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['_size_limits'], args));
};

$Widget._set_size_limits = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('_size_limits', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget._set_size_limits.nobind = true;

$Widget._tabindex_validate = function (value) { return event.IntProp.prototype._validate(value, "tabindex", null); }

$Widget._mutate_tabindex = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['tabindex'], args));
};

$Widget.set_tabindex = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('tabindex', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_tabindex.nobind = true;

$Widget._capture_mouse_validate = function (value) { return event.IntProp.prototype._validate(value, "capture_mouse", null); }

$Widget._mutate_capture_mouse = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['capture_mouse'], args));
};

$Widget.set_capture_mouse = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('capture_mouse', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$Widget.set_capture_mouse.nobind = true;



return {Widget: Widget, create_element: create_element};
});

</script>


<script>window.flexx.spin();</script>


<script id='flexx.ui.layouts._layout.js'>
/* ====================== flexx.ui.layouts._layout ======================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.ui.layouts._layout", ["pscript-std.js", "flexx.ui._widget"], function (_py, flexx$ui$_widget) {

"use strict";

var _pyfunc_op_instantiate = _py._pyfunc_op_instantiate;

var Widget = flexx$ui$_widget.Widget;





var Layout = function () {
    _pyfunc_op_instantiate(this, arguments);
}
Layout.prototype = Object.create(Widget.prototype);
Layout.prototype._base_class = Widget.prototype;
Layout.prototype.__name__ = "Layout";
var $Layout = Layout.prototype;

$Layout.__attributes__ = ["id", "root", "session", "uid"]
$Layout.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "title"]
$Layout.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_title"]
$Layout.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel"]
$Layout.__reactions__ = ["_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$Layout.__jsmodule__ = "flexx.ui.layouts._layout"
$Layout.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "title"]


return {Layout: Layout};
});

</script>


<script>window.flexx.spin();</script>


<script id='flexx.ui.layouts._hv.js'>
/* ======================== flexx.ui.layouts._hv ========================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.ui.layouts._hv", ["pscript-std.js", "flexx.ui.layouts._layout", "flexx.event.js", "flexx.app._component2"], function (_py, flexx$ui$layouts$_layout, event, flexx$app$_component2) {

"use strict";

var _pyfunc_abs = _py._pyfunc_abs, _pyfunc_float = _py._pyfunc_float, _pyfunc_format = _py._pyfunc_format, _pyfunc_op_add = _py._pyfunc_op_add, _pyfunc_op_contains = _py._pyfunc_op_contains, _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_op_error = _py._pyfunc_op_error, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_op_mult = _py._pyfunc_op_mult, _pyfunc_op_parse_kwargs = _py._pyfunc_op_parse_kwargs, _pyfunc_range = _py._pyfunc_range, _pyfunc_reversed = _py._pyfunc_reversed, _pyfunc_sum = _py._pyfunc_sum, _pyfunc_truthy = _py._pyfunc_truthy;

var _pymeth_append = _py._pymeth_append, _pymeth_copy = _py._pymeth_copy, _pymeth_format = _py._pymeth_format, _pymeth_get = _py._pymeth_get, _pymeth_lower = _py._pymeth_lower, _pymeth_pop = _py._pymeth_pop, _pymeth_remove = _py._pymeth_remove, _pymeth_repeat = _py._pymeth_repeat, _pymeth_replace = _py._pymeth_replace;

var app$LocalProperty = flexx$app$_component2.LocalProperty;

var OrientationProp = event.OrientationProp;

var Property = event.Property;

var Layout = flexx$ui$layouts$_layout.Layout;





var OrientationProp;
OrientationProp = function () {
    _pyfunc_op_instantiate(this, arguments);
}
OrientationProp.prototype = Object.create(Property.prototype);
OrientationProp.prototype._base_class = Property.prototype;
OrientationProp.prototype.__name__ = "OrientationProp";

OrientationProp.prototype._default = "h";
OrientationProp.prototype._validate = function (v, name, data) {
    var err_2;
    if ((Object.prototype.toString.call(v).slice(8,-1).toLowerCase() === 'string')) {
        v = _pymeth_replace.call(_pymeth_lower.call(v), "-", "");
    }
    v = _pymeth_get.call(({horizontal: "h", 0: "h", lefttoright: "h", vertical: "v", 1: "v", toptobottom: "v", righttoleft: "hr", bottomtotop: "vr"}), v, v);
    if ((!_pyfunc_op_contains(v, ["h", "v", "hr", "vr"]))) {
        throw _pyfunc_op_error('ValueError', _pymeth_format.call("{}.orientation got unknown value {!r}", this.id, v));
    }
    return v;
};



var HVLayout = function () {
    _pyfunc_op_instantiate(this, arguments);
}
HVLayout.prototype = Object.create(Layout.prototype);
HVLayout.prototype._base_class = Layout.prototype;
HVLayout.prototype.__name__ = "HVLayout";
var $HVLayout = HVLayout.prototype;

$HVLayout._DEFAULT_ORIENTATION = "h"
$HVLayout._DEFAULT_MODE = "box"
$HVLayout._mode_value = "box";
$HVLayout._orientation_value = "h";
$HVLayout._spacing_value = 4;
$HVLayout._padding_value = 1;
$HVLayout._splitter_positions_value = null;
$HVLayout.__attributes__ = ["id", "root", "session", "uid"]
$HVLayout.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$HVLayout.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$HVLayout.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$HVLayout.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$HVLayout.__jsmodule__ = "flexx.ui.layouts._hv"
$HVLayout.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]

$HVLayout.__init__ = function () {
    var args, kwargs;
    kwargs = {};
    if (arguments.length == 1 && typeof arguments[0] == 'object' && Object.keys(arguments[0]).toString() == 'flx_args,flx_kwargs') {
        kwargs = _pyfunc_op_parse_kwargs([], [], arguments[0].flx_kwargs);
        args = arguments[0].flx_args;
    } else {args = Array.prototype.slice.call(arguments);}
    kwargs["mode"] = _pymeth_get.call(kwargs, "mode", this._DEFAULT_MODE);
    kwargs["orientation"] = _pymeth_get.call(kwargs, "orientation", this._DEFAULT_ORIENTATION);
    this._seps = [];
    this._dragging = null;
    (Layout.prototype.__init__).call(this, {flx_args: args, flx_kwargs: kwargs});
    if ((_pyfunc_op_contains("Split", this._id) && ((!_pyfunc_op_contains("spacing", kwargs))))) {
        this.set_spacing(8);
    }
    return null;
};

$HVLayout.set_from_flex_values = function set_from_flex_values () {
    var dim, i, pos, positions, size_sum, sizes, stub1_seq, stub2_itr, stub3_, stub3_i, stub3_i0, stub3_iter0, stub4_, stub4_i, stub4_i0, stub4_iter0, widget;
    sizes = [];
    dim = (_pyfunc_op_contains("h", this.orientation))? (0) : (1);
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        widget = stub1_seq[stub2_itr];
        _pymeth_append.call(sizes, widget.flex[dim]);
    }
    size_sum = ((sizes.length == 0))? (0) : (_pyfunc_sum(sizes));
    if (_pyfunc_op_equals(size_sum, 0)) {
        stub3_ = [];stub3_iter0 = sizes;if ((typeof stub3_iter0 === "object") && (!Array.isArray(stub3_iter0))) {stub3_iter0 = Object.keys(stub3_iter0);}for (stub3_i0=0; stub3_i0<stub3_iter0.length; stub3_i0++) {stub3_i = stub3_iter0[stub3_i0];{stub3_.push(1 / sizes.length);}}
        sizes = stub3_;
    } else {
        stub4_ = [];stub4_iter0 = sizes;if ((typeof stub4_iter0 === "object") && (!Array.isArray(stub4_iter0))) {stub4_iter0 = Object.keys(stub4_iter0);}for (stub4_i0=0; stub4_i0<stub4_iter0.length; stub4_i0++) {stub4_i = stub4_iter0[stub4_i0];{stub4_.push(stub4_i / size_sum);}}
        sizes = stub4_;
    }
    positions = [];
    pos = 0;
    for (i = 0; i < sizes.length - 1; i += 1) {
        pos = _pyfunc_op_add(pos, sizes[i]);
        _pymeth_append.call(positions, pos);
    }
    this._mutate_splitter_positions(positions);
    return null;
};
$HVLayout.set_from_flex_values.nobind = true;

$HVLayout.set_splitter_positions = function set_splitter_positions () {
    var i, pos, positions, positions2;
    positions = Array.prototype.slice.call(arguments);
    if ((!_pyfunc_op_equals(this.mode, "SPLIT"))) {
        return null;
    }
    positions2 = [];
    for (i = 0; i < positions.length; i += 1) {
        pos = positions[i];
        if ((pos !== null)) {
            pos = Math.max(0.0, (Math.min(1.0, _pyfunc_float(pos))));
        }
        _pymeth_append.call(positions2, pos);
    }
    this._mutate_splitter_positions(positions2);
    return null;
};
$HVLayout.set_splitter_positions.nobind = true;

$HVLayout.user_splitter_positions = function () {
    var i, pos, positions, positions2;
    positions = Array.prototype.slice.call(arguments);
    if ((!_pyfunc_op_equals(this.mode, "SPLIT"))) {
        return null;
    }
    positions2 = [];
    for (i = 0; i < positions.length; i += 1) {
        pos = positions[i];
        if ((pos !== null)) {
            pos = Math.max(0.0, (Math.min(1.0, _pyfunc_float(pos))));
        }
        _pymeth_append.call(positions2, pos);
    }
    this.set_splitter_positions.apply(this, positions);
    return ({positions: positions});
};
$HVLayout.user_splitter_positions.nobind = true;

$HVLayout._query_min_max_size = function () {
    var child, extra_padding, extra_spacing, hori, i, mima1, mima2, mima3, stub1_seq, stub2_itr, stub3_seq, stub4_itr;
    hori = _pyfunc_op_contains("h", this.orientation);
    if ((hori === true)) {
        mima1 = [0, 0, 0, 1000000000.0];
        stub1_seq = this.children;
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            child = stub1_seq[stub2_itr];
            mima2 = child._size_limits;
            mima1[0] = _pyfunc_op_add(mima1[0], mima2[0]);
            mima1[1] = _pyfunc_op_add(mima1[1], mima2[1]);
            mima1[2] = Math.max(mima1[2], mima2[2]);
            mima1[3] = Math.min(mima1[3], mima2[3]);
        }
    } else {
        mima1 = [0, 1000000000.0, 0, 0];
        stub3_seq = this.children;
        if ((typeof stub3_seq === "object") && (!Array.isArray(stub3_seq))) { stub3_seq = Object.keys(stub3_seq);}
        for (stub4_itr = 0; stub4_itr < stub3_seq.length; stub4_itr += 1) {
            child = stub3_seq[stub4_itr];
            mima2 = child._size_limits;
            mima1[0] = Math.max(mima1[0], mima2[0]);
            mima1[1] = Math.min(mima1[1], mima2[1]);
            mima1[2] = _pyfunc_op_add(mima1[2], mima2[2]);
            mima1[3] = _pyfunc_op_add(mima1[3], mima2[3]);
        }
    }
    extra_padding = _pyfunc_op_mult(this.padding, 2);
    extra_spacing = _pyfunc_op_mult(this.spacing, (this.children.length - 1));
    for (i = 0; i < 4; i += 1) {
        mima1[i] = _pyfunc_op_add(mima1[i], extra_padding);
    }
    if ((hori === true)) {
        mima1[0] = _pyfunc_op_add(mima1[0], extra_spacing);
        mima1[1] = _pyfunc_op_add(mima1[1], extra_spacing);
    } else {
        mima1[2] = _pyfunc_op_add(mima1[2], extra_spacing);
        mima1[3] = _pyfunc_op_add(mima1[3], extra_spacing);
    }
    mima3 = (Layout.prototype._query_min_max_size).call(this);
    return [Math.max(mima1[0], mima3[0]), Math.min(mima1[1], mima3[1]), Math.max(mima1[2], mima3[2]), Math.min(mima1[3], mima3[3])];
};

$HVLayout._HVLayout__size_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this._rerender();
    return null;
};
$HVLayout._HVLayout__size_changed.nobind = true;
$HVLayout._HVLayout__size_changed._mode = "greedy"
$HVLayout._HVLayout__size_changed._connection_strings = ["size", "_size_limits"]

$HVLayout._HVLayout__let_children_check_size = function () {
    var child, events, stub1_seq, stub2_itr;
    events = Array.prototype.slice.call(arguments);
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        child = stub1_seq[stub2_itr];
        child.check_real_size();
    }
    return null;
};
$HVLayout._HVLayout__let_children_check_size.nobind = true;
$HVLayout._HVLayout__let_children_check_size._mode = "greedy"
$HVLayout._HVLayout__let_children_check_size._connection_strings = ["children*.size"]

$HVLayout._HVLayout__set_mode = function () {
    var child, events, stub1_seq, stub2_itr;
    events = Array.prototype.slice.call(arguments);
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        child = stub1_seq[stub2_itr];
        this._release_child(child);
    }
    if (_pyfunc_op_equals(this.mode, "BOX")) {
        _pymeth_remove.call(this.outernode.classList, "flx-split");
        this.outernode.classList.add("flx-box");
        this._set_box_child_flexes();
        this._set_box_spacing();
    } else {
        _pymeth_remove.call(this.outernode.classList, "flx-box");
        this.outernode.classList.add("flx-split");
        this._rerender();
    }
    return null;
};
$HVLayout._HVLayout__set_mode.nobind = true;
$HVLayout._HVLayout__set_mode._mode = "normal"
$HVLayout._HVLayout__set_mode._connection_strings = ["mode"]

$HVLayout._HVLayout__set_orientation = function () {
    var events, ori, stub1_seq, stub2_itr, widget;
    events = Array.prototype.slice.call(arguments);
    ori = this.orientation;
    if (_pyfunc_op_contains("h", ori)) {
        this.outernode.classList.add("flx-horizontal");
        _pymeth_remove.call(this.outernode.classList, "flx-vertical");
    } else {
        _pymeth_remove.call(this.outernode.classList, "flx-horizontal");
        this.outernode.classList.add("flx-vertical");
    }
    if (_pyfunc_op_contains("r", ori)) {
        this.outernode.classList.add("flx-reversed");
    } else {
        _pymeth_remove.call(this.outernode.classList, "flx-reversed");
    }
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        widget = stub1_seq[stub2_itr];
        widget.check_real_size();
    }
    this._rerender();
    return null;
};
$HVLayout._HVLayout__set_orientation.nobind = true;
$HVLayout._HVLayout__set_orientation._mode = "normal"
$HVLayout._HVLayout__set_orientation._connection_strings = ["orientation"]

$HVLayout._HVLayout__set_padding = function () {
    var events, stub1_seq, stub2_itr, widget;
    events = Array.prototype.slice.call(arguments);
    this.outernode.style["padding"] = this.padding + "px";
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        widget = stub1_seq[stub2_itr];
        widget.check_real_size();
    }
    this._rerender();
    return null;
};
$HVLayout._HVLayout__set_padding.nobind = true;
$HVLayout._HVLayout__set_padding._mode = "normal"
$HVLayout._HVLayout__set_padding._connection_strings = ["padding"]

$HVLayout._release_child = function (widget) {
    var n, stub1_seq, stub2_itr;
    stub1_seq = ["margin", "left", "width", "top", "height"];
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        n = stub1_seq[stub2_itr];
        widget.outernode.style[n] = "";
    }
    return null;
};

$HVLayout._render_dom = function () {
    var children, i, mode, nodes, use_seps;
    children = this.children;
    mode = this.mode;
    use_seps = _pyfunc_op_equals(mode, "SPLIT");
    if (_pyfunc_op_equals(mode, "BOX")) {
        this._ensure_seps(0);
    } else {
        this._ensure_seps(children.length - 1);
    }
    nodes = [];
    for (i = 0; i < children.length; i += 1) {
        _pymeth_append.call(nodes, (children[i].outernode));
        if ((_pyfunc_truthy(use_seps) && (i < this._seps.length))) {
            _pymeth_append.call(nodes, this._seps[i]);
        }
    }
    return nodes;
};

$HVLayout._ensure_seps = function (n) {
    var sep, to_remove;
    n = Math.max(0, n);
    to_remove = this._seps.slice(n);
    this._seps = this._seps.slice(0,n);
    while (this._seps.length < n) {
        sep = window.document.createElement("div");
        _pymeth_append.call(this._seps, sep);
        sep.i = this._seps.length - 1;
        sep.classList.add("flx-split-sep");
        sep.rel_pos = 0;
        sep.abs_pos = 0;
    }
    return null;
};

$HVLayout._rerender = function _rerender () {
    var child, sp1, sp2, stub1_seq, stub2_itr;
    if (_pyfunc_op_equals(this.mode, "BOX")) {
        stub1_seq = this.children;
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            child = stub1_seq[stub2_itr];
            child.check_real_size();
        }
    } else {
        sp1 = [];
        sp2 = this.splitter_positions;
        sp2 = ((sp2 === null))? ([]) : (sp2);
        if ((sp2.length == 0)) {
            sp1 = [1];
        }
        this._mutate_splitter_positions(sp1);
        this._mutate_splitter_positions(sp2);
    }
    return null;
};
$HVLayout._rerender.nobind = true;

$HVLayout._set_box_child_flexes = function () {
    var events, i, ori, stub1_seq, stub2_itr, stub3_seq, stub4_itr, widget;
    events = Array.prototype.slice.call(arguments);
    if ((!_pyfunc_op_equals(this.mode, "BOX"))) {
        return null;
    }
    ori = this.orientation;
    i = (_pyfunc_op_contains(ori, [0, "h", "hr"]))? (0) : (1);
    stub1_seq = this.children;
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        widget = stub1_seq[stub2_itr];
        _applyBoxStyle(widget.outernode, "flex-grow", widget.flex[i]);
        _applyBoxStyle(widget.outernode, "flex-shrink", _pyfunc_truthy(widget.flex[i]) || 1);
    }
    stub3_seq = this.children;
    if ((typeof stub3_seq === "object") && (!Array.isArray(stub3_seq))) { stub3_seq = Object.keys(stub3_seq);}
    for (stub4_itr = 0; stub4_itr < stub3_seq.length; stub4_itr += 1) {
        widget = stub3_seq[stub4_itr];
        widget.check_real_size();
    }
    return null;
};
$HVLayout._set_box_child_flexes.nobind = true;
$HVLayout._set_box_child_flexes._mode = "greedy"
$HVLayout._set_box_child_flexes._connection_strings = ["orientation", "children", "children*.flex"]

$HVLayout._set_box_spacing = function () {
    var child, children, children_events, events, margin, old_children, ori, stub10_seq, stub11_itr, stub1_, stub1_ev, stub1_i0, stub1_iter0, stub2_seq, stub3_itr, stub4_seq, stub5_itr, stub6_seq, stub7_itr, stub8_seq, stub9_itr, widget;
    events = Array.prototype.slice.call(arguments);
    if ((!_pyfunc_op_equals(this.mode, "BOX"))) {
        return null;
    }
    ori = this.orientation;
    stub1_ = [];stub1_iter0 = events;if ((typeof stub1_iter0 === "object") && (!Array.isArray(stub1_iter0))) {stub1_iter0 = Object.keys(stub1_iter0);}for (stub1_i0=0; stub1_i0<stub1_iter0.length; stub1_i0++) {stub1_ev = stub1_iter0[stub1_i0];if (!(_pyfunc_op_equals(stub1_ev.type, "children"))) {continue;}{stub1_.push(stub1_ev);}}
    children_events = stub1_;
    old_children = (_pyfunc_truthy(children_events))? (children_events[0].old_value) : ([]);
    children = this.children;
    stub2_seq = children;
    if ((typeof stub2_seq === "object") && (!Array.isArray(stub2_seq))) { stub2_seq = Object.keys(stub2_seq);}
    for (stub3_itr = 0; stub3_itr < stub2_seq.length; stub3_itr += 1) {
        child = stub2_seq[stub3_itr];
        child.outernode.style["margin-top"] = "";
        child.outernode.style["margin-left"] = "";
    }
    stub4_seq = old_children;
    if ((typeof stub4_seq === "object") && (!Array.isArray(stub4_seq))) { stub4_seq = Object.keys(stub4_seq);}
    for (stub5_itr = 0; stub5_itr < stub4_seq.length; stub5_itr += 1) {
        child = stub4_seq[stub5_itr];
        child.outernode.style["margin-top"] = "";
        child.outernode.style["margin-left"] = "";
    }
    margin = (_pyfunc_op_contains(ori, [1, "v", "vr"]))? ("margin-top") : ("margin-left");
    if (children.length) {
        if (_pyfunc_op_contains(ori, ["vr", "hr"])) {
            children[children.length -1].outernode.style[margin] = "0px";
            stub6_seq = children.slice(0,-1);
            if ((typeof stub6_seq === "object") && (!Array.isArray(stub6_seq))) { stub6_seq = Object.keys(stub6_seq);}
            for (stub7_itr = 0; stub7_itr < stub6_seq.length; stub7_itr += 1) {
                child = stub6_seq[stub7_itr];
                child.outernode.style[margin] = this.spacing + "px";
            }
        } else {
            children[0].outernode.style[margin] = "0px";
            stub8_seq = children.slice(1);
            if ((typeof stub8_seq === "object") && (!Array.isArray(stub8_seq))) { stub8_seq = Object.keys(stub8_seq);}
            for (stub9_itr = 0; stub9_itr < stub8_seq.length; stub9_itr += 1) {
                child = stub8_seq[stub9_itr];
                child.outernode.style[margin] = this.spacing + "px";
            }
        }
    }
    stub10_seq = children;
    if ((typeof stub10_seq === "object") && (!Array.isArray(stub10_seq))) { stub10_seq = Object.keys(stub10_seq);}
    for (stub11_itr = 0; stub11_itr < stub10_seq.length; stub11_itr += 1) {
        widget = stub10_seq[stub11_itr];
        widget.check_real_size();
    }
    return null;
};
$HVLayout._set_box_spacing.nobind = true;
$HVLayout._set_box_spacing._mode = "greedy"
$HVLayout._set_box_spacing._connection_strings = ["spacing", "orientation", "children"]

$HVLayout._get_available_size = function () {
    var bar_size, pad_size, total_size;
    bar_size = this.spacing;
    pad_size = this.padding;
    if (_pyfunc_op_contains("h", this.orientation)) {
        total_size = this.outernode.clientWidth;
    } else {
        total_size = this.outernode.clientHeight;
    }
    return [total_size, (total_size - _pyfunc_op_mult(bar_size, this._seps.length)) - _pyfunc_op_mult(2, pad_size)];
};

$HVLayout._HVLayout__spacing_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this._rerender();
    return null;
};
$HVLayout._HVLayout__spacing_changed.nobind = true;
$HVLayout._HVLayout__spacing_changed._mode = "normal"
$HVLayout._HVLayout__spacing_changed._connection_strings = ["spacing"]

$HVLayout._set_split_from_flexes = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this.set_from_flex_values();
    return null;
};
$HVLayout._set_split_from_flexes.nobind = true;
$HVLayout._set_split_from_flexes._mode = "greedy"
$HVLayout._set_split_from_flexes._connection_strings = ["children", "children*.flex"]

$HVLayout._HVLayout__watch_splitter_positions = function () {
    if ((!_pyfunc_op_equals(this.mode, "BOX"))) {
        this.splitter_positions;
        this.emit("_render");
    }
    return null;
};
$HVLayout._HVLayout__watch_splitter_positions.nobind = true;
$HVLayout._HVLayout__watch_splitter_positions._mode = "auto"

$HVLayout._HVLayout__apply_one_splitter_pos = function (index, pos) {
    var abs_positions, available_size, children, cur, i, ma, mi, ori, ref_pos, stub10_, stub1_, stub2_, stub2_i0, stub2_iter0, stub2_sep, stub3_, stub4_seq, stub5_itr, stub6_, stub7_, stub8_seq, stub9_itr, total_size;
    children = this.children;
    stub1_ = this._get_available_size();
    total_size = stub1_[0];available_size = stub1_[1];
    ori = this.orientation;
    if ((index >= this._seps.length)) {
        return null;
    }
    if ((pos < 0)) {
        pos = available_size - pos;
    }
    pos = Math.max(0, Math.min(available_size, pos));
    stub2_ = [];stub2_iter0 = this._seps;if ((typeof stub2_iter0 === "object") && (!Array.isArray(stub2_iter0))) {stub2_iter0 = Object.keys(stub2_iter0);}for (stub2_i0=0; stub2_i0<stub2_iter0.length; stub2_i0++) {stub2_sep = stub2_iter0[stub2_i0];{stub2_.push(stub2_sep.abs_pos);}}
    abs_positions = stub2_;
    abs_positions[index] = pos;
    ref_pos = pos;
    stub4_seq = _pyfunc_reversed(_pyfunc_range(0, index, 1));
    if ((typeof stub4_seq === "object") && (!Array.isArray(stub4_seq))) { stub4_seq = Object.keys(stub4_seq);}
    for (stub5_itr = 0; stub5_itr < stub4_seq.length; stub5_itr += 1) {
        i = stub4_seq[stub5_itr];
        cur = abs_positions[i];
        stub3_ = _get_min_max(children[i + 1], ori);
        mi = stub3_[0];ma = stub3_[1];
        abs_positions[i] = ref_pos = Math.max((ref_pos - ma), (Math.min((ref_pos - mi), cur)));
    }
    ref_pos = pos;
    for (i = index + 1; i < abs_positions.length; i += 1) {
        cur = abs_positions[i];
        stub6_ = _get_min_max(children[i], ori);
        mi = stub6_[0];ma = stub6_[1];
        abs_positions[i] = ref_pos = Math.max(_pyfunc_op_add(ref_pos, mi), (Math.min(_pyfunc_op_add(ref_pos, ma), cur)));
    }
    ref_pos = available_size;
    stub8_seq = _pyfunc_reversed(_pyfunc_range(0, abs_positions.length, 1));
    if ((typeof stub8_seq === "object") && (!Array.isArray(stub8_seq))) { stub8_seq = Object.keys(stub8_seq);}
    for (stub9_itr = 0; stub9_itr < stub8_seq.length; stub9_itr += 1) {
        i = stub8_seq[stub9_itr];
        cur = abs_positions[i];
        stub7_ = _get_min_max(children[i + 1], ori);
        mi = stub7_[0];ma = stub7_[1];
        abs_positions[i] = ref_pos = Math.max((ref_pos - ma), (Math.min((ref_pos - mi), cur)));
    }
    ref_pos = 0;
    for (i = 0; i < abs_positions.length; i += 1) {
        cur = abs_positions[i];
        stub10_ = _get_min_max(children[i], ori);
        mi = stub10_[0];ma = stub10_[1];
        abs_positions[i] = ref_pos = Math.max(_pyfunc_op_add(ref_pos, mi), (Math.min(_pyfunc_op_add(ref_pos, ma), cur)));
    }
    this.user_splitter_positions.apply(this, (function list_comprehension (iter0) {var res = [];var pos, i0;if ((typeof iter0 === "object") && (!Array.isArray(iter0))) {iter0 = Object.keys(iter0);}for (i0=0; i0<iter0.length; i0++) {pos = iter0[i0];{res.push(pos / available_size);}}return res;}).call(this, abs_positions));
    return null;
};

$HVLayout._HVLayout__apply_positions = function () {
    var available_size, children, gets, i, iter, net_size, ori, positions, ref_pos, size_for_each, stub1_, stub2_, stub3_seq, stub4_itr, stub5_seq, stub6_itr, take, total_size, w, ww, ww2;
    children = this.children;
    stub1_ = this._get_available_size();
    total_size = stub1_[0];available_size = stub1_[1];
    ori = this.orientation;
    positions = this.splitter_positions;
    if ((positions.length != this._seps.length)) {
        return null;
    }
    if (_pyfunc_truthy(children.length != (this._seps.length + 1))) {
        return null;
    }
    for (i = 0; i < positions.length; i += 1) {
        this._seps[i].abs_pos = _pyfunc_op_mult(positions[i], available_size);
    }
    ww = [];
    ref_pos = 0;
    for (i = 0; i < children.length; i += 1) {
        w = ({});
        _pymeth_append.call(ww, w);
        if ((i < this._seps.length)) {
            w.given = (this._seps[i].abs_pos) - ref_pos;
            ref_pos = this._seps[i].abs_pos;
        } else {
            w.given = available_size - ref_pos;
        }
        stub2_ = _get_min_max(children[i], ori);
        w.mi = stub2_[0];w.ma = stub2_[1];
        w.can_give = w.given - w.mi;
        w.can_receive = w.ma - w.given;
        w.has = w.given;
    }
    net_size = 0;
    stub3_seq = ww;
    if ((typeof stub3_seq === "object") && (!Array.isArray(stub3_seq))) { stub3_seq = Object.keys(stub3_seq);}
    for (stub4_itr = 0; stub4_itr < stub3_seq.length; stub4_itr += 1) {
        w = stub3_seq[stub4_itr];
        if ((w.can_give < 0)) {
            net_size = _pyfunc_op_add(net_size, w.can_give);
            w.has = w.mi;
            w.can_give = 0;
            w.can_receive = w.ma - w.has;
        } else if ((w.can_receive < 0)) {
            net_size -= w.can_receive;
            w.has = w.ma;
            w.can_receive = 0;
            w.can_give = w.has - w.mi;
        }
    }
    ww2 = _pymeth_copy.call(ww);
    for (iter = 0; iter < 4; iter += 1) {
        if ((((_pyfunc_abs(net_size) < 0.5)) || (ww2.length == 0))) {
            break;
        }
        size_for_each = net_size / ww2.length;
        stub5_seq = _pyfunc_reversed(_pyfunc_range(0, ww2.length, 1));
        if ((typeof stub5_seq === "object") && (!Array.isArray(stub5_seq))) { stub5_seq = Object.keys(stub5_seq);}
        for (stub6_itr = 0; stub6_itr < stub5_seq.length; stub6_itr += 1) {
            i = stub5_seq[stub6_itr];
            w = ww2[i];
            if ((net_size > 0)) {
                if ((w.can_receive > 0)) {
                    gets = Math.min(w.can_receive, size_for_each);
                    net_size -= gets;
                    w.can_receive -= gets;
                    w.has = _pyfunc_op_add(w.has, gets);
                }
                if ((w.can_receive <= 0)) {
                    _pymeth_pop.call(ww2, i);
                }
            } else {
                if ((w.can_give > 0)) {
                    take = Math.min(w.can_give, (-size_for_each));
                    net_size = _pyfunc_op_add(net_size, take);
                    w.can_give -= take;
                    w.has -= take;
                }
                if ((w.can_give <= 0)) {
                    _pymeth_pop.call(ww2, i);
                }
            }
        }
    }
    ref_pos = 0;
    for (i = 0; i < this._seps.length; i += 1) {
        ref_pos = _pyfunc_op_add(ref_pos, ww[i].has);
        this._seps[i].abs_pos = ref_pos;
    }
    for (i = 0; i < this._seps.length; i += 1) {
        this._seps[i].rel_pos = (this._seps[i].abs_pos) / available_size;
    }
    return null;
};

$HVLayout._HVLayout__render_positions = function () {
    var available_size, bar_size, child, children, i, is_horizonal, is_reversed, last_sep_pos, offset, ori, pad_size, pos, ref_pos, sep, size, stub1_, stub2_seq, stub3_itr, total_size, widget;
    children = this.children;
    bar_size = this.spacing;
    pad_size = this.padding;
    stub1_ = this._get_available_size();
    total_size = stub1_[0];available_size = stub1_[1];
    ori = this.orientation;
    if (_pyfunc_truthy(children.length != (this._seps.length + 1))) {
        return null;
    }
    this._HVLayout__apply_positions();
    is_horizonal = _pyfunc_op_contains("h", ori);
    is_reversed = _pyfunc_op_contains("r", ori);
    offset = pad_size;
    last_sep_pos = 0;
    for (i = 0; i < children.length; i += 1) {
        widget = children[i];
        ref_pos = ((i < this._seps.length))? (this._seps[i].abs_pos) : (available_size);
        size = ref_pos - last_sep_pos;
        if (true) {
            pos = _pyfunc_op_add(last_sep_pos, offset);
            if ((is_reversed === true)) {
                pos = (total_size - pos) - size;
            }
            if ((is_horizonal === true)) {
                widget.outernode.style.left = pos + "px";
                widget.outernode.style.width = size + "px";
                widget.outernode.style.top = pad_size + "px";
                widget.outernode.style.height = ("calc(100% - " + _pyfunc_op_mult(2, pad_size)) + "px)";
            } else {
                widget.outernode.style.left = pad_size + "px";
                widget.outernode.style.width = ("calc(100% - " + _pyfunc_op_mult(2, pad_size)) + "px)";
                widget.outernode.style.top = pos + "px";
                widget.outernode.style.height = size + "px";
            }
        }
        if ((i < this._seps.length)) {
            sep = this._seps[i];
            pos = _pyfunc_op_add(sep.abs_pos, offset);
            if ((is_reversed === true)) {
                pos = (total_size - pos) - bar_size;
            }
            if ((is_horizonal === true)) {
                sep.style.left = pos + "px";
                sep.style.width = bar_size + "px";
                sep.style.top = "0";
                sep.style.height = "100%";
            } else {
                sep.style.top = pos + "px";
                sep.style.height = bar_size + "px";
                sep.style.left = "0";
                sep.style.width = "100%";
            }
            offset = _pyfunc_op_add(offset, bar_size);
            last_sep_pos = sep.abs_pos;
        }
    }
    stub2_seq = children;
    if ((typeof stub2_seq === "object") && (!Array.isArray(stub2_seq))) { stub2_seq = Object.keys(stub2_seq);}
    for (stub3_itr = 0; stub3_itr < stub2_seq.length; stub3_itr += 1) {
        child = stub2_seq[stub3_itr];
        child.check_real_size();
    }
    return null;
};
$HVLayout._HVLayout__render_positions.nobind = true;
$HVLayout._HVLayout__render_positions._mode = "greedy"
$HVLayout._HVLayout__render_positions._connection_strings = ["!_render"]

$HVLayout.pointer_down = function (e) {
    var sep, t, x_or_y1;
    if ((_pyfunc_op_equals(this.mode, "SPLIT") && (_pyfunc_truthy(e.target.classList.contains("flx-split-sep"))))) {
        e.stopPropagation();
        sep = e.target;
        t = (_pyfunc_truthy(e.changedTouches))? (e.changedTouches[0]) : (e);
        x_or_y1 = (_pyfunc_op_contains("h", this.orientation))? (t.clientX) : (t.clientY);
        this._dragging = [this.orientation, sep.i, sep.abs_pos, x_or_y1];
        this.outernode.classList.add("flx-dragging");
    } else {
        return (Layout.prototype.pointer_down).call(this, e);
    }
    return null;
};
$HVLayout.pointer_down.nobind = true;

$HVLayout.pointer_up = function (e) {
    this._dragging = null;
    _pymeth_remove.call(this.outernode.classList, "flx-dragging");
    return (Layout.prototype.pointer_down).call(this, e);
};
$HVLayout.pointer_up.nobind = true;

$HVLayout.pointer_move = function (e) {
    var diff, i, ori, ref_pos, stub1_, t, x_or_y1, x_or_y2;
    if ((this._dragging !== null)) {
        e.stopPropagation();
        e.preventDefault();
        stub1_ = this._dragging;
        ori = stub1_[0];i = stub1_[1];ref_pos = stub1_[2];x_or_y1 = stub1_[3];
        if (_pyfunc_op_equals(ori, this.orientation)) {
            t = (_pyfunc_truthy(e.changedTouches))? (e.changedTouches[0]) : (e);
            x_or_y2 = (_pyfunc_op_contains("h", this.orientation))? (t.clientX) : (t.clientY);
            diff = (_pyfunc_op_contains("r", ori))? (x_or_y1 - x_or_y2) : (x_or_y2 - x_or_y1);
            this._HVLayout__apply_one_splitter_pos(i, Math.max(0, _pyfunc_op_add(ref_pos, diff)));
        }
    } else {
        return (Layout.prototype.pointer_move).call(this, e);
    }
    return null;
};
$HVLayout.pointer_move.nobind = true;

$HVLayout._mode_validate = function (value) { return event.EnumProp.prototype._validate(value, "mode", ["BOX", "FIX", "SPLIT"]); }

$HVLayout._mutate_mode = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['mode'], args));
};

$HVLayout.set_mode = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('mode', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$HVLayout.set_mode.nobind = true;

$HVLayout._orientation_validate = function (value) { return OrientationProp.prototype._validate(value, "orientation", null); }

$HVLayout._mutate_orientation = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['orientation'], args));
};

$HVLayout.set_orientation = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('orientation', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$HVLayout.set_orientation.nobind = true;

$HVLayout._spacing_validate = function (value) { return event.FloatProp.prototype._validate(value, "spacing", null); }

$HVLayout._mutate_spacing = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['spacing'], args));
};

$HVLayout.set_spacing = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('spacing', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$HVLayout.set_spacing.nobind = true;

$HVLayout._padding_validate = function (value) { return event.FloatProp.prototype._validate(value, "padding", null); }

$HVLayout._mutate_padding = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['padding'], args));
};

$HVLayout.set_padding = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('padding', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$HVLayout.set_padding.nobind = true;

$HVLayout._splitter_positions_validate = function (value) { return app$LocalProperty.prototype._validate(value, "splitter_positions", null); }

$HVLayout._mutate_splitter_positions = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['splitter_positions'], args));
};



var _applyBoxStyle;
_applyBoxStyle = function flx__applyBoxStyle (e, sty, value) {
    var prefix, stub1_seq, stub2_itr;
    stub1_seq = ["-webkit-", "-ms-", "-moz-", ""];
    if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
    for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
        prefix = stub1_seq[stub2_itr];
        e.style[_pyfunc_op_add(prefix, sty)] = value;
    }
    return null;
};


var _get_min_max;
_get_min_max = function flx__get_min_max (widget, ori) {
    var mima;
    mima = widget._size_limits;
    if (_pyfunc_op_contains("h", ori)) {
        return [mima[0], mima[1]];
    } else {
        return [mima[2], mima[3]];
    }
    return null;
};


var HBox = function () {
    _pyfunc_op_instantiate(this, arguments);
}
HBox.prototype = Object.create(HVLayout.prototype);
HBox.prototype._base_class = HVLayout.prototype;
HBox.prototype.__name__ = "HBox";
var $HBox = HBox.prototype;

$HBox._DEFAULT_ORIENTATION = "h"
$HBox._DEFAULT_MODE = "box"
$HBox.__attributes__ = ["id", "root", "session", "uid"]
$HBox.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$HBox.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$HBox.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$HBox.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$HBox.__jsmodule__ = "flexx.ui.layouts._hv"
$HBox.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


var VBox = function () {
    _pyfunc_op_instantiate(this, arguments);
}
VBox.prototype = Object.create(HVLayout.prototype);
VBox.prototype._base_class = HVLayout.prototype;
VBox.prototype.__name__ = "VBox";
var $VBox = VBox.prototype;

$VBox._DEFAULT_ORIENTATION = "v"
$VBox._DEFAULT_MODE = "box"
$VBox.__attributes__ = ["id", "root", "session", "uid"]
$VBox.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$VBox.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$VBox.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$VBox.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$VBox.__jsmodule__ = "flexx.ui.layouts._hv"
$VBox.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


var HFix = function () {
    _pyfunc_op_instantiate(this, arguments);
}
HFix.prototype = Object.create(HVLayout.prototype);
HFix.prototype._base_class = HVLayout.prototype;
HFix.prototype.__name__ = "HFix";
var $HFix = HFix.prototype;

$HFix._DEFAULT_ORIENTATION = "h"
$HFix._DEFAULT_MODE = "fix"
$HFix.__attributes__ = ["id", "root", "session", "uid"]
$HFix.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$HFix.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$HFix.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$HFix.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$HFix.__jsmodule__ = "flexx.ui.layouts._hv"
$HFix.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


var VFix = function () {
    _pyfunc_op_instantiate(this, arguments);
}
VFix.prototype = Object.create(HVLayout.prototype);
VFix.prototype._base_class = HVLayout.prototype;
VFix.prototype.__name__ = "VFix";
var $VFix = VFix.prototype;

$VFix._DEFAULT_ORIENTATION = "v"
$VFix._DEFAULT_MODE = "fix"
$VFix.__attributes__ = ["id", "root", "session", "uid"]
$VFix.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$VFix.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$VFix.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$VFix.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$VFix.__jsmodule__ = "flexx.ui.layouts._hv"
$VFix.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


var HSplit = function () {
    _pyfunc_op_instantiate(this, arguments);
}
HSplit.prototype = Object.create(HVLayout.prototype);
HSplit.prototype._base_class = HVLayout.prototype;
HSplit.prototype.__name__ = "HSplit";
var $HSplit = HSplit.prototype;

$HSplit._DEFAULT_ORIENTATION = "h"
$HSplit._DEFAULT_MODE = "split"
$HSplit.__attributes__ = ["id", "root", "session", "uid"]
$HSplit.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$HSplit.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$HSplit.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$HSplit.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$HSplit.__jsmodule__ = "flexx.ui.layouts._hv"
$HSplit.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


var VSplit = function () {
    _pyfunc_op_instantiate(this, arguments);
}
VSplit.prototype = Object.create(HVLayout.prototype);
VSplit.prototype._base_class = HVLayout.prototype;
VSplit.prototype.__name__ = "VSplit";
var $VSplit = VSplit.prototype;

$VSplit._DEFAULT_ORIENTATION = "v"
$VSplit._DEFAULT_MODE = "split"
$VSplit.__attributes__ = ["id", "root", "session", "uid"]
$VSplit.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "splitter_positions", "tabindex", "title"]
$VSplit.__actions__ = ["_rerender", "_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_from_flex_values", "set_icon", "set_maxsize", "set_minsize", "set_mode", "set_orientation", "set_padding", "set_parent", "set_spacing", "set_splitter_positions", "set_tabindex", "set_title"]
$VSplit.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_splitter_positions"]
$VSplit.__reactions__ = ["_HVLayout__let_children_check_size", "_HVLayout__render_positions", "_HVLayout__set_mode", "_HVLayout__set_orientation", "_HVLayout__set_padding", "_HVLayout__size_changed", "_HVLayout__spacing_changed", "_HVLayout__watch_splitter_positions", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_set_box_child_flexes", "_set_box_spacing", "_set_split_from_flexes", "_update_minmaxsize"]
$VSplit.__jsmodule__ = "flexx.ui.layouts._hv"
$VSplit.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "mode", "orientation", "padding", "parent", "size", "spacing", "tabindex", "title"]


return {HBox: HBox, HFix: HFix, HSplit: HSplit, HVLayout: HVLayout, OrientationProp: OrientationProp, VBox: VBox, VFix: VFix, VSplit: VSplit, _applyBoxStyle: _applyBoxStyle, _get_min_max: _get_min_max};
});

</script>


<script>window.flexx.spin();</script>


<script id='flexx.ui.widgets._button.js'>
/* ====================== flexx.ui.widgets._button ======================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("flexx.ui.widgets._button", ["pscript-std.js", "flexx.ui._widget", "flexx.event.js"], function (_py, flexx$ui$_widget, event) {

"use strict";

var _pyfunc_op_equals = _py._pyfunc_op_equals, _pyfunc_op_instantiate = _py._pyfunc_op_instantiate, _pyfunc_truthy = _py._pyfunc_truthy;

var _pymeth_remove = _py._pymeth_remove;

var Widget = flexx$ui$_widget.Widget;





var BaseButton = function () {
    _pyfunc_op_instantiate(this, arguments);
}
BaseButton.prototype = Object.create(Widget.prototype);
BaseButton.prototype._base_class = Widget.prototype;
BaseButton.prototype.__name__ = "BaseButton";
var $BaseButton = BaseButton.prototype;

$BaseButton.DEFAULT_MIN_SIZE = [10, 24]
$BaseButton._text_value = "";
$BaseButton._checked_value = false;
$BaseButton._disabled_value = false;
$BaseButton.__attributes__ = ["id", "root", "session", "uid"]
$BaseButton.__properties__ = ["_size_limits", "capture_mouse", "checked", "children", "container", "css_class", "disabled", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]
$BaseButton.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_checked", "set_container", "set_css_class", "set_disabled", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_text", "set_title"]
$BaseButton.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_checked"]
$BaseButton.__reactions__ = ["_BaseButton__on_pointer_click", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$BaseButton.__jsmodule__ = "flexx.ui.widgets._button"
$BaseButton.__proxy_properties__ = ["_size_limits", "capture_mouse", "checked", "container", "css_class", "disabled", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]

$BaseButton._BaseButton__on_pointer_click = function (e) {
    this.node.blur();
    return null;
};
$BaseButton._BaseButton__on_pointer_click.nobind = true;
$BaseButton._BaseButton__on_pointer_click._mode = "normal"
$BaseButton._BaseButton__on_pointer_click._connection_strings = ["pointer_click"]

$BaseButton.user_checked = function (checked) {
    var d;
    d = ({old_value: this.checked, new_value: checked});
    this.set_checked(checked);
    return d;
};
$BaseButton.user_checked.nobind = true;

$BaseButton._text_validate = function (value) { return event.StringProp.prototype._validate(value, "text", null); }

$BaseButton._mutate_text = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['text'], args));
};

$BaseButton.set_text = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('text', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$BaseButton.set_text.nobind = true;

$BaseButton._checked_validate = function (value) { return event.BoolProp.prototype._validate(value, "checked", null); }

$BaseButton._mutate_checked = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['checked'], args));
};

$BaseButton.set_checked = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('checked', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$BaseButton.set_checked.nobind = true;

$BaseButton._disabled_validate = function (value) { return event.BoolProp.prototype._validate(value, "disabled", null); }

$BaseButton._mutate_disabled = function () {
    var args;
    args = Array.prototype.slice.call(arguments);
    return this._mutate.apply(this, [].concat(['disabled'], args));
};

$BaseButton.set_disabled = function flx_setter () {
    var val;
    val = Array.prototype.slice.call(arguments);
    this._mutate('disabled', ((val.length == 1))? (val[0]) : (val));
    return null;
};
$BaseButton.set_disabled.nobind = true;



var Button = function () {
    _pyfunc_op_instantiate(this, arguments);
}
Button.prototype = Object.create(BaseButton.prototype);
Button.prototype._base_class = BaseButton.prototype;
Button.prototype.__name__ = "Button";
var $Button = Button.prototype;

$Button.DEFAULT_MIN_SIZE = [10, 28]
$Button.__attributes__ = ["id", "root", "session", "uid"]
$Button.__properties__ = ["_size_limits", "capture_mouse", "checked", "children", "container", "css_class", "disabled", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]
$Button.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_checked", "set_container", "set_css_class", "set_disabled", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_text", "set_title"]
$Button.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_checked"]
$Button.__reactions__ = ["_BaseButton__on_pointer_click", "_Button__disabled_changed", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$Button.__jsmodule__ = "flexx.ui.widgets._button"
$Button.__proxy_properties__ = ["_size_limits", "capture_mouse", "checked", "container", "css_class", "disabled", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]

$Button._create_dom = function () {
    var node;
    node = window.document.createElement("button");
    return node;
};

$Button._render_dom = function () {
    return [this.text];
};

$Button._Button__disabled_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    if (_pyfunc_truthy(events[events.length -1].new_value)) {
        this.node.setAttribute("disabled", "disabled");
    } else {
        this.node.removeAttribute("disabled");
    }
    return null;
};
$Button._Button__disabled_changed.nobind = true;
$Button._Button__disabled_changed._mode = "normal"
$Button._Button__disabled_changed._connection_strings = ["disabled"]



var ToggleButton = function () {
    _pyfunc_op_instantiate(this, arguments);
}
ToggleButton.prototype = Object.create(BaseButton.prototype);
ToggleButton.prototype._base_class = BaseButton.prototype;
ToggleButton.prototype.__name__ = "ToggleButton";
var $ToggleButton = ToggleButton.prototype;

$ToggleButton.DEFAULT_MIN_SIZE = [10, 28]
$ToggleButton.__attributes__ = ["id", "root", "session", "uid"]
$ToggleButton.__properties__ = ["_size_limits", "capture_mouse", "checked", "children", "container", "css_class", "disabled", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]
$ToggleButton.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_checked", "set_container", "set_css_class", "set_disabled", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_text", "set_title"]
$ToggleButton.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_checked"]
$ToggleButton.__reactions__ = ["_BaseButton__on_pointer_click", "_ToggleButton__check_changed", "_ToggleButton__toggle_checked", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$ToggleButton.__jsmodule__ = "flexx.ui.widgets._button"
$ToggleButton.__proxy_properties__ = ["_size_limits", "capture_mouse", "checked", "container", "css_class", "disabled", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]

$ToggleButton._create_dom = function () {
    var node;
    node = window.document.createElement("button");
    return node;
};

$ToggleButton._render_dom = function () {
    return [this.text];
};

$ToggleButton._ToggleButton__toggle_checked = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this.user_checked(!_pyfunc_truthy(this.checked));
    return null;
};
$ToggleButton._ToggleButton__toggle_checked.nobind = true;
$ToggleButton._ToggleButton__toggle_checked._mode = "normal"
$ToggleButton._ToggleButton__toggle_checked._connection_strings = ["pointer_click"]

$ToggleButton._ToggleButton__check_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    if (_pyfunc_truthy(this.checked)) {
        this.node.classList.add("flx-checked");
    } else {
        _pymeth_remove.call(this.node.classList, "flx-checked");
    }
    return null;
};
$ToggleButton._ToggleButton__check_changed.nobind = true;
$ToggleButton._ToggleButton__check_changed._mode = "normal"
$ToggleButton._ToggleButton__check_changed._connection_strings = ["checked"]



var RadioButton = function () {
    _pyfunc_op_instantiate(this, arguments);
}
RadioButton.prototype = Object.create(BaseButton.prototype);
RadioButton.prototype._base_class = BaseButton.prototype;
RadioButton.prototype.__name__ = "RadioButton";
var $RadioButton = RadioButton.prototype;

$RadioButton.__attributes__ = ["id", "root", "session", "uid"]
$RadioButton.__properties__ = ["_size_limits", "capture_mouse", "checked", "children", "container", "css_class", "disabled", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]
$RadioButton.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_checked", "set_container", "set_css_class", "set_disabled", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_text", "set_title"]
$RadioButton.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_checked"]
$RadioButton.__reactions__ = ["_BaseButton__on_pointer_click", "_RadioButton__check_changed", "_RadioButton__update_group", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$RadioButton.__jsmodule__ = "flexx.ui.widgets._button"
$RadioButton.__proxy_properties__ = ["_size_limits", "capture_mouse", "checked", "container", "css_class", "disabled", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]

$RadioButton._create_dom = function () {
    var node, outernode;
    outernode = window.document.createElement("label");
    node = window.document.createElement("input");
    outernode.appendChild(node);
    node.setAttribute("type", "radio");
    node.setAttribute("id", this.id);
    outernode.setAttribute("for", this.id);
    return [outernode, node];
};

$RadioButton._render_dom = function () {
    return [this.node, this.text];
};

$RadioButton._RadioButton__update_group = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    if (_pyfunc_truthy(this.parent)) {
        this.node.name = this.parent.id;
    }
    return null;
};
$RadioButton._RadioButton__update_group.nobind = true;
$RadioButton._RadioButton__update_group._mode = "normal"
$RadioButton._RadioButton__update_group._connection_strings = ["parent"]

$RadioButton._RadioButton__check_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this.node.checked = this.checked;
    return null;
};
$RadioButton._RadioButton__check_changed.nobind = true;
$RadioButton._RadioButton__check_changed._mode = "normal"
$RadioButton._RadioButton__check_changed._connection_strings = ["checked"]

$RadioButton.pointer_click = function (e) {
    var child, stub1_seq, stub2_itr;
    if (_pyfunc_truthy(this.parent)) {
        stub1_seq = this.parent.children;
        if ((typeof stub1_seq === "object") && (!Array.isArray(stub1_seq))) { stub1_seq = Object.keys(stub1_seq);}
        for (stub2_itr = 0; stub2_itr < stub1_seq.length; stub2_itr += 1) {
            child = stub1_seq[stub2_itr];
            if ((_pyfunc_truthy(child instanceof RadioButton) && (child !== this))) {
                child.set_checked(child.node.checked);
            }
        }
    }
    this.user_checked(this.node.checked);
    (BaseButton.prototype.pointer_click).call(this, e);
    return null;
};
$RadioButton.pointer_click.nobind = true;



var CheckBox = function () {
    _pyfunc_op_instantiate(this, arguments);
}
CheckBox.prototype = Object.create(BaseButton.prototype);
CheckBox.prototype._base_class = BaseButton.prototype;
CheckBox.prototype.__name__ = "CheckBox";
var $CheckBox = CheckBox.prototype;

$CheckBox.__attributes__ = ["id", "root", "session", "uid"]
$CheckBox.__properties__ = ["_size_limits", "capture_mouse", "checked", "children", "container", "css_class", "disabled", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]
$CheckBox.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_checked", "set_container", "set_css_class", "set_disabled", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_text", "set_title"]
$CheckBox.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel", "user_checked"]
$CheckBox.__reactions__ = ["_BaseButton__on_pointer_click", "_CheckBox__check_changed", "_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$CheckBox.__jsmodule__ = "flexx.ui.widgets._button"
$CheckBox.__proxy_properties__ = ["_size_limits", "capture_mouse", "checked", "container", "css_class", "disabled", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "text", "title"]

$CheckBox._create_dom = function () {
    var node, outernode;
    outernode = window.document.createElement("label");
    node = window.document.createElement("input");
    outernode.appendChild(node);
    node.setAttribute("type", "checkbox");
    node.setAttribute("id", this.id);
    outernode.setAttribute("for", this.id);
    this._addEventListener(node, "click", this._check_changed_from_dom, 0);
    return [outernode, node];
};

$CheckBox._render_dom = function () {
    return [this.node, this.text];
};

$CheckBox._CheckBox__check_changed = function () {
    var events;
    events = Array.prototype.slice.call(arguments);
    this.node.checked = this.checked;
    return null;
};
$CheckBox._CheckBox__check_changed.nobind = true;
$CheckBox._CheckBox__check_changed._mode = "normal"
$CheckBox._CheckBox__check_changed._connection_strings = ["checked"]

$CheckBox._check_changed_from_dom = function (ev) {
    this.user_checked(this.node.checked);
    return null;
};



return {BaseButton: BaseButton, Button: Button, CheckBox: CheckBox, RadioButton: RadioButton, ToggleButton: ToggleButton};
});

</script>


<script>window.flexx.spin();</script>


<script id='__main__.js'>
/* ============================== __main__ ==============================*/

/* Autogenerated code from Flexx. Code Subject to the BSD-2-clause license. */



flexx.define("__main__", ["pscript-std.js", "flexx.ui.widgets._button", "flexx.ui.layouts._hv", "flexx.ui._widget"], function (_py, flexx$ui$widgets$_button, flexx$ui$layouts$_hv, flexx$ui$_widget) {

"use strict";

var _pyfunc_op_instantiate = _py._pyfunc_op_instantiate;

var flx$Widget = flexx$ui$_widget.Widget;

var Widget = flexx$ui$_widget.Widget;

var flx$HSplit = flexx$ui$layouts$_hv.HSplit;

var flx$VBox = flexx$ui$layouts$_hv.VBox;

var flx$Button = flexx$ui$widgets$_button.Button;





var Example = function () {
    _pyfunc_op_instantiate(this, arguments);
}
Example.prototype = Object.create(Widget.prototype);
Example.prototype._base_class = Widget.prototype;
Example.prototype.__name__ = "Example";
var $Example = Example.prototype;

$Example.__attributes__ = ["id", "root", "session", "uid"]
$Example.__properties__ = ["_size_limits", "capture_mouse", "children", "container", "css_class", "flex", "icon", "maxsize", "minsize", "parent", "size", "tabindex", "title"]
$Example.__actions__ = ["_set_size_limits", "apply_style", "check_real_size", "set_capture_mouse", "set_container", "set_css_class", "set_flex", "set_icon", "set_maxsize", "set_minsize", "set_parent", "set_tabindex", "set_title"]
$Example.__emitters__ = ["key_down", "key_press", "key_up", "pointer_cancel", "pointer_click", "pointer_double_click", "pointer_down", "pointer_move", "pointer_up", "pointer_wheel"]
$Example.__reactions__ = ["_Widget__container_changed", "_Widget__css_class_changed", "_Widget__icon_changed", "_Widget__render", "_Widget__size_may_have_changed", "_Widget__title_changed", "_Widget__update_tabindex", "_update_minmaxsize"]
$Example.__jsmodule__ = "__main__"
$Example.__proxy_properties__ = ["_size_limits", "capture_mouse", "container", "css_class", "flex", "maxsize", "minsize", "parent", "size", "tabindex", "title"]

$Example.init = function () {
    var stub1_context, stub2_err, stub3_context, stub4_err;
    stub1_context = (new flx$HSplit());
    stub1_context.__enter__();
    try {
        new flx$Button({flx_args: [], flx_kwargs: {text: "foo"}});
        stub3_context = (new flx$VBox());
        stub3_context.__enter__();
        try {
            new flx$Widget({flx_args: [], flx_kwargs: {style: "background:red;", flex: 1}});
            new flx$Widget({flx_args: [], flx_kwargs: {style: "background:blue;", flex: 1}});
        } catch(err_2)  { stub4_err=err_2; }
        if (stub4_err) { if (!stub3_context.__exit__(stub4_err.name || "error", stub4_err, null)) { throw stub4_err; }
        } else { stub3_context.__exit__(null, null, null); }
    } catch(err_1)  { stub2_err=err_1; }
    if (stub2_err) { if (!stub1_context.__exit__(stub2_err.name || "error", stub2_err, null)) { throw stub2_err; }
    } else { stub1_context.__exit__(null, null, null); }
    return null;
};



return {Example: Example};
});

</script>


<script>window.flexx.spin();</script>


<script id='flexx-export.js'>
flexx.is_exported = true;

flexx.run_exported_app = function () {
    var commands_b64 = [
        "QlNERgIBbAJzBVBSSU5UcxVGbGV4eCBzZXNzaW9uIHNheXMgaGk=",
        "QlNERgIBbAdzC0lOU1RBTlRJQVRFcwhfX21haW5fX3MHRXhhbXBsZXMJRXhhbXBsZV8xbABtAwV0aXRsZXMTRmxleHggYXBwIC0gRXhhbXBsZQRpY29uc/0MVgAAAAAAAGRhdGE6aW1hZ2UvaWNvO2Jhc2U2NCxBQUFCQUFZQUVCQUFBQUFBSUFBb0JBQUFaZ0FBQUNBZ0FBQUFBQ0FBS0JBQUFJNEVBQUF3TUFBQUFBQWdBQ2drQUFDMkZBQUFRRUFBCkFBQUFJQUROQUFBQTNqZ0FBSUNBQUFBQUFDQUFrUUVBQUtzNUFBQUFBQUFBQUFBZ0FHVUVBQUE4T3dBQUtBQUFBQkFBQUFBZ0FBQUEKQVFBZ0FBQUFBQUFBQkFBQUV3c0FBQk1MQUFBQUFBQUFBQUFBQUNnb2VDb29LSGhBS0NoNFFDZ29lRUFvS0hncUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQW9LSGhBVUZEdy8xQlE4UDlRVVBEL0tDaDRRQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBS0NoNFFGQlE4UDlRVVBEL1VGRHcKL3lnb2VFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBELwpVRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFvCktIaEFVRkR3LzFCUThQOVFVUEQvS0NoNFFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFLQ2g0S2lnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQW9LSGhBVUZEdy8xQlE4UDlRVVBEL1VGRHcveWdvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvCktDaDRRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBS0NoNFFGQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFVRkR3LzFCUThQOVEKVVBEL1VGRHcveWdvZUVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0UUZCUQo4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFvS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3Ci95Z29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0UUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUtDaDRLaWdvZUVBb0tIaEEKS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lQ29BQUFBQUFBQUFBQUFBQUFBbwpLSGhBVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBCkFBQUFBQUFBS0NoNFFGQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0UUZCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDQKUUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3L3lnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3L3lnb2VFQUFBQUFBQUFBQUFBQUFBQUFvS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBVUZEdy8xQlE4UDlRClVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUtDaDRLaWdvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ28KZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNEtnQUFBQUFvQUFBQUlBQUFBRUFBQUFBQkFDQUFBQUFBQUFBUUFBQVRDd0FBRXdzQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBS0NoNEtpZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnbwplQ29BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFvS0hoQVVGRHcvMUJROFA5UVVQRC8KVUZEdy8xQlE4UDlRVVBEL0tDaDRRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvCmVFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBS0NoNFFGQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3L3lnb2VFQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFvS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvS0NoNApRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVEKVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFLQ2g0ClFGQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3L3lnb2VFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFvS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvS0NoNFFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFLQ2g0S2lnb2VFQW9LSGhBS0NoNFFDZ28KZUVBb0tIaEFLQ2g0UUNnb2VDb0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQ2dvZUNvb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUNvb0tIZ3FLQ2g0UUNnb2VFQW8KS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFLQ2g0UUZCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0ClFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy95Z29lRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQW9LSGhBVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDhvS0hoQUtDaDRRRkJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDRRQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcveWdvZUVBb0tIaEFVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFLQ2g0UUZCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0UUNnb2VFQlFVUEQvVUZEdy8xQlEKOFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy95Z29lRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQW9LSGhBVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBCktDaDRRRkJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDRRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcveWdvZUVBb0tIaEFVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUtDaDRRRkJROFA5UVVQRC8KVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9LQ2g0UUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy95Z29lRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQW9LSGhBVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBS0NoNFFGQlE4UDlRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDRRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lQ29vS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lQ29vCktIZ3FLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIZ3FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBb0tIZ3FLQ2g0UUNnb2VFQW9LSGhBS0NoNApRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lQ29vS0hncUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBCktDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VDb0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlEKVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDRRQ2dvZUVCUVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvS0NoNFFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUtDaDRRRkJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEEKS0NoNFFGQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBb0tIaEFVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJRCjhQOVFVUEQvVUZEdy95Z29lRUFvS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcKL3lnb2VFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL0tDaDRRQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRClVQRC9VRkR3LzFCUThQOVFVUEQvS0NoNFFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBS0NoNFFGQlEKOFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFLQ2g0UUZCUThQOVFVUEQvVUZEdwovMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBb0tIaEFVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3L3lnb2VFQW8KS0hoQVVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcveWdvZUVBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3Ci8xQlE4UDlRVVBEL0tDaDRRQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC8KS0NoNFFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBS0NoNFFGQlE4UDlRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFLQ2g0UUZCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJRCjhQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFvS0hncUtDaDQKUUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VDb29LSGdxS0NoNFFDZ29lRUFvS0hoQQpLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUNvQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQ2dBQUFBd0FBQUFZQUFBQUFFQUlBQUFBQUFBQUNRQUFCTUxBQUFUQ3dBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VDb29LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDQKUUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hncUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ28KZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvClVGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3Ci8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlEKOFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlEKVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4bwpLSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VDb29LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0ClFDZ29lRUFvS0hncUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lQ29vS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ28KZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQUFDZ29lQ29vS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNApRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVEKVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4bwpLSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJRCjhQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRClVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdwovMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlFVUEQvClVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3Ci8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC8KVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJRCjhQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRClVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ28KZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVEKVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC8KVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQQpBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvCktIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdwovMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvClVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3Ci8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFDZ29lQ29vS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvCmVFQW9LSGdxQUFBQUFDZ29lQ29vS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDQKUUNnb2VFQW9LSGdxQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQ2dvZUNvb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW8KS0hoQUtDaDRRQ2dvZUVBb0tIZ3FBQUFBQUNnb2VDb29LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnbwplRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC8KVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQQpBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRClVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdwovMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvClVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3Ci8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJRCjhQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRClVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlEKOFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvClVGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlEKVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDhvS0hoQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFDZ29lRUJRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC8KVUZEdy8xQlE4UDhvS0hoQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcKLzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBELwpVRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlEKOFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQQpBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvClVGRHcvMUJROFA4b0tIaEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQ2dvZUVCUVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUQo4UDlRVVBEL1VGRHcvMUJROFA4b0tIaEFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3Ci8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNnb2VFQlFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UQpVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOG9LSGhBQUFBQUFDZ29lRUJRVVBEL1VGRHcvMUJRCjhQOVFVUEQvVUZEdy8xQlE4UDlRVVBEL1VGRHcvMUJROFA5UVVQRC9VRkR3LzFCUThQOVFVUEQvVUZEdy8xQlE4UDhvS0hoQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDZ29lQ29vS0hoQQpLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ29lRUFvCktIZ3FBQUFBQUNnb2VDb29LSGhBS0NoNFFDZ29lRUFvS0hoQUtDaDRRQ2dvZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGhBS0NoNFFDZ28KZUVBb0tIaEFLQ2g0UUNnb2VFQW9LSGdxQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFDSlVFNUhEUW9hQ2dBQUFBMUpTRVJTQUFBQVFBQUFBRUFJQmdBQUFLcHBjZDRBCkFBQ1VTVVJCVkhqYTdkak5DWUF3RElCUnh5bVpJaU4wSE1kMkEzODJFSzJoeVBzZzF4d2VwWWNzaTZTN3JhM0ZPVGw0b21yL0NJRGMKZXQ5SHpyV3phajhBQUFBQUFBQUFBQUFBQUFBQUFBQUF3RUZFcW5ueThkVytDb0NjN1pNYitxa0JBQUFBQUFBQUFBQUFBQUFBQUFBQQpBQnhFNUFiNDZJbkdud0J5Nms4SkFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BZ0l1bHRCOWZkMUxzS29GVG9BQUFBQUVsRlRrU3VRbUNDCmlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFJQUFBQUNBQ0FZQUFBRERQbUhMQUFBQldFbEVRVlI0MnUzY3dRMkFJQXhBVWNZaFRNRUkKak9QWWJvQzZnUWRqU25rLzRkNlFkNEZEUzVFa1NaSWs2WnVPV3R0OWV2RFRzczRmQVVBL3g1aVJ6ek5qMXZrQkFBQUFBQUFBQUFBQQpBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBCkFBQUFBQUFBQUFBQUFPQWxBQXNpZGw0UUlVbVNKQ2xiUVo1SmJkWDVNZ0RvUG5JVy9xZ0JBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEKQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQQpZQmNBRmtUWTR5ZEpraVRKTTg4enlVZVBqeElBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURjCk5BQUNRQUFJQUFFZ0FBU0FBQkFBQWtBQUNBQUJJQUFFZ0FEUWZ3QXNpSkFrU1pJa0tVOFh1SjUxc1RNQ1pwZ0FBQUFBU1VWT1JLNUMKWUlLSlVFNUhEUW9hQ2dBQUFBMUpTRVJTQUFBQkFBQUFBUUFJQmdBQUFGeHlxR1lBQUFRc1NVUkJWSGphN2R4UkVZTXdFRVZSNUdSVwpSU1FnQjlrNGdLd0ZDQU1KNTg3RXdPdjIvTFhMSWttU0pFbVNKRW1TSkVtU0pFbVNKRW1TSkVtU0pFbjkyMHFKOXFwMzY0WDl4OXdmCkFHM0FmVjBQNy9yTERlMC81djRBY0lBQUFBQUFQQUFBQUFBZUFBQUFBQThBQUFDQUJ3QUFBTUFEQUFBQTRBRUFBQUR3QUFBQUFIZ0EKQUFBQVBBQUFBQUFPMFA0QUFJQUR0RDhBQU9BQTdROEFBRGhBK3dNQUFBN1EvZ0FBZ0FPMFB3QUE0QUR0RHdBQU9FRDdBd0FBQUxBLwpBQUFBQUE4QUFBQ0FCd0FBQU1BREFBQUE0QUVBQUFEd0FBQUFBSGdBQUFBQVBBQUFBQUFlQUFBQUFBOEFBQUNBL2VVQUFXQi9PVUFBCjJGOE9FQUQybHdNRWdQM2xBQUZnZnpsQUFOaGZEaEFBOXBjREJBQUFBT0FBQVFBQUFIZ0FBQUFBUEFBQUFBQWVBQUFBQUE4QUFBQ0EKQndBQUFNQURBQUFBNEFFQUFBRHdBQUFBQUhnQUFBQUFIS0Q5QVFBQUIyaC9BQURBQWRvZkFBQndnUFlIQUFBY29QMEJBQUFIYUg4QQpBTUFCMmg4QUFIQ0E5Z2NBQUFCZ2Z3QUFBQUFlQUFBQUFBOEFBQUNBQndBQUFNQURBQUFBNEFFQUFBRHdBQUFBQUhnQTZBcEE1SURlCnJSZjJIM04vU1pJa1NaSWtTWklrU1pJa1NaSWtTWklrU1pLa2gvTnpVai9IOVhQYWZ3TlEvU0dFUCtUd2h4b0FjTUQyQXdBQUhMRDkKQUFBQUIydy9BQURBQWRzUEFBQnd3UFlEQUFBY3NQMEFBQUFIYkQ4QUFNQUIydzhBQUFDQS9RQUFBQURZVHdBQWdQMEVBQURZVHdBQQpnUDBFQUFEWVR3QUFnUDBFQUFEWVR3QUFnUDBFQUFBQVFBQUFBQUFFQUFBQVFBQUFBQUFFQUFBQVFBQUFBQUFFQUFBQVFBQUFBQUFFCkFBQUFRQUFBQUFBRUFBQUFRQTRZQUFDUUF3WUFBT1NBQVFBQU9XQUFBRUFPR0FBQWtBTUdBQURrZ0FFQUFEbGdBQUFBQUE0WUFBQUEKZ0FPMkh3QUE0SUR0QndBQU9HRDdBUUFBRHRoK0FBQ0FBN1lmQUFEZ2dPMEhBQUE0WVBzQkFBQU8ySDRBQUFBQTdPZWJCQUFBMkU4QQpBSUQ5QkFBQTJFOEFBSUQ5QkFBQTJFOEFBSUQ5QkFBQTJFOEFBSUQ5QkFBQUFFQUFBQUFBQkFBQUFFQUFBQUFBQkFBQUFFQUFBQUFBCkJBQUFBRUFBQUFBQUJBQUFBRUFkQUlqOEFILyt3bjd2N0NkSmtpUkpraVJKa2lSSmtpUkpraVJKa2lSSmtqUjVrL3djMWM5SnBZc0EKVkg4b0lRRUFBQklBQUNBQkFBQVNBQUFnQVFBQUVnQUFJQUVBQUJJQUFDQUJBQUFTQUFBZ0FRQUFFZ0FBSUFFQUFCSUFBQ0FCQUFBUwpBQUFnQVFBQUVnQUFJQUVBQUJJQUFDQUJBQUFTQUFBZ0FRQUFFZ0FBSUFFQUFCSUFBQ0FCQUFBU0FIeVNFZ0FrQVVBU0FDUUJRQklBCkpBRkFFZ0FrQVVBQ0FBQWtBQUJBQWdBQUpBQUFRQUlBQUNRQUFFQUNBQUFrQUFCQUFnQUFKQUFBUUFJQUFDUUFBRUFDQUFBa0FBQkEKQWdBQUpBQUFRQUlBQUNRQUFFQUNBQUFrQUFCQUFnQUFKQUFBUUFJQUFDUUFBRUFDQUFBa0FBQkFBZ0FBcEE0QVJINkJCbi9oazVRawpTWklrU1pJa1NaSWtTWklrU1pJa1NaSWtTWklrZmF3VDdHcFV6YkVyNEpzQUFBQUFTVVZPUks1Q1lJST0KDWZseF9oYXNfcHJveHl5bAA=",
        "QlNERgIBbAFzCUlOSVRfRE9ORQ==",
        ];
    bb64 =  flexx.require("bb64");
    for (var i=0; i<commands_b64.length; i++) {
        var command = flexx.serializer.decode(bb64.decode(commands_b64[i]));
        flexx.s1._receive_command(command);
    }
};

</script>


<script>window.flexx.spin();</script>





<script>flexx.create_session("example", "example");</script>


</body>
</html>
